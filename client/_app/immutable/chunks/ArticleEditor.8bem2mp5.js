import{s as he,r as pe,c as de,e as j,j as N,a as q,b as B,k as D,d,f as U,i as I,q as k,Q as Ce,Y as $e,u as be,g as we,h as Te,l as W,T as Ne,U as te,G as De,R as Ae,t as R,o as y,S as Q,V as Ue,P as re,C as ae}from"./scheduler.DK5noefF.js";import{S as ve,i as Ie,f as ke,c as E,a as O,m as F,t as b,b as w,d as S,g as Le,e as je}from"./index.OECaLbXR.js";import{e as z}from"./each.Dbd03sI1.js";import{A as qe}from"./AuthorSignature.DMwuj1EW.js";import{T as Be}from"./TagChip.BKSCnMT_.js";import{eg as Pe,eh as ne,ee as Re,ei as Ee,ej as Oe,aY as se,ek as oe,el as ye}from"./messages.DZzIl59o.js";import{A as Me}from"./Article.BBb4dy5M.js";import{F as Ve}from"./FormFileInput.mN0v36sS.js";import{F as Fe}from"./FormInput.DvRHd4up.js";import{L as Ye,F as Se}from"./LangTabs.D_AYhfI9.js";import{F as Ge}from"./FormSubmitButton.zmtSKK1O.js";import{L as le}from"./Labeled.DSKh_Z0I.js";import{T as Qe}from"./TagSelector.BFldg1VB.js";import"./123.BVaw0gZK.js";import{s as ze}from"./superForms.37TMp2uc.js";import"./index.DQfRr7yB.js";const He=o=>({}),fe=o=>({});function ie(o,e,s){const r=o.slice();return r[15]=e[s],r}function Je(o){let e,s,r,t;return e=new Fe({props:{superform:o[2],field:"header",label:Ee()}}),r=new Se({props:{superform:o[2],field:"body",label:Oe()}}),{c(){E(e.$$.fragment),s=N(),E(r.$$.fragment)},l(n){O(e.$$.fragment,n),s=D(n),O(r.$$.fragment,n)},m(n,a){F(e,n,a),I(n,s,a),F(r,n,a),t=!0},p(n,a){const l={};a&4&&(l.superform=n[2]),e.$set(l);const f={};a&4&&(f.superform=n[2]),r.$set(f)},i(n){t||(b(e.$$.fragment,n),b(r.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),w(r.$$.fragment,n),t=!1},d(n){n&&d(s),S(e,n),S(r,n)}}}function Ke(o){let e,s,r,t;return e=new Fe({props:{superform:o[2],field:"headerEn",label:Ee()}}),r=new Se({props:{superform:o[2],field:"bodyEn",label:Oe()}}),{c(){E(e.$$.fragment),s=N(),E(r.$$.fragment)},l(n){O(e.$$.fragment,n),s=D(n),O(r.$$.fragment,n)},m(n,a){F(e,n,a),I(n,s,a),F(r,n,a),t=!0},p(n,a){const l={};a&4&&(l.superform=n[2]),e.$set(l);const f={};a&4&&(f.superform=n[2]),r.$set(f)},i(n){t||(b(e.$$.fragment,n),b(r.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),w(r.$$.fragment,n),t=!1},d(n){n&&d(s),S(e,n),S(r,n)}}}function We(o){var f;let e=o[15].member.firstName+"",s,r,t=o[15].member.lastName+"",n,a,l=((f=o[15].mandate)==null?void 0:f.position.name)&&me(o);return{c(){s=R(e),r=N(),n=R(t),l&&l.c(),a=ae()},l(i){s=y(i,e),r=D(i),n=y(i,t),l&&l.l(i),a=ae()},m(i,g){I(i,s,g),I(i,r,g),I(i,n,g),l&&l.m(i,g),I(i,a,g)},p(i,g){var $;g&1&&e!==(e=i[15].member.firstName+"")&&Q(s,e),g&1&&t!==(t=i[15].member.lastName+"")&&Q(n,t),($=i[15].mandate)!=null&&$.position.name?l?l.p(i,g):(l=me(i),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(i){i&&(d(s),d(r),d(n),d(a)),l&&l.d(i)}}}function Xe(o){let e=o[15].customAuthor.name+"",s;return{c(){s=R(e)},l(r){s=y(r,e)},m(r,t){I(r,s,t)},p(r,t){t&1&&e!==(e=r[15].customAuthor.name+"")&&Q(s,e)},d(r){r&&d(s)}}}function me(o){var t;let e,s=((t=o[15].mandate)==null?void 0:t.position.name)+"",r;return{c(){e=R(`,
              `),r=R(s)},l(n){e=y(n,`,
              `),r=y(n,s)},m(n,a){I(n,e,a),I(n,r,a)},p(n,a){var l;a&1&&s!==(s=((l=n[15].mandate)==null?void 0:l.position.name)+"")&&Q(r,s)},d(n){n&&(d(e),d(r))}}}function ue(o){let e,s,r;function t(l,f){return l[15].type==="Custom"&&l[15].customAuthor!=null?Xe:We}let n=t(o),a=n(o);return{c(){e=j("option"),a.c(),s=N(),this.h()},l(l){e=q(l,"OPTION",{});var f=B(e);a.l(f),s=D(f),f.forEach(d),this.h()},h(){e.__value=r=o[8](o[15],o[4].author)?o[4].author:o[15],re(e,e.__value)},m(l,f){I(l,e,f),a.m(e,null),k(e,s)},p(l,f){n===(n=t(l))&&a?a.p(l,f):(a.d(1),a=n(l),a&&(a.c(),a.m(e,s))),f&273&&r!==(r=l[8](l[15],l[4].author)?l[4].author:l[15])&&(e.__value=r,re(e,e.__value))},d(l){l&&d(e),a.d()}}}function Ze(o){let e,s,r,t=z(o[0]),n=[];for(let a=0;a<t.length;a+=1)n[a]=ue(ie(o,t,a));return{c(){e=j("select");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=q(a,"SELECT",{id:!0,class:!0});var l=B(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(d),this.h()},h(){U(e,"id","author"),U(e,"class","select select-bordered w-full max-w-xs"),e.required=!0,o[4].author===void 0&&Ne(()=>o[12].call(e))},m(a,l){I(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);te(e,o[4].author,!0),s||(r=De(e,"change",o[12]),s=!0)},p(a,l){if(l&273){t=z(a[0]);let f;for(f=0;f<t.length;f+=1){const i=ie(a,t,f);n[f]?n[f].p(i,l):(n[f]=ue(i),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=t.length}l&273&&te(e,a[4].author)},d(a){a&&d(e),Ae(n,a),s=!1,r()}}}function xe(o){let e=(o[4].slug?se():oe())+"",s;return{c(){s=R(e)},l(r){s=y(r,e)},m(r,t){I(r,s,t)},p(r,t){t&16&&e!==(e=(r[4].slug?se():oe())+"")&&Q(s,e)},d(r){r&&d(s)}}}function et(o){var V,G;let e,s,r,t,n,a,l,f,i,g,$,T,L,h,m,p,A,c;s=new Ye({props:{$$slots:{en:[Ke],sv:[Je]},$$scope:{ctx:o}}}),t=new le({props:{label:Pe(),error:o[3].author!==void 0?ne():"",$$slots:{default:[Ze]},$$scope:{ctx:o}}}),l=new le({props:{for:"tags",label:Re(),error:(G=(V=o[3].tags)==null?void 0:V._errors)==null?void 0:G.join(", ")}});function C(u){o[13](u)}let Y={name:"tags",allTags:o[1]};o[4].tags!==void 0&&(Y.selectedTags=o[4].tags),i=new Qe({props:Y}),pe.push(()=>ke(i,"selectedTags",C)),T=new Ve({props:{superform:o[2],field:"image",label:"Bild",onChange:o[9],accept:"image/*"}});const M=o[11]["form-end"],v=de(M,o,o[14],fe);return m=new Ge({props:{superform:o[2],class:"btn btn-primary mt-4",$$slots:{default:[xe]},$$scope:{ctx:o}}}),{c(){e=j("form"),E(s.$$.fragment),r=N(),E(t.$$.fragment),n=N(),a=j("div"),E(l.$$.fragment),f=N(),E(i.$$.fragment),$=N(),E(T.$$.fragment),L=N(),v&&v.c(),h=N(),E(m.$$.fragment),this.h()},l(u){e=q(u,"FORM",{method:!0,class:!0,enctype:!0});var _=B(e);O(s.$$.fragment,_),r=D(_),O(t.$$.fragment,_),n=D(_),a=q(_,"DIV",{class:!0});var P=B(a);O(l.$$.fragment,P),f=D(P),O(i.$$.fragment,P),P.forEach(d),$=D(_),O(T.$$.fragment,_),L=D(_),v&&v.l(_),h=D(_),O(m.$$.fragment,_),_.forEach(d),this.h()},h(){U(a,"class","flex w-full flex-col items-stretch"),U(e,"method","POST"),U(e,"class","form-control mb-8 gap-2"),U(e,"enctype","multipart/form-data")},m(u,_){I(u,e,_),F(s,e,null),k(e,r),F(t,e,null),k(e,n),k(e,a),F(l,a,null),k(a,f),F(i,a,null),k(e,$),F(T,e,null),k(e,L),v&&v.m(e,null),k(e,h),F(m,e,null),p=!0,A||(c=Ce(o[6].call(null,e)),A=!0)},p(u,[_]){var x,ee;const P={};_&16388&&(P.$$scope={dirty:_,ctx:u}),s.$set(P);const H={};_&8&&(H.error=u[3].author!==void 0?ne():""),_&16401&&(H.$$scope={dirty:_,ctx:u}),t.$set(H);const X={};_&8&&(X.error=(ee=(x=u[3].tags)==null?void 0:x._errors)==null?void 0:ee.join(", ")),l.$set(X);const J={};_&2&&(J.allTags=u[1]),!g&&_&16&&(g=!0,J.selectedTags=u[4].tags,$e(()=>g=!1)),i.$set(J);const Z={};_&4&&(Z.superform=u[2]),T.$set(Z),v&&v.p&&(!p||_&16384)&&be(v,M,u,u[14],p?Te(M,u[14],_,He):we(u[14]),fe);const K={};_&4&&(K.superform=u[2]),_&16400&&(K.$$scope={dirty:_,ctx:u}),m.$set(K)},i(u){p||(b(s.$$.fragment,u),b(t.$$.fragment,u),b(l.$$.fragment,u),b(i.$$.fragment,u),b(T.$$.fragment,u),b(v,u),b(m.$$.fragment,u),p=!0)},o(u){w(s.$$.fragment,u),w(t.$$.fragment,u),w(l.$$.fragment,u),w(i.$$.fragment,u),w(T.$$.fragment,u),w(v,u),w(m.$$.fragment,u),p=!1},d(u){u&&d(e),S(s),S(t),S(l),S(i),S(T),v&&v.d(u),S(m),A=!1,c()}}}function tt(o,e,s){let r,t,{$$slots:n={},$$scope:a}=e,{authorOptions:l}=e,{allTags:f}=e,{superform:i}=e,{articleImage:g=void 0}=e;const{form:$,enhance:T,errors:L}=i;W(o,$,c=>s(4,t=c)),W(o,L,c=>s(3,r=c));const h=(c,C)=>c.memberId===C.memberId&&c.mandateId===C.mandateId&&c.customId===C.customId&&c.type===C.type,m=c=>{var M;let C=(M=c.currentTarget.files)==null?void 0:M[0];if(!C)return;let Y=new FileReader;Y.readAsDataURL(C),Y.onload=v=>{var G;let V=((G=v.target)==null?void 0:G.result)??void 0;V instanceof ArrayBuffer?s(10,g=btoa(new Uint8Array(V).reduce((u,_)=>u+String.fromCharCode(_),""))):s(10,g=V)}};function p(){t.author=Ue(this),$.set(t),s(8,h),s(0,l)}function A(c){o.$$.not_equal(t.tags,c)&&(t.tags=c,$.set(t))}return o.$$set=c=>{"authorOptions"in c&&s(0,l=c.authorOptions),"allTags"in c&&s(1,f=c.allTags),"superform"in c&&s(2,i=c.superform),"articleImage"in c&&s(10,g=c.articleImage),"$$scope"in c&&s(14,a=c.$$scope)},[l,f,i,r,t,$,T,L,h,m,g,n,p,A,a]}class rt extends ve{constructor(e){super(),Ie(this,e,tt,et,he,{authorOptions:0,allTags:1,superform:2,articleImage:10})}}function ce(o,e,s){const r=o.slice();r[11]=e[s];const t=r[1].find(function(...a){return o[9](r[11],...a)});return r[12]=t,r}const at=o=>({}),_e=o=>({slot:"form-end"});function nt(o){let e;const s=o[7]["form-end"],r=de(s,o,o[10],_e);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,n){r&&r.p&&(!e||n&1024)&&be(r,s,t,t[10],e?Te(s,t[10],n,at):we(t[10]),_e)},i(t){e||(b(r,t),e=!0)},o(t){w(r,t),e=!1},d(t){r&&r.d(t)}}}function st(o){var r;let e,s;return e=new qe({props:{links:!1,slot:"author",member:o[4].author.member,position:(r=o[4].author.mandate)==null?void 0:r.position,customAuthor:o[4].author.customAuthor,type:o[4].author.type}}),{c(){E(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},p(t,n){var l;const a={};n&16&&(a.member=t[4].author.member),n&16&&(a.position=(l=t[4].author.mandate)==null?void 0:l.position),n&16&&(a.customAuthor=t[4].author.customAuthor),n&16&&(a.type=t[4].author.type),e.$set(a)},i(t){s||(b(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function ge(o){let e,s;return e=new Be({props:{tag:o[12]}}),{c(){E(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,t){F(e,r,t),s=!0},p(r,t){const n={};t&18&&(n.tag=r[12]),e.$set(n)},i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),s=!1},d(r){S(e,r)}}}function ot(o){let e,s,r=z(o[4].tags),t=[];for(let a=0;a<r.length;a+=1)t[a]=ge(ce(o,r,a));const n=a=>w(t[a],1,1,()=>{t[a]=null});return{c(){e=j("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=q(a,"DIV",{slot:!0,class:!0});var l=B(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(d),this.h()},h(){U(e,"slot","tags"),U(e,"class","flex flex-row flex-wrap gap-2")},m(a,l){I(a,e,l);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(a,l){if(l&18){r=z(a[4].tags);let f;for(f=0;f<r.length;f+=1){const i=ce(a,r,f);t[f]?(t[f].p(i,l),b(t[f],1)):(t[f]=ge(i),t[f].c(),b(t[f],1),t[f].m(e,null))}for(Le(),f=r.length;f<t.length;f+=1)n(f);je()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)b(t[l]);s=!0}},o(a){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)w(t[l]);s=!1},d(a){a&&d(e),Ae(t,a)}}}function lt(o){let e,s,r,t,n,a,l,f=ye()+"",i,g,$,T;function L(m){o[8](m)}let h={superform:o[2],allTags:o[1],authorOptions:o[0],$$slots:{"form-end":[nt]},$$scope:{ctx:o}};return o[3]!==void 0&&(h.articleImage=o[3]),r=new rt({props:h}),pe.push(()=>ke(r,"articleImage",L)),$=new Me({props:{article:{id:"",slug:"",header:o[4].header,headerEn:o[4].headerEn,body:o[4].body,bodyEn:o[4].bodyEn,authorId:o[4].author.id,publishedAt:new Date,createdAt:new Date,updatedAt:new Date,removedAt:null,status:"draft",imageUrl:o[3]??o[4].imageUrl??null},$$slots:{tags:[ot],author:[st]},$$scope:{ctx:o}}}),{c(){e=j("main"),s=j("section"),E(r.$$.fragment),n=N(),a=j("section"),l=j("span"),i=R(f),g=N(),E($.$$.fragment),this.h()},l(m){e=q(m,"MAIN",{class:!0});var p=B(e);s=q(p,"SECTION",{});var A=B(s);O(r.$$.fragment,A),A.forEach(d),n=D(p),a=q(p,"SECTION",{class:!0});var c=B(a);l=q(c,"SPAN",{class:!0});var C=B(l);i=y(C,f),C.forEach(d),g=D(c),O($.$$.fragment,c),c.forEach(d),p.forEach(d),this.h()},h(){U(l,"class","italic"),U(a,"class","-mt-4"),U(e,"class","container mx-auto flex flex-col gap-8 px-4 pt-8 lg:flex-row [&>*]:flex-1")},m(m,p){I(m,e,p),k(e,s),F(r,s,null),k(e,n),k(e,a),k(a,l),k(l,i),k(a,g),F($,a,null),T=!0},p(m,[p]){const A={};p&4&&(A.superform=m[2]),p&2&&(A.allTags=m[1]),p&1&&(A.authorOptions=m[0]),p&1024&&(A.$$scope={dirty:p,ctx:m}),!t&&p&8&&(t=!0,A.articleImage=m[3],$e(()=>t=!1)),r.$set(A);const c={};p&24&&(c.article={id:"",slug:"",header:m[4].header,headerEn:m[4].headerEn,body:m[4].body,bodyEn:m[4].bodyEn,authorId:m[4].author.id,publishedAt:new Date,createdAt:new Date,updatedAt:new Date,removedAt:null,status:"draft",imageUrl:m[3]??m[4].imageUrl??null}),p&1042&&(c.$$scope={dirty:p,ctx:m}),$.$set(c)},i(m){T||(b(r.$$.fragment,m),b($.$$.fragment,m),T=!0)},o(m){w(r.$$.fragment,m),w($.$$.fragment,m),T=!1},d(m){m&&d(e),S(r),S($)}}}function ft(o,e,s){let r,{$$slots:t={},$$scope:n}=e,{data:a}=e,{authorOptions:l}=e,{allTags:f}=e,{superform:i=ze(a,{dataType:"json"})}=e,g;const{form:$}=i;W(o,$,h=>s(4,r=h));function T(h){g=h,s(3,g)}const L=(h,m)=>m.id===h.id;return o.$$set=h=>{"data"in h&&s(6,a=h.data),"authorOptions"in h&&s(0,l=h.authorOptions),"allTags"in h&&s(1,f=h.allTags),"superform"in h&&s(2,i=h.superform),"$$scope"in h&&s(10,n=h.$$scope)},[l,f,i,g,r,$,a,t,T,L,n]}class kt extends ve{constructor(e){super(),Ie(this,e,ft,lt,he,{data:6,authorOptions:0,allTags:1,superform:2})}}export{kt as A};
