import{s as He,D as ke,e as h,j as R,t as F,a as g,b as E,k as S,o as j,d as m,f as _,p as J,F as le,i as K,q as r,P as Y,G as $,Q as Ye,R as Me,w as Qe,l as Ee,m as Xe,r as qe,Y as Ae,a0 as Je,S as Ke,O as Ne,a1 as Ze}from"./scheduler.DK5noefF.js";import{S as $e,i as xe,t as x,g as je,b as oe,e as Ge,f as Be,c as et,a as tt,m as lt,d as at}from"./index.OECaLbXR.js";import{e as Pe}from"./each.Dbd03sI1.js";import{g as we}from"./spread.CgU5AtxT.js";import"./123.BVaw0gZK.js";import{s as nt}from"./superForms.37TMp2uc.js";import"./index.DQfRr7yB.js";import{aT as Ie,aU as Oe,aE as st,aF as ot,aG as it,aH as rt,aV as We,aW as ut,aX as ft,aY as ct}from"./messages.DZzIl59o.js";import{S as dt}from"./StatusComponent.CudnW4VH.js";function Le(l,e,t){const s=l.slice();return s[26]=e[t],s}function Ue(l){let e,t,s,o,u,w=We()+"",c,a,f,n=l[6]&&l[0].allBookingRequests&&ye(l);return{c(){e=h("div"),t=h("div"),s=h("a"),o=h("span"),u=R(),c=F(w),a=R(),n&&n.c(),this.h()},l(v){e=g(v,"DIV",{class:!0});var D=E(e);t=g(D,"DIV",{class:!0});var B=E(t);s=g(B,"A",{class:!0,href:!0});var b=E(s);o=g(b,"SPAN",{class:!0}),E(o).forEach(m),u=S(b),c=j(b,w),b.forEach(m),B.forEach(m),a=S(D),n&&n.l(D),D.forEach(m),this.h()},h(){_(o,"class","i-mdi-arrow-expand-left"),_(s,"class","btn"),_(s,"href",l[15]("/booking/admin",void 0)),_(t,"class","w-fit"),_(e,"class","flex flex-col gap-5")},m(v,D){K(v,e,D),r(e,t),r(t,s),r(s,o),r(s,u),r(s,c),r(e,a),n&&n.m(e,null),f=!0},p(v,D){v[6]&&v[0].allBookingRequests?n?(n.p(v,D),D&65&&x(n,1)):(n=ye(v),n.c(),x(n,1),n.m(e,null)):n&&(je(),oe(n,1,1,()=>{n=null}),Ge())},i(v){f||(x(n),f=!0)},o(v){oe(n),f=!1},d(v){v&&m(e),n&&n.d()}}}function ye(l){let e,t,s,o;function u(a){l[16](a)}function w(a){l[17](a)}let c={class:"flex-row"};return l[6]!==void 0&&(c.bookingRequest=l[6]),l[0].allBookingRequests!==void 0&&(c.bookingRequests=l[0].allBookingRequests),e=new dt({props:c}),qe.push(()=>Be(e,"bookingRequest",u)),qe.push(()=>Be(e,"bookingRequests",w)),{c(){et(e.$$.fragment)},l(a){tt(e.$$.fragment,a)},m(a,f){lt(e,a,f),o=!0},p(a,f){const n={};!t&&f&64&&(t=!0,n.bookingRequest=a[6],Ae(()=>t=!1)),!s&&f&1&&(s=!0,n.bookingRequests=a[0].allBookingRequests,Ae(()=>s=!1)),e.$set(n)},i(a){o||(x(e.$$.fragment,a),o=!0)},o(a){oe(e.$$.fragment,a),o=!1},d(a){at(e,a)}}}function Ce(l){let e,t,s,o=!1,u,w,c,a=l[26].name+"",f,n,v,D,B;return v=Je(l[19][0]),{c(){e=h("label"),t=h("input"),w=R(),c=h("span"),f=F(a),n=R(),this.h()},l(b){e=g(b,"LABEL",{class:!0});var d=E(e);t=g(d,"INPUT",{type:!0,class:!0,name:!0}),w=S(d),c=g(d,"SPAN",{class:!0});var V=E(c);f=j(V,a),V.forEach(m),n=S(d),d.forEach(m),this.h()},h(){_(t,"type","checkbox"),_(t,"class","checkbox"),_(t,"name","bookables"),t.__value=s=l[26].id,Y(t,t.__value),t.disabled=u=l[1]==="review",_(c,"class","label-text"),_(e,"class","label cursor-pointer justify-start gap-4 rounded-lg"),v.p(t)},m(b,d){K(b,e,d),r(e,t),t.checked=~(l[2].bookables||[]).indexOf(t.__value),r(e,w),r(e,c),r(c,f),r(e,n),D||(B=$(t,"change",l[18]),D=!0)},p(b,d){d&1&&s!==(s=b[26].id)&&(t.__value=s,Y(t,t.__value),o=!0),d&2&&u!==(u=b[1]==="review")&&(t.disabled=u),(o||d&5)&&(t.checked=~(b[2].bookables||[]).indexOf(t.__value)),d&1&&a!==(a=b[26].name+"")&&Ke(f,a)},d(b){b&&m(e),v.r(),D=!1,B()}}}function Ve(l){let e,t,s,o,u=ut()+"",w;return{c(){e=h("div"),t=h("span"),s=R(),o=h("span"),w=F(u),this.h()},l(c){e=g(c,"DIV",{role:!0,class:!0});var a=E(e);t=g(a,"SPAN",{class:!0}),E(t).forEach(m),s=S(a),o=g(a,"SPAN",{});var f=E(o);w=j(f,u),f.forEach(m),a.forEach(m),this.h()},h(){_(t,"class","i-mdi-alert-outline size-6"),_(e,"role","alert"),_(e,"class","alert alert-warning")},m(c,a){K(c,e,a),r(e,t),r(e,s),r(e,o),r(o,w)},d(c){c&&m(e)}}}function ze(l){let e,t,s,o,u=Ie()+"",w,c,a,f,n,v=Oe()+"",D,B,b,d,V;return{c(){e=h("div"),t=h("input"),s=R(),o=h("button"),w=F(u),c=R(),a=h("span"),f=R(),n=h("button"),D=F(v),B=R(),b=h("span"),this.h()},l(P){e=g(P,"DIV",{class:!0});var T=E(e);t=g(T,"INPUT",{name:!0,type:!0}),s=S(T),o=g(T,"BUTTON",{formaction:!0,class:!0,"aria-label":!0});var C=E(o);w=j(C,u),c=S(C),a=g(C,"SPAN",{class:!0}),E(a).forEach(m),C.forEach(m),f=S(T),n=g(T,"BUTTON",{formaction:!0,class:!0,"aria-label":!0});var W=E(n);D=j(W,v),B=S(W),b=g(W,"SPAN",{class:!0}),E(b).forEach(m),W.forEach(m),T.forEach(m),this.h()},h(){t.hidden=!0,_(t,"name","id"),_(t,"type","text"),_(a,"class","i-mdi-check"),_(o,"formaction",l[15]("?/accept",void 0)),_(o,"class","btn btn-outline btn-success"),_(o,"aria-label",Ie()),J(o,"btn-disabled",l[6].status==="ACCEPTED"),_(b,"class","i-mdi-close"),_(n,"formaction",l[15]("?/reject",void 0)),_(n,"class","btn btn-outline btn-error"),_(n,"aria-label",Oe()),J(n,"btn-disabled",l[6].status==="DENIED"),_(e,"class","flex *:flex-1")},m(P,T){K(P,e,T),r(e,t),Y(t,l[6].id),r(e,s),r(e,o),r(o,w),r(o,c),r(o,a),r(e,f),r(e,n),r(n,D),r(n,B),r(n,b),d||(V=$(t,"input",l[23]),d=!0)},p(P,T){T&64&&t.value!==P[6].id&&Y(t,P[6].id),T&64&&J(o,"btn-disabled",P[6].status==="ACCEPTED"),T&64&&J(n,"btn-disabled",P[6].status==="DENIED")},d(P){P&&m(e),d=!1,V()}}}function Fe(l){let e,t,s=We()+"",o,u;function w(f,n){if(f[1]==="edit")return bt;if(f[1]==="create")return _t}let c=w(l),a=c&&c(l);return{c(){e=h("div"),t=h("a"),o=F(s),u=R(),a&&a.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var n=E(e);t=g(n,"A",{class:!0,href:!0});var v=E(t);o=j(v,s),v.forEach(m),u=S(n),a&&a.l(n),n.forEach(m),this.h()},h(){_(t,"class","btn"),_(t,"href",l[15]("/booking",void 0)),_(e,"class","flex *:flex-1")},m(f,n){K(f,e,n),r(e,t),r(t,o),r(e,u),a&&a.m(e,null)},p(f,n){c!==(c=w(f))&&(a&&a.d(1),a=c&&c(f),a&&(a.c(),a.m(e,null)))},d(f){f&&m(e),a&&a.d()}}}function _t(l){let e,t=ft()+"",s;return{c(){e=h("button"),s=F(t),this.h()},l(o){e=g(o,"BUTTON",{class:!0});var u=E(e);s=j(u,t),u.forEach(m),this.h()},h(){_(e,"class","btn btn-primary")},m(o,u){K(o,e,u),r(e,s)},d(o){o&&m(e)}}}function bt(l){let e,t=ct()+"",s;return{c(){e=h("button"),s=F(t),this.h()},l(o){e=g(o,"BUTTON",{class:!0});var u=E(e);s=j(u,t),u.forEach(m),this.h()},h(){_(e,"class","btn btn-primary")},m(o,u){K(o,e,u),r(e,s)},d(o){o&&m(e)}}}function pt(l){let e,t,s,o,u=st()+"",w,c,a,f,n,v,D=ot()+"",B,b,d,V,P,T,C,W=it()+"",ae,ne,L,ee,se,M,Q,k=rt()+"",G,H,A,ie,be,re,X,pe,De,q=l[1]==="review"&&Ue(l),te=Pe(l[0].bookables),N=[];for(let i=0;i<te.length;i+=1)N[i]=Ce(Le(l,te,i));let U=l[5]&&Ve(),me=[{type:"datetime-local"},{name:"start"},{placeholder:"Start"},{class:"input input-bordered w-full"},l[8].start,{disabled:V=l[1]==="review"}],ue={};for(let i=0;i<me.length;i+=1)ue=ke(ue,me[i]);let he=[{type:"datetime-local"},{name:"end"},{placeholder:"End"},{class:"input input-bordered w-full"},l[8].end,{disabled:ee=l[1]==="review"}],fe={};for(let i=0;i<he.length;i+=1)fe=ke(fe,he[i]);let ge=[{type:"text"},{name:"name"},{class:"input input-bordered w-full"},l[8].name,{disabled:ie=l[1]==="review"}],ce={};for(let i=0;i<ge.length;i+=1)ce=ke(ce,ge[i]);let I=l[1]==="review"&&l[6]&&ze(l),O=l[1]!=="review"&&Fe(l);return{c(){e=h("form"),q&&q.c(),t=R(),s=h("fieldset"),o=h("legend"),w=F(u),c=R();for(let i=0;i<N.length;i+=1)N[i].c();a=R(),U&&U.c(),f=R(),n=h("label"),v=h("span"),B=F(D),b=R(),d=h("input"),P=R(),T=h("label"),C=h("span"),ae=F(W),ne=R(),L=h("input"),se=R(),M=h("label"),Q=h("span"),G=F(k),H=R(),A=h("input"),be=R(),I&&I.c(),re=R(),O&&O.c(),this.h()},l(i){e=g(i,"FORM",{method:!0,class:!0});var p=E(e);q&&q.l(p),t=S(p),s=g(p,"FIELDSET",{class:!0});var z=E(s);o=g(z,"LEGEND",{class:!0});var y=E(o);w=j(y,u),y.forEach(m),c=S(z);for(let ve=0;ve<N.length;ve+=1)N[ve].l(z);z.forEach(m),a=S(p),U&&U.l(p),f=S(p),n=g(p,"LABEL",{});var Z=E(n);v=g(Z,"SPAN",{class:!0});var Te=E(v);B=j(Te,D),Te.forEach(m),b=S(Z),d=g(Z,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),Z.forEach(m),P=S(p),T=g(p,"LABEL",{});var de=E(T);C=g(de,"SPAN",{class:!0});var Re=E(C);ae=j(Re,W),Re.forEach(m),ne=S(de),L=g(de,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),de.forEach(m),se=S(p),M=g(p,"LABEL",{});var _e=E(M);Q=g(_e,"SPAN",{class:!0});var Se=E(Q);G=j(Se,k),Se.forEach(m),H=S(_e),A=g(_e,"INPUT",{type:!0,name:!0,class:!0}),_e.forEach(m),be=S(p),I&&I.l(p),re=S(p),O&&O.l(p),p.forEach(m),this.h()},h(){var i;_(o,"class","text-xl font-bold"),_(s,"class","input-bordered grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] rounded-xl border px-6 py-2"),J(s,"border-error",((i=l[7].bookables)==null?void 0:i._errors)??!1),_(v,"class","label-text ml-2 font-bold"),le(d,ue),_(C,"class","label-text ml-2 font-bold"),le(L,fe),J(L,"border-error",l[7].end),_(Q,"class","label-text ml-2 font-bold"),le(A,ce),_(e,"method","POST"),_(e,"class","form-control mx-auto max-w-5xl gap-4")},m(i,p){K(i,e,p),q&&q.m(e,null),r(e,t),r(e,s),r(s,o),r(o,w),r(s,c);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(s,null);r(e,a),U&&U.m(e,null),r(e,f),r(e,n),r(n,v),r(v,B),r(n,b),r(n,d),d.autofocus&&d.focus(),Y(d,l[3]),r(e,P),r(e,T),r(T,C),r(C,ae),r(T,ne),r(T,L),L.autofocus&&L.focus(),Y(L,l[4]),r(e,se),r(e,M),r(M,Q),r(Q,G),r(M,H),r(M,A),A.autofocus&&A.focus(),Y(A,l[2].name),r(e,be),I&&I.m(e,null),r(e,re),O&&O.m(e,null),X=!0,pe||(De=[$(d,"input",l[20]),$(d,"change",l[13]),$(L,"input",l[21]),$(L,"change",l[14]),$(A,"input",l[22]),Ye(l[11].call(null,e))],pe=!0)},p(i,[p]){var z;if(i[1]==="review"?q?(q.p(i,p),p&2&&x(q,1)):(q=Ue(i),q.c(),x(q,1),q.m(e,t)):q&&(je(),oe(q,1,1,()=>{q=null}),Ge()),p&7){te=Pe(i[0].bookables);let y;for(y=0;y<te.length;y+=1){const Z=Le(i,te,y);N[y]?N[y].p(Z,p):(N[y]=Ce(Z),N[y].c(),N[y].m(s,null))}for(;y<N.length;y+=1)N[y].d(1);N.length=te.length}(!X||p&128)&&J(s,"border-error",((z=i[7].bookables)==null?void 0:z._errors)??!1),i[5]?U||(U=Ve(),U.c(),U.m(e,f)):U&&(U.d(1),U=null),le(d,ue=we(me,[{type:"datetime-local"},{name:"start"},{placeholder:"Start"},{class:"input input-bordered w-full"},p&256&&i[8].start,(!X||p&2&&V!==(V=i[1]==="review"))&&{disabled:V}])),p&8&&Y(d,i[3]),le(L,fe=we(he,[{type:"datetime-local"},{name:"end"},{placeholder:"End"},{class:"input input-bordered w-full"},p&256&&i[8].end,(!X||p&2&&ee!==(ee=i[1]==="review"))&&{disabled:ee}])),p&16&&Y(L,i[4]),J(L,"border-error",i[7].end),le(A,ce=we(ge,[{type:"text"},{name:"name"},{class:"input input-bordered w-full"},p&256&&i[8].name,(!X||p&2&&ie!==(ie=i[1]==="review"))&&{disabled:ie}])),p&4&&A.value!==i[2].name&&Y(A,i[2].name),i[1]==="review"&&i[6]?I?I.p(i,p):(I=ze(i),I.c(),I.m(e,re)):I&&(I.d(1),I=null),i[1]!=="review"?O?O.p(i,p):(O=Fe(i),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i(i){X||(x(q),X=!0)},o(i){oe(q),X=!1},d(i){i&&m(e),q&&q.d(),Me(N,i),U&&U.d(),I&&I.d(),O&&O.d(),pe=!1,Qe(De)}}}const mt="99854837-fdb9-4dba-85fc-86a5c514253c";function ht(l,e,t){let s,o,u,w,c,{data:a}=e;const{form:f,errors:n,enhance:v,constraints:D}=nt(a.form);Ee(l,f,k=>t(2,u=k)),Ee(l,n,k=>t(7,w=k)),Ee(l,D,k=>t(8,c=k));let{mode:B="create"}=e,b=u.start,d=u.end;function V(){if(b&&d){const k=new Date(b),G=new Date(d),H=new Date(k.getTime()-k.getTimezoneOffset()*6e4),A=new Date(G.getTime()-G.getTimezoneOffset()*6e4);H>=A&&(A.setTime(H.getTime()+36e5),t(4,d=A.toISOString().slice(0,16)),Ne(f,u.end=d,u))}}function P(){if(b&&d){const k=new Date(b),G=new Date(d),H=new Date(k.getTime()-k.getTimezoneOffset()*6e4),A=new Date(G.getTime()-G.getTimezoneOffset()*6e4);A<=H&&(H.setTime(A.getTime()-36e5),t(3,b=H.toISOString().slice(0,16)),Ne(f,u.start=b,u))}}const T=Xe("$paraglide-adapter-sveltekit:context");function C(k,G){return typeof k!="string"||!T?k:T.translateHref(k,G)}const W=[[]];function ae(k){s=k,t(6,s),t(0,a)}function ne(k){l.$$.not_equal(a.allBookingRequests,k)&&(a.allBookingRequests=k,t(0,a))}function L(){u.bookables=Ze(W[0],this.__value,this.checked),f.set(u)}function ee(){b=this.value,t(3,b)}function se(){d=this.value,t(4,d)}function M(){u.name=this.value,f.set(u)}function Q(){s.id=this.value,t(6,s),t(0,a)}return l.$$set=k=>{"data"in k&&t(0,a=k.data),"mode"in k&&t(1,B=k.mode)},l.$$.update=()=>{l.$$.dirty&1&&t(6,s=a.booking),l.$$.dirty&4&&t(5,o=u.bookables.includes(mt))},[a,B,u,b,d,o,s,w,c,f,n,v,D,V,P,C,ae,ne,L,W,ee,se,M,Q]}class qt extends $e{constructor(e){super(),xe(this,e,ht,pt,He,{data:0,mode:1})}}export{qt as B};
