import{s as X,c as H,e as k,j as O,a as y,b as v,k as P,d as h,f as b,i as w,q as T,u as R,g as B,h as D,l as Y,C as I,G as Z,E as V}from"./scheduler.DK5noefF.js";import{S as x,i as $,t as m,g as F,b as p,e as A}from"./index.OECaLbXR.js";import{e as M,u as ee,o as te}from"./each.Dbd03sI1.js";import{p as le}from"./stores.BdoTh84D.js";import{t as z}from"./bundle-mjs.BkWO730n.js";function C(r,t,i){const s=r.slice();return s[16]=t[i],s}const ne=r=>({option:r&4}),N=r=>({option:r[16]});function U(r){let t=[],i=new Map,s,f,u,_=M(r[2]);const o=e=>e[4](e[16]);for(let e=0;e<_.length;e+=1){let n=C(r,_,e),c=o(n);i.set(c,t[e]=q(c,n))}let l=r[2].length===0&&G();return{c(){for(let e=0;e<t.length;e+=1)t[e].c();s=O(),l&&l.c(),f=I()},l(e){for(let n=0;n<t.length;n+=1)t[n].l(e);s=P(e),l&&l.l(e),f=I()},m(e,n){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,n);w(e,s,n),l&&l.m(e,n),w(e,f,n),u=!0},p(e,n){n&526&&(_=M(e[2]),F(),t=ee(t,n,o,1,e,_,i,s.parentNode,te,q,s,C),A()),e[2].length===0?l||(l=G(),l.c(),l.m(f.parentNode,f)):l&&(l.d(1),l=null)},i(e){if(!u){for(let n=0;n<_.length;n+=1)m(t[n]);u=!0}},o(e){for(let n=0;n<t.length;n+=1)p(t[n]);u=!1},d(e){e&&(h(s),h(f));for(let n=0;n<t.length;n+=1)t[n].d(e);l&&l.d(e)}}}function q(r,t){let i,s,f,u,_;const o=t[10].entity,l=H(o,t,t[9],N);function e(){return t[11](t[16])}return{key:r,first:null,c(){i=k("li"),s=k("button"),l&&l.c(),this.h()},l(n){i=y(n,"LI",{});var c=v(i);s=y(c,"BUTTON",{type:!0,class:!0});var d=v(s);l&&l.l(d),d.forEach(h),c.forEach(h),this.h()},h(){b(s,"type","button"),b(s,"class","join-item w-full border-b border-b-base-content/10"),this.first=i},m(n,c){w(n,i,c),T(i,s),l&&l.m(s,null),f=!0,u||(_=Z(s,"click",e),u=!0)},p(n,c){t=n,l&&l.p&&(!f||c&516)&&R(l,o,t,t[9],f?D(o,t[9],c,ne):B(t[9]),N)},i(n){f||(m(l,n),f=!0)},o(n){p(l,n),f=!1},d(n){n&&h(i),l&&l.d(n),u=!1,_()}}}function G(r){let t,i='<button type="button" disabled="" class="disabled">Inga resultat hittades</button>';return{c(){t=k("li"),t.innerHTML=i,this.h()},l(s){t=y(s,"LI",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-lherye"&&(t.innerHTML=i),this.h()},h(){b(t,"class","w-full border-b border-b-base-content/10")},m(s,f){w(s,t,f)},d(s){s&&h(t)}}}function se(r){let t,i,s,f,u;const _=r[10].default,o=H(_,r,r[9],null);let l=r[2]!=null&&U(r);return{c(){t=k("div"),o&&o.c(),i=O(),s=k("ul"),l&&l.c(),this.h()},l(e){t=y(e,"DIV",{class:!0});var n=v(t);o&&o.l(n),i=P(n),s=y(n,"UL",{class:!0});var c=v(s);l&&l.l(c),c.forEach(h),n.forEach(h),this.h()},h(){b(s,"class","menu-compact menu dropdown-content join join-vertical z-10 flex max-h-80 min-w-[20rem] flex-col flex-nowrap overflow-visible overflow-y-auto rounded-md bg-base-100 p-0 shadow shadow-black"),b(t,"class",f=z("dropdown overflow-visible",r[0]))},m(e,n){w(e,t,n),o&&o.m(t,null),T(t,i),T(t,s),l&&l.m(s,null),u=!0},p(e,[n]){o&&o.p&&(!u||n&512)&&R(o,_,e,e[9],u?D(_,e[9],n,null):B(e[9]),null),e[2]!=null?l?(l.p(e,n),n&4&&m(l,1)):(l=U(e),l.c(),m(l,1),l.m(s,null)):l&&(F(),p(l,1,1,()=>{l=null}),A()),(!u||n&1&&f!==(f=z("dropdown overflow-visible",e[0])))&&b(t,"class",f)},i(e){u||(m(o,e),m(l),u=!0)},o(e){p(o,e),p(l),u=!1},d(e){e&&h(t),o&&o.d(e),l&&l.d()}}}function ie(r,t,i){let s;Y(r,le,a=>i(13,s=a));let{$$slots:f={},$$scope:u}=t,{class:_=""}=t,{endpoint:o}=t,{isSearching:l=!1}=t,{onSelect:e=void 0}=t;const n=a=>{if(d&&clearTimeout(d),a.length<3){g();return}i(5,l=!0),d=setTimeout(J(a),300)};let{year:c=void 0}=t,d,S=null;const J=a=>async()=>{if(!a){g();return}const E=new URL(s.url.origin+o);E.searchParams.append("search",a),c&&E.searchParams.append("year",c.toString());const W=await fetch(E,{method:"GET"}).then(j=>{if(!j.ok){L();return}return j.json()}).catch(()=>L());i(2,S=W||[]),i(5,l=!1)},L=()=>{console.error("Failed to fetch entities"),g()},g=()=>{i(2,S=null),i(5,l=!1)},K=a=>a.id,Q=a=>{e==null||e(a),g()};return r.$$set=a=>{"class"in a&&i(0,_=a.class),"endpoint"in a&&i(6,o=a.endpoint),"isSearching"in a&&i(5,l=a.isSearching),"onSelect"in a&&i(1,e=a.onSelect),"year"in a&&i(8,c=a.year),"$$scope"in a&&i(9,u=a.$$scope)},[_,e,S,g,K,l,o,n,c,u,f,Q]}class ue extends x{constructor(t){super(),$(this,t,ie,se,X,{class:0,endpoint:6,isSearching:5,onSelect:1,handleSearch:7,year:8})}get handleSearch(){return this.$$.ctx[7]}}export{ue as E};
