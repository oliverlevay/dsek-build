import{s as C,e as _,j as V,a as h,b,k as j,d as f,f as u,i as k,q as m,n as N,t as E,o as D,p as v}from"./scheduler.DK5noefF.js";import{S as B,i as z}from"./index.OECaLbXR.js";import{d as p}from"./dayjs.min.B27XEuZS.js";import{aK as R,aL as M,aM as T,aN as W,aO as w}from"./messages.DZzIl59o.js";import{t as S}from"./bundle-mjs.BkWO730n.js";function G(l){let e,s,r=T()+"",n;return{c(){e=_("div"),s=_("span"),n=E(r),this.h()},l(i){e=h(i,"DIV",{class:!0});var t=b(e);s=h(t,"SPAN",{class:!0}),b(s).forEach(f),n=D(t,r),t.forEach(f),this.h()},h(){u(s,"class","i-mdi-hourglass mr-1"),u(e,"class","badge badge-info")},m(i,t){k(i,e,t),m(e,s),m(e,n)},d(i){i&&f(e)}}}function K(l){let e,s,r=W()+"",n;return{c(){e=_("div"),s=_("span"),n=E(r),this.h()},l(i){e=h(i,"DIV",{class:!0});var t=b(e);s=h(t,"SPAN",{class:!0}),b(s).forEach(f),n=D(t,r),t.forEach(f),this.h()},h(){u(s,"class","i-mdi-denied mr-1"),u(e,"class","badge badge-error")},m(i,t){k(i,e,t),m(e,s),m(e,n)},d(i){i&&f(e)}}}function L(l){let e,s,r=w()+"",n;return{c(){e=_("div"),s=_("span"),n=E(r),this.h()},l(i){e=h(i,"DIV",{class:!0});var t=b(e);s=h(t,"SPAN",{class:!0}),b(s).forEach(f),n=D(t,r),t.forEach(f),this.h()},h(){u(s,"class","i-mdi-check-circle mr-1"),u(e,"class","badge badge-success")},m(i,t){k(i,e,t),m(e,s),m(e,n)},d(i){i&&f(e)}}}function A(l){let e,s,r,n=M()+"",i,t;return{c(){e=_("div"),s=_("div"),r=_("span"),i=E(n),this.h()},l(a){e=h(a,"DIV",{class:!0});var o=b(e);s=h(o,"DIV",{class:!0,"data-tip":!0});var c=b(s);r=h(c,"SPAN",{class:!0}),b(r).forEach(f),i=D(c,n),c.forEach(f),o.forEach(f),this.h()},h(){u(r,"class","i-mdi-info mr-1"),u(s,"class","tooltip flex items-center"),u(s,"data-tip",t=R({event:`${l[3].event}`,bookables:`${l[5]}`})),u(e,"class","badge"),v(e,"badge-error",l[2]),v(e,"badge-secondary",l[4])},m(a,o){k(a,e,o),m(e,s),m(s,r),m(s,i)},p(a,o){o&40&&t!==(t=R({event:`${a[3].event}`,bookables:`${a[5]}`}))&&u(s,"data-tip",t),o&4&&v(e,"badge-error",a[2]),o&16&&v(e,"badge-secondary",a[4])},d(a){a&&f(e)}}}function O(l){let e,s,r;function n(o,c){if(o[0].status==="ACCEPTED")return L;if(o[0].status==="DENIED")return K;if(o[0].status==="PENDING")return G}let i=n(l),t=i&&i(l),a=l[3]&&A(l);return{c(){e=_("div"),t&&t.c(),s=V(),a&&a.c(),this.h()},l(o){e=h(o,"DIV",{class:!0});var c=b(e);t&&t.l(c),s=j(c),a&&a.l(c),c.forEach(f),this.h()},h(){u(e,"class",r=S("flex gap-1",l[1]))},m(o,c){k(o,e,c),t&&t.m(e,null),m(e,s),a&&a.m(e,null)},p(o,[c]){i!==(i=n(o))&&(t&&t.d(1),t=i&&i(o),t&&(t.c(),t.m(e,s))),o[3]?a?a.p(o,c):(a=A(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null),c&2&&r!==(r=S("flex gap-1",o[1]))&&u(e,"class",r)},i:N,o:N,d(o){o&&f(e),t&&t.d(),a&&a.d()}}}function F(l,e,s){let r,n,i,t,a,o,c,{bookingRequest:g}=e,{bookingRequests:y}=e,{class:I=void 0}=e;return l.$$set=d=>{"bookingRequest"in d&&s(0,g=d.bookingRequest),"bookingRequests"in d&&s(6,y=d.bookingRequests),"class"in d&&s(1,I=d.class)},l.$$.update=()=>{l.$$.dirty&65&&s(9,r=y.filter(d=>d.id!==g.id&&d.status!=="DENIED")),l.$$.dirty&1&&s(7,n=p(g.start)),l.$$.dirty&1&&s(8,i=p(g.end)),l.$$.dirty&897&&s(3,t=r.find(d=>p(d.start).isBefore(i)&&p(d.end).isAfter(n)&&d.bookables.some(q=>g.bookables.map(P=>P.id).includes(q.id)))),l.$$.dirty&9&&s(5,a=t==null?void 0:t.bookables.filter(d=>g.bookables.map(q=>q.id).includes(d.id)).map(d=>d.name).join(", ")),l.$$.dirty&9&&s(2,o=g.status!=="DENIED"&&(t==null?void 0:t.status)==="ACCEPTED"),l.$$.dirty&12&&s(4,c=t&&!o)},[g,I,o,t,c,a,y,n,i,r]}class Y extends B{constructor(e){super(),z(this,e,F,O,C,{bookingRequest:0,bookingRequests:6,class:1})}}export{Y as S};
