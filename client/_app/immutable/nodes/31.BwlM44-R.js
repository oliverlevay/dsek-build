import{s as it,e as f,j as A,a as p,b as h,k as N,E as gt,d as u,f as b,i as w,q as a,Q as ut,n as We,l as de,m as dt,t as F,o as L,S as te,D as Xe,F as he,P as be,G as Ze,R as Et,w as yt}from"../chunks/scheduler.DK5noefF.js";import{S as ct,i as ft,c as pt,a as mt,m as _t,t as ce,e as Tt,b as ve,d as ht,g as It}from"../chunks/index.OECaLbXR.js";import{e as xe}from"../chunks/each.Dbd03sI1.js";import{g as et}from"../chunks/spread.CgU5AtxT.js";import{s as bt}from"../chunks/superForms.37TMp2uc.js";import{p as At}from"../chunks/stores.BdoTh84D.js";import{dr as tt,ds as Nt,dt as jt,du as Pt,H as at,dv as St}from"../chunks/messages.DZzIl59o.js";import{S as Dt}from"../chunks/SetPageTitle.Cf9LBAU4.js";function lt(l){let e,r=l[1].id+"",i;return{c(){e=f("span"),i=F(r),this.h()},l(s){e=p(s,"SPAN",{class:!0});var n=h(e);i=L(n,r),n.forEach(u),this.h()},h(){b(e,"class","text-error")},m(s,n){w(s,e,n),a(e,i)},p(s,n){n&2&&r!==(r=s[1].id+"")&&te(i,r)},d(s){s&&u(e)}}}function kt(l){let e,r,i,s,n,E="Remove",y,v,d=l[1].id&&lt(l);return{c(){e=f("form"),r=f("input"),i=A(),d&&d.c(),s=A(),n=f("button"),n.textContent=E,this.h()},l(o){e=p(o,"FORM",{method:!0,action:!0});var _=h(e);r=p(_,"INPUT",{type:!0,name:!0}),i=N(_),d&&d.l(_),s=N(_),n=p(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),gt(n)!=="svelte-e81y8f"&&(n.textContent=E),_.forEach(u),this.h()},h(){b(r,"type","hidden"),b(r,"name","id"),r.value=l[0],b(n,"type","submit"),b(n,"class","btn btn-xs px-8"),b(e,"method","POST"),b(e,"action",l[4]("?/delete",void 0))},m(o,_){w(o,e,_),a(e,r),a(e,i),d&&d.m(e,null),a(e,s),a(e,n),y||(v=ut(l[3].call(null,e)),y=!0)},p(o,[_]){_&1&&(r.value=o[0]),o[1].id?d?d.p(o,_):(d=lt(o),d.c(),d.m(e,s)):d&&(d.d(1),d=null)},i:We,o:We,d(o){o&&u(e),d&&d.d(),y=!1,v()}}}function Ft(l,e,r){let i,{data:s}=e,{policyId:n}=e;const{errors:E,enhance:y}=bt(s,{id:n});de(l,E,o=>r(1,i=o));const v=dt("$paraglide-adapter-sveltekit:context");function d(o,_){return typeof o!="string"||!v?o:v.translateHref(o,_)}return l.$$set=o=>{"data"in o&&r(5,s=o.data),"policyId"in o&&r(0,n=o.policyId)},[n,i,E,y,d,s]}class Lt extends ct{constructor(e){super(),ft(this,e,Ft,kt,it,{data:5,policyId:0})}}function rt(l,e,r){const i=l.slice();return i[15]=e[r],i}function st(l){var H,K,oe;let e,r,i=(l[15].role??"")+"",s,n,E,y=l[15].studentId?`${(H=l[15].member)==null?void 0:H.firstName} ${(K=l[15].member)==null?void 0:K.lastName}`:"",v,d,o,_=((oe=l[15].createdAt)==null?void 0:oe.toLocaleString("sv"))+"",Q,q,O,S,J,c;return S=new Lt({props:{data:l[0].deleteForm,policyId:l[15].id}}),{c(){e=f("tr"),r=f("td"),s=F(i),n=A(),E=f("td"),v=F(y),d=A(),o=f("td"),Q=F(_),q=A(),O=f("td"),pt(S.$$.fragment),J=A(),this.h()},l(T){e=p(T,"TR",{});var I=h(e);r=p(I,"TD",{});var C=h(r);s=L(C,i),C.forEach(u),n=N(I),E=p(I,"TD",{});var V=h(E);v=L(V,y),V.forEach(u),d=N(I),o=p(I,"TD",{});var B=h(o);Q=L(B,_),B.forEach(u),q=N(I),O=p(I,"TD",{class:!0});var z=h(O);mt(S.$$.fragment,z),z.forEach(u),J=N(I),I.forEach(u),this.h()},h(){b(O,"class","text-right")},m(T,I){w(T,e,I),a(e,r),a(r,s),a(e,n),a(e,E),a(E,v),a(e,d),a(e,o),a(o,Q),a(e,q),a(e,O),_t(S,O,null),a(e,J),c=!0},p(T,I){var V,B,z;(!c||I&2)&&i!==(i=(T[15].role??"")+"")&&te(s,i),(!c||I&2)&&y!==(y=T[15].studentId?`${(V=T[15].member)==null?void 0:V.firstName} ${(B=T[15].member)==null?void 0:B.lastName}`:"")&&te(v,y),(!c||I&2)&&_!==(_=((z=T[15].createdAt)==null?void 0:z.toLocaleString("sv"))+"")&&te(Q,_);const C={};I&1&&(C.data=T[0].deleteForm),I&2&&(C.policyId=T[15].id),S.$set(C)},i(T){c||(ce(S.$$.fragment,T),c=!0)},o(T){ve(S.$$.fragment,T),c=!1},d(T){T&&u(e),ht(S)}}}function nt(l){let e,r=l[5].role+"",i;return{c(){e=f("span"),i=F(r),this.h()},l(s){e=p(s,"SPAN",{class:!0});var n=h(e);i=L(n,r),n.forEach(u),this.h()},h(){b(e,"class","text-error")},m(s,n){w(s,e,n),a(e,i)},p(s,n){n&32&&r!==(r=s[5].role+"")&&te(i,r)},d(s){s&&u(e)}}}function ot(l){let e,r=l[5].studentId+"",i;return{c(){e=f("span"),i=F(r),this.h()},l(s){e=p(s,"SPAN",{class:!0});var n=h(e);i=L(n,r),n.forEach(u),this.h()},h(){b(e,"class","text-error")},m(s,n){w(s,e,n),a(e,i)},p(s,n){n&32&&r!==(r=s[5].studentId+"")&&te(i,r)},d(s){s&&u(e)}}}function Ht(l){let e,r,i,s=l[2].params.apiName+"",n,E,y,v,d,o,_,Q=tt()+"",q,O,S,J=Nt()+"",c,H,K,oe=jt()+"",T,I,C,V,B,z,Y,ae,Be=Pt()+"",ge,Ee,P,M,le,Ce=tt()+"",ye,Te,R,Ie,Z,Re=at()+"",Ae,Ne,fe,$,re,Ue=St()+"",je,Pe,U,Se,x,we=at()+"",De,ke,ie,Fe,qe;e=new Dt({props:{title:l[2].params.apiName}});let ee=xe(l[1]),g=[];for(let t=0;t<ee.length;t+=1)g[t]=st(rt(l,ee,t));const vt=t=>ve(g[t],1,1,()=>{g[t]=null});let Le=[{type:"text"},{name:"role"},{placeholder:"Type here"},{class:"input join-item input-bordered hover:border-base-content md:flex-1"},l[3].role],pe={};for(let t=0;t<Le.length;t+=1)pe=Xe(pe,Le[t]);let D=l[5].role&&nt(l),He=[{type:"text"},{name:"studentId"},{placeholder:"Type here"},{class:"input join-item input-bordered hover:border-base-content md:flex-1"},l[3].studentId],me={};for(let t=0;t<He.length;t+=1)me=Xe(me,He[t]);let k=l[5].studentId&&ot(l);return{c(){pt(e.$$.fragment),r=A(),i=f("h1"),n=F(s),E=A(),y=f("div"),v=f("table"),d=f("thead"),o=f("tr"),_=f("th"),q=F(Q),O=A(),S=f("th"),c=F(J),H=A(),K=f("th"),T=F(oe),I=A(),C=f("th"),V=A(),B=f("tbody");for(let t=0;t<g.length;t+=1)g[t].c();z=A(),Y=f("section"),ae=f("h2"),ge=F(Be),Ee=A(),P=f("form"),M=f("label"),le=f("span"),ye=F(Ce),Te=A(),R=f("input"),Ie=A(),Z=f("button"),Ae=F(Re),Ne=A(),D&&D.c(),fe=A(),$=f("label"),re=f("span"),je=F(Ue),Pe=A(),U=f("input"),Se=A(),x=f("button"),De=F(we),ke=A(),k&&k.c(),this.h()},l(t){mt(e.$$.fragment,t),r=N(t),i=p(t,"H1",{class:!0});var m=h(i);n=L(m,s),m.forEach(u),E=N(t),y=p(t,"DIV",{class:!0});var G=h(y);v=p(G,"TABLE",{class:!0});var j=h(v);d=p(j,"THEAD",{});var ue=h(d);o=p(ue,"TR",{class:!0});var W=h(o);_=p(W,"TH",{});var ze=h(_);q=L(ze,Q),ze.forEach(u),O=N(W),S=p(W,"TH",{});var Me=h(S);c=L(Me,J),Me.forEach(u),H=N(W),K=p(W,"TH",{});var $e=h(K);T=L($e,oe),$e.forEach(u),I=N(W),C=p(W,"TH",{}),h(C).forEach(u),W.forEach(u),ue.forEach(u),V=N(j),B=p(j,"TBODY",{});var Ge=h(B);for(let Oe=0;Oe<g.length;Oe+=1)g[Oe].l(Ge);Ge.forEach(u),j.forEach(u),G.forEach(u),z=N(t),Y=p(t,"SECTION",{class:!0});var _e=h(Y);ae=p(_e,"H2",{class:!0});var Qe=h(ae);ge=L(Qe,Be),Qe.forEach(u),Ee=N(_e),P=p(_e,"FORM",{class:!0,method:!0,action:!0});var X=h(P);M=p(X,"LABEL",{class:!0});var se=h(M);le=p(se,"SPAN",{class:!0});var Ve=h(le);ye=L(Ve,Ce),Ve.forEach(u),Te=N(se),R=p(se,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),Ie=N(se),Z=p(se,"BUTTON",{type:!0,class:!0});var Ye=h(Z);Ae=L(Ye,Re),Ye.forEach(u),se.forEach(u),Ne=N(X),D&&D.l(X),fe=N(X),$=p(X,"LABEL",{class:!0});var ne=h($);re=p(ne,"SPAN",{class:!0});var Je=h(re);je=L(Je,Ue),Je.forEach(u),Pe=N(ne),U=p(ne,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),Se=N(ne),x=p(ne,"BUTTON",{type:!0,class:!0});var Ke=h(x);De=L(Ke,we),Ke.forEach(u),ne.forEach(u),ke=N(X),k&&k.l(X),X.forEach(u),_e.forEach(u),this.h()},h(){b(i,"class","mb-4 text-2xl font-semibold"),b(o,"class","bg-base-200"),b(v,"class","table"),b(y,"class","overflow-x-auto"),b(ae,"class","text-xl font-bold"),b(le,"class","label join-item bg-base-200 px-4"),he(R,pe),b(Z,"type","submit"),b(Z,"class","btn btn-primary join-item"),b(M,"class","join join-vertical md:join-horizontal"),b(re,"class","label join-item bg-base-200 px-4"),he(U,me),b(x,"type","submit"),b(x,"class","btn btn-primary join-item"),b($,"class","join join-vertical md:join-horizontal"),b(P,"class","form-control gap-4"),b(P,"method","POST"),b(P,"action",l[10]("?/create",void 0)),b(Y,"class","my-4 space-y-4")},m(t,m){_t(e,t,m),w(t,r,m),w(t,i,m),a(i,n),w(t,E,m),w(t,y,m),a(y,v),a(v,d),a(d,o),a(o,_),a(_,q),a(o,O),a(o,S),a(S,c),a(o,H),a(o,K),a(K,T),a(o,I),a(o,C),a(v,V),a(v,B);for(let G=0;G<g.length;G+=1)g[G]&&g[G].m(B,null);w(t,z,m),w(t,Y,m),a(Y,ae),a(ae,ge),a(Y,Ee),a(Y,P),a(P,M),a(M,le),a(le,ye),a(M,Te),a(M,R),R.autofocus&&R.focus(),be(R,l[4].role),a(M,Ie),a(M,Z),a(Z,Ae),a(P,Ne),D&&D.m(P,null),a(P,fe),a(P,$),a($,re),a(re,je),a($,Pe),a($,U),U.autofocus&&U.focus(),be(U,l[4].studentId),a($,Se),a($,x),a(x,De),a(P,ke),k&&k.m(P,null),ie=!0,Fe||(qe=[Ze(R,"input",l[11]),Ze(U,"input",l[12]),ut(l[9].call(null,P))],Fe=!0)},p(t,[m]){const G={};if(m&4&&(G.title=t[2].params.apiName),e.$set(G),(!ie||m&4)&&s!==(s=t[2].params.apiName+"")&&te(n,s),m&3){ee=xe(t[1]);let j;for(j=0;j<ee.length;j+=1){const ue=rt(t,ee,j);g[j]?(g[j].p(ue,m),ce(g[j],1)):(g[j]=st(ue),g[j].c(),ce(g[j],1),g[j].m(B,null))}for(It(),j=ee.length;j<g.length;j+=1)vt(j);Tt()}he(R,pe=et(Le,[{type:"text"},{name:"role"},{placeholder:"Type here"},{class:"input join-item input-bordered hover:border-base-content md:flex-1"},m&8&&t[3].role])),m&16&&R.value!==t[4].role&&be(R,t[4].role),t[5].role?D?D.p(t,m):(D=nt(t),D.c(),D.m(P,fe)):D&&(D.d(1),D=null),he(U,me=et(He,[{type:"text"},{name:"studentId"},{placeholder:"Type here"},{class:"input join-item input-bordered hover:border-base-content md:flex-1"},m&8&&t[3].studentId])),m&16&&U.value!==t[4].studentId&&be(U,t[4].studentId),t[5].studentId?k?k.p(t,m):(k=ot(t),k.c(),k.m(P,null)):k&&(k.d(1),k=null)},i(t){if(!ie){ce(e.$$.fragment,t);for(let m=0;m<ee.length;m+=1)ce(g[m]);ie=!0}},o(t){ve(e.$$.fragment,t),g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)ve(g[m]);ie=!1},d(t){t&&(u(r),u(i),u(E),u(y),u(z),u(Y)),ht(e,t),Et(g,t),D&&D.d(),k&&k.d(),Fe=!1,yt(qe)}}}function Ot(l,e,r){let i,s,n,E,y;de(l,At,c=>r(2,s=c));let{data:v}=e;const{form:d,errors:o,constraints:_,enhance:Q}=bt(v.createForm,{resetForm:!0});de(l,d,c=>r(4,E=c)),de(l,o,c=>r(5,y=c)),de(l,_,c=>r(3,n=c));const q=dt("$paraglide-adapter-sveltekit:context");function O(c,H){return typeof c!="string"||!q?c:q.translateHref(c,H)}function S(){E.role=this.value,d.set(E)}function J(){E.studentId=this.value,d.set(E)}return l.$$set=c=>{"data"in c&&r(0,v=c.data)},l.$$.update=()=>{l.$$.dirty&1&&r(1,i=v.policies.sort((c,H)=>c.role&&H.role?c.role.localeCompare(H.role,"sv"):c.role&&!H.role?-1:!c.role&&H.role?1:c.studentId.localeCompare(H.studentId,"sv")))},[v,i,s,n,E,y,d,o,_,Q,O,S,J]}class $t extends ct{constructor(e){super(),ft(this,e,Ot,Ht,it,{data:0})}}export{$t as component};
