import{s as nt,r as Le,j as v,e as u,t as V,k as E,a as d,b as c,d as l,o as F,f as i,i as X,q as a,Y as Ue,m as rt,E as it,p as Me,P as ye,G as ze,Q as ft,S as Ye,R as ut,w as dt,W as _t,C as Ge,X as mt}from"../chunks/scheduler.DK5noefF.js";import{S as ct,i as ht,f as Ve,c as Se,a as we,m as Ce,e as ot,t as _e,b as ge,d as Ie,g as lt}from"../chunks/index.OECaLbXR.js";import{e as Be,u as bt,o as pt}from"../chunks/each.Dbd03sI1.js";import{d as Pe}from"../chunks/dayjs.min.B27XEuZS.js";import{S as gt}from"../chunks/StatusComponent.CudnW4VH.js";import{e as kt}from"../chunks/forms.DDTWXYJD.js";import{g as Je}from"../chunks/member.Deknk2Gk.js";import{M as vt}from"../chunks/MemberAvatar.DsenHHaP.js";import{r as Et,az as $t,aA as st,aT as Tt,aU as Dt,aJ as Rt,aZ as Qe,aV as qt,aD as Ht,aE as At,aF as Yt,aG as Nt,aH as Mt,a_ as Pt,aI as St}from"../chunks/messages.DZzIl59o.js";import{S as wt}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{C as Ct}from"../chunks/ConfirmDialog.D50Qb-7A.js";function We(_,e,t){const o=_.slice();return o[11]=e[t],o[12]=e,o[13]=t,o}function Xe(_,e,t){const o=_.slice();return o[14]=e[t],o}function Ze(_){let e,t=_[14]+"",o;return{c(){e=u("p"),o=V(t),this.h()},l(n){e=d(n,"P",{class:!0});var b=c(e);o=F(b,t),b.forEach(l),this.h()},h(){i(e,"class","min-w-max")},m(n,b){X(n,e,b),a(e,o)},p(n,b){b&1&&t!==(t=n[14]+"")&&Ye(o,t)},d(n){n&&l(e)}}}function Ke(_){let e,t,o,n=Je(_[11].booker,{hideNickname:!0})+"",b,A,g;return e=new vt({props:{member:_[11].booker,class:"size-5 flex-shrink-0"}}),{c(){Se(e.$$.fragment),t=v(),o=u("a"),b=V(n),this.h()},l(h){we(e.$$.fragment,h),t=E(h),o=d(h,"A",{href:!0,class:!0});var k=c(o);b=F(k,n),k.forEach(l),this.h()},h(){i(o,"href",A=_[3](`/members/${_[11].booker.studentId}`,void 0)),i(o,"class","link-hover link")},m(h,k){Ce(e,h,k),X(h,t,k),X(h,o,k),a(o,b),g=!0},p(h,k){const q={};k&1&&(q.member=h[11].booker),e.$set(q),(!g||k&1)&&n!==(n=Je(h[11].booker,{hideNickname:!0})+"")&&Ye(b,n),(!g||k&1&&A!==(A=h[3](`/members/${h[11].booker.studentId}`,void 0)))&&i(o,"href",A)},i(h){g||(_e(e.$$.fragment,h),g=!0)},o(h){ge(e.$$.fragment,h),g=!1},d(h){h&&(l(t),l(o)),Ie(e,h)}}}function xe(_,e){let t,o,n,b,A=Pe(e[11].start).format("YYYY-MM-DD HH:mm")+"",g,h,k,q=Pe(e[11].end).format("YYYY-MM-DD HH:mm")+"",y,Z,p,H,S=e[11].event+"",z,T,K,se,J,me,Q,O,ce,he,x,ne,$,C,ee,L,te,be,w,re,pe,ie,ae,G,oe,fe,ue,B,le='<span class="i-mdi-delete"></span>',Y,ke,M,U,ve,W=Be(e[11].bookables.map(tt)),D=[];for(let r=0;r<W.length;r+=1)D[r]=Ze(Xe(e,W,r));let R=e[11].booker&&Ke(e);function je(r){e[4](r,e[11],e[12],e[13])}function Ne(r){e[5](r)}let Ee={class:"flex-col"};e[11]!==void 0&&(Ee.bookingRequest=e[11]),e[0].bookingRequests!==void 0&&(Ee.bookingRequests=e[0].bookingRequests),O=new gt({props:Ee}),Le.push(()=>Ve(O,"bookingRequest",je)),Le.push(()=>Ve(O,"bookingRequests",Ne));function s(){e[6].call(C,e[12],e[13])}function m(){return e[7](e[11])}return{key:_,first:null,c(){t=u("tr"),o=u("td");for(let r=0;r<D.length;r+=1)D[r].c();n=v(),b=u("td"),g=V(A),h=v(),k=u("td"),y=V(q),Z=v(),p=u("td"),H=u("a"),z=V(S),K=v(),se=u("td"),J=u("div"),R&&R.c(),me=v(),Q=u("td"),Se(O.$$.fragment),x=v(),ne=u("td"),$=u("form"),C=u("input"),ee=v(),L=u("button"),te=u("span"),be=v(),w=u("button"),re=u("span"),pe=v(),ie=u("hr"),ae=v(),G=u("a"),oe=u("span"),ue=v(),B=u("button"),B.innerHTML=le,ke=v(),this.h()},l(r){t=d(r,"TR",{});var f=c(t);o=d(f,"TD",{});var j=c(o);for(let Oe=0;Oe<D.length;Oe+=1)D[Oe].l(j);j.forEach(l),n=E(f),b=d(f,"TD",{});var N=c(b);g=F(N,A),N.forEach(l),h=E(f),k=d(f,"TD",{});var de=c(k);y=F(de,q),de.forEach(l),Z=E(f),p=d(f,"TD",{});var P=c(p);H=d(P,"A",{href:!0,class:!0});var Te=c(H);z=F(Te,S),Te.forEach(l),P.forEach(l),K=E(f),se=d(f,"TD",{});var De=c(se);J=d(De,"DIV",{class:!0});var Re=c(J);R&&R.l(Re),Re.forEach(l),De.forEach(l),me=E(f),Q=d(f,"TD",{});var qe=c(Q);we(O.$$.fragment,qe),qe.forEach(l),x=E(f),ne=d(f,"TD",{});var He=c(ne);$=d(He,"FORM",{method:!0,class:!0,id:!0});var I=c($);C=d(I,"INPUT",{name:!0,type:!0}),ee=E(I),L=d(I,"BUTTON",{formaction:!0,class:!0,"aria-label":!0});var Ae=c(L);te=d(Ae,"SPAN",{class:!0}),c(te).forEach(l),Ae.forEach(l),be=E(I),w=d(I,"BUTTON",{formaction:!0,class:!0,"aria-label":!0});var $e=c(w);re=d($e,"SPAN",{class:!0}),c(re).forEach(l),$e.forEach(l),pe=E(I),ie=d(I,"HR",{class:!0}),ae=E(I),G=d(I,"A",{href:!0,class:!0,"aria-label":!0});var Fe=c(G);oe=d(Fe,"SPAN",{class:!0}),c(oe).forEach(l),Fe.forEach(l),ue=E(I),B=d(I,"BUTTON",{class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),it(B)!=="svelte-1ji5rm8"&&(B.innerHTML=le),I.forEach(l),He.forEach(l),ke=E(f),f.forEach(l),this.h()},h(){i(H,"href",T=e[3](`/booking/admin/${e[11].id}`,void 0)),i(H,"class","link-hover link"),i(J,"class","flex items-center gap-2"),C.hidden=!0,i(C,"name","id"),i(C,"type","text"),i(te,"class","i-mdi-check"),i(L,"formaction",e[3]("?/accept",void 0)),i(L,"class","btn btn-outline btn-xs"),i(L,"aria-label",Tt()),Me(L,"btn-disabled",e[11].status==="ACCEPTED"),i(re,"class","i-mdi-close"),i(w,"formaction",e[3]("?/reject",void 0)),i(w,"class","btn btn-outline btn-xs"),i(w,"aria-label",Dt()),Me(w,"btn-disabled",e[11].status==="DENIED"),i(ie,"class","mx-2"),i(oe,"class","i-mdi-edit"),i(G,"href",fe=e[3](`/booking/${e[11].id}/edit`,void 0)),i(G,"class","btn btn-outline btn-xs"),i(G,"aria-label",Rt()),i(B,"class","btn btn-outline btn-xs"),i(B,"type","button"),i(B,"aria-label",st()),i($,"method","POST"),i($,"class","flex gap-2"),i($,"id",Y=`form-${e[11].id}`),this.first=t},m(r,f){X(r,t,f),a(t,o);for(let j=0;j<D.length;j+=1)D[j]&&D[j].m(o,null);a(t,n),a(t,b),a(b,g),a(t,h),a(t,k),a(k,y),a(t,Z),a(t,p),a(p,H),a(H,z),a(t,K),a(t,se),a(se,J),R&&R.m(J,null),a(t,me),a(t,Q),Ce(O,Q,null),a(t,x),a(t,ne),a(ne,$),a($,C),ye(C,e[11].id),a($,ee),a($,L),a(L,te),a($,be),a($,w),a(w,re),a($,pe),a($,ie),a($,ae),a($,G),a(G,oe),a($,ue),a($,B),a(t,ke),M=!0,U||(ve=[ze(C,"input",s),ze(B,"click",m),ft(kt.call(null,$))],U=!0)},p(r,f){if(e=r,f&1){W=Be(e[11].bookables.map(tt));let N;for(N=0;N<W.length;N+=1){const de=Xe(e,W,N);D[N]?D[N].p(de,f):(D[N]=Ze(de),D[N].c(),D[N].m(o,null))}for(;N<D.length;N+=1)D[N].d(1);D.length=W.length}(!M||f&1)&&A!==(A=Pe(e[11].start).format("YYYY-MM-DD HH:mm")+"")&&Ye(g,A),(!M||f&1)&&q!==(q=Pe(e[11].end).format("YYYY-MM-DD HH:mm")+"")&&Ye(y,q),(!M||f&1)&&S!==(S=e[11].event+"")&&Ye(z,S),(!M||f&1&&T!==(T=e[3](`/booking/admin/${e[11].id}`,void 0)))&&i(H,"href",T),e[11].booker?R?(R.p(e,f),f&1&&_e(R,1)):(R=Ke(e),R.c(),_e(R,1),R.m(J,null)):R&&(lt(),ge(R,1,1,()=>{R=null}),ot());const j={};!ce&&f&1&&(ce=!0,j.bookingRequest=e[11],Ue(()=>ce=!1)),!he&&f&1&&(he=!0,j.bookingRequests=e[0].bookingRequests,Ue(()=>he=!1)),O.$set(j),f&1&&C.value!==e[11].id&&ye(C,e[11].id),(!M||f&1)&&Me(L,"btn-disabled",e[11].status==="ACCEPTED"),(!M||f&1)&&Me(w,"btn-disabled",e[11].status==="DENIED"),(!M||f&1&&fe!==(fe=e[3](`/booking/${e[11].id}/edit`,void 0)))&&i(G,"href",fe),(!M||f&1&&Y!==(Y=`form-${e[11].id}`))&&i($,"id",Y)},i(r){M||(_e(R),_e(O.$$.fragment,r),M=!0)},o(r){ge(R),ge(O.$$.fragment,r),M=!1},d(r){r&&l(t),ut(D,r),R&&R.d(),Ie(O),U=!1,dt(ve)}}}function et(_){var n,b,A;let e,t=Qe({name:((b=(n=_[2])==null?void 0:n.booker)==null?void 0:b.firstName)??"",bookables:(A=_[2])==null?void 0:A.bookables.map(at).join(", ")})+"",o;return{c(){e=new _t(!1),o=Ge(),this.h()},l(g){e=mt(g,!1),o=Ge(),this.h()},h(){e.a=o},m(g,h){e.m(t,g,h),X(g,o,h)},p(g,h){var k,q,y;h&4&&t!==(t=Qe({name:((q=(k=g[2])==null?void 0:k.booker)==null?void 0:q.firstName)??"",bookables:(y=g[2])==null?void 0:y.bookables.map(at).join(", ")})+"")&&e.p(t)},d(g){g&&(l(o),e.d())}}}function It(_){let e,t=_[2]&&et(_);return{c(){e=u("p"),t&&t.c(),this.h()},l(o){e=d(o,"P",{slot:!0});var n=c(e);t&&t.l(n),n.forEach(l),this.h()},h(){i(e,"slot","description")},m(o,n){X(o,e,n),t&&t.m(e,null)},p(o,n){o[2]?t?t.p(o,n):(t=et(o),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(o){o&&l(e),t&&t.d()}}}function Bt(_){var Ee;let e,t,o,n,b,A,g=qt()+"",h,k,q,y=Ht()+"",Z,p,H,S,z,T,K,se=At()+"",J,me,Q,O=Yt()+"",ce,he,x,ne=Nt()+"",$,C,ee,L=Mt()+"",te,be,w,re=Pt()+"",pe,ie,ae,G=St()+"",oe,fe,ue,B,le,Y=[],ke=new Map,M,U,ve,W;e=new wt({props:{title:Et()}});let D=Be(_[0].bookingRequests);const R=s=>s[11].id;for(let s=0;s<D.length;s+=1){let m=We(_,D,s),r=R(m);ke.set(r,Y[s]=xe(r,m))}function je(s){_[8](s)}let Ne={title:$t(),confirmText:st(),confirmClass:"btn-error",formTarget:"/booking?/delete",formData:{id:((Ee=_[2])==null?void 0:Ee.id)??""},$$slots:{description:[It]},$$scope:{ctx:_}};return _[1]!==void 0&&(Ne.modal=_[1]),U=new Ct({props:Ne}),Le.push(()=>Ve(U,"modal",je)),{c(){Se(e.$$.fragment),t=v(),o=u("div"),n=u("a"),b=u("span"),A=v(),h=V(g),k=v(),q=u("a"),Z=V(y),p=v(),H=u("div"),S=u("table"),z=u("thead"),T=u("tr"),K=u("th"),J=V(se),me=v(),Q=u("th"),ce=V(O),he=v(),x=u("th"),$=V(ne),C=v(),ee=u("th"),te=V(L),be=v(),w=u("th"),pe=V(re),ie=v(),ae=u("th"),oe=V(G),fe=v(),ue=u("th"),B=v(),le=u("tbody");for(let s=0;s<Y.length;s+=1)Y[s].c();M=v(),Se(U.$$.fragment),this.h()},l(s){we(e.$$.fragment,s),t=E(s),o=d(s,"DIV",{class:!0});var m=c(o);n=d(m,"A",{class:!0,href:!0});var r=c(n);b=d(r,"SPAN",{class:!0}),c(b).forEach(l),A=E(r),h=F(r,g),r.forEach(l),k=E(m),q=d(m,"A",{class:!0,href:!0});var f=c(q);Z=F(f,y),f.forEach(l),m.forEach(l),p=E(s),H=d(s,"DIV",{class:!0});var j=c(H);S=d(j,"TABLE",{class:!0});var N=c(S);z=d(N,"THEAD",{});var de=c(z);T=d(de,"TR",{class:!0});var P=c(T);K=d(P,"TH",{});var Te=c(K);J=F(Te,se),Te.forEach(l),me=E(P),Q=d(P,"TH",{});var De=c(Q);ce=F(De,O),De.forEach(l),he=E(P),x=d(P,"TH",{});var Re=c(x);$=F(Re,ne),Re.forEach(l),C=E(P),ee=d(P,"TH",{});var qe=c(ee);te=F(qe,L),qe.forEach(l),be=E(P),w=d(P,"TH",{});var He=c(w);pe=F(He,re),He.forEach(l),ie=E(P),ae=d(P,"TH",{});var I=c(ae);oe=F(I,G),I.forEach(l),fe=E(P),ue=d(P,"TH",{}),c(ue).forEach(l),P.forEach(l),de.forEach(l),B=E(N),le=d(N,"TBODY",{});var Ae=c(le);for(let $e=0;$e<Y.length;$e+=1)Y[$e].l(Ae);Ae.forEach(l),N.forEach(l),j.forEach(l),M=E(s),we(U.$$.fragment,s),this.h()},h(){i(b,"class","i-mdi-arrow-expand-left"),i(n,"class","btn"),i(n,"href",_[3]("/booking",void 0)),i(q,"class","btn"),i(q,"href",_[3]("/booking/create",void 0)),i(o,"class","mb-8 flex gap-4"),i(T,"class","bg-base-200"),i(S,"class","table"),i(H,"class","overflow-x-auto")},m(s,m){Ce(e,s,m),X(s,t,m),X(s,o,m),a(o,n),a(n,b),a(n,A),a(n,h),a(o,k),a(o,q),a(q,Z),X(s,p,m),X(s,H,m),a(H,S),a(S,z),a(z,T),a(T,K),a(K,J),a(T,me),a(T,Q),a(Q,ce),a(T,he),a(T,x),a(x,$),a(T,C),a(T,ee),a(ee,te),a(T,be),a(T,w),a(w,pe),a(T,ie),a(T,ae),a(ae,oe),a(T,fe),a(T,ue),a(S,B),a(S,le);for(let r=0;r<Y.length;r+=1)Y[r]&&Y[r].m(le,null);X(s,M,m),Ce(U,s,m),W=!0},p(s,[m]){var f;m&15&&(D=Be(s[0].bookingRequests),lt(),Y=bt(Y,m,R,1,s,D,ke,le,pt,xe,null,We),ot());const r={};m&4&&(r.formData={id:((f=s[2])==null?void 0:f.id)??""}),m&131076&&(r.$$scope={dirty:m,ctx:s}),!ve&&m&2&&(ve=!0,r.modal=s[1],Ue(()=>ve=!1)),U.$set(r)},i(s){if(!W){_e(e.$$.fragment,s);for(let m=0;m<D.length;m+=1)_e(Y[m]);_e(U.$$.fragment,s),W=!0}},o(s){ge(e.$$.fragment,s);for(let m=0;m<Y.length;m+=1)ge(Y[m]);ge(U.$$.fragment,s),W=!1},d(s){s&&(l(t),l(o),l(p),l(H),l(M)),Ie(e,s);for(let m=0;m<Y.length;m+=1)Y[m].d();Ie(U,s)}}}const tt=_=>_.name,at=({name:_})=>_;function jt(_,e,t){let{data:o}=e,n,b;const A=rt("$paraglide-adapter-sveltekit:context");function g(p,H){return typeof p!="string"||!A?p:A.translateHref(p,H)}function h(p,H,S,z){S[z]=p,t(0,o)}function k(p){_.$$.not_equal(o.bookingRequests,p)&&(o.bookingRequests=p,t(0,o))}function q(p,H){p[H].id=this.value,t(0,o)}const y=p=>{n==null||n.showModal(),t(2,b=p)};function Z(p){n=p,t(1,n)}return _.$$set=p=>{"data"in p&&t(0,o=p.data)},[o,n,b,g,h,k,q,y,Z]}class Xt extends ct{constructor(e){super(),ht(this,e,jt,Bt,nt,{data:0})}}export{Xt as component};
