import{s as Pe,r as he,j as H,e as p,t as G,k as Y,a as b,b as k,o as L,d as f,f as P,i as J,q as s,Y as ge,l as je,m as Ne,n as Ge,D as Le,G as Ue,S as ie,R as Ve,W as ze,C as De,X as Ke}from"../chunks/scheduler.DK5noefF.js";import{S as Fe,i as Je,f as pe,c as fe,a as ue,m as _e,b as Z,e as ye,t as x,d as ce,g as Ie}from"../chunks/index.OECaLbXR.js";import{e as de,u as We,o as Xe}from"../chunks/each.Dbd03sI1.js";import{g as Qe,a as Ze}from"../chunks/spread.CgU5AtxT.js";import{S as xe}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{r as et,az as tt,aA as Oe,aB as ot,aC as Te,aD as at,aE as lt,aF as nt,aG as st,aH as rt,aI as it,aJ as ft}from"../chunks/messages.DZzIl59o.js";import{i as qe}from"../chunks/authorization.BfNSR1Nc.js";import{p as ut}from"../chunks/stores.BdoTh84D.js";import{a as Re}from"../chunks/apiNames.G3FqMHey.js";import{S as _t}from"../chunks/StatusComponent.CudnW4VH.js";import{d as re}from"../chunks/dayjs.min.B27XEuZS.js";import{C as ct}from"../chunks/ConfirmDialog.D50Qb-7A.js";import{B as dt}from"../chunks/BookingCalendar.BYMDIjXT.js";function He(r,e,t){const a=r.slice();return a[11]=e[t],a[12]=e,a[13]=t,a}function Ye(r,e,t){const a=r.slice();return a[14]=e[t],a}function Ae(r){let e,t=ot()+"",a;return{c(){e=p("a"),a=G(t),this.h()},l(o){e=b(o,"A",{class:!0,href:!0});var l=k(e);a=L(l,t),l.forEach(f),this.h()},h(){P(e,"class","btn"),P(e,"href",r[4]("/booking/admin",void 0))},m(o,l){J(o,e,l),s(e,a)},p:Ge,d(o){o&&f(e)}}}function mt(r){let e,t,a,o,l,v=lt()+"",q,U,R,M=nt()+"",$,E,i,T=st()+"",j,N,d,A=rt()+"",w,K,V,z=it()+"",S,n,u,C,B,D=[],F=new Map,Q,W=de(r[0].bookingRequests);const ee=_=>_[11].id;for(let _=0;_<W.length;_+=1){let g=He(r,W,_),y=ee(g);F.set(y,D[_]=Be(y,g))}return{c(){e=p("div"),t=p("table"),a=p("thead"),o=p("tr"),l=p("th"),q=G(v),U=H(),R=p("th"),$=G(M),E=H(),i=p("th"),j=G(T),N=H(),d=p("th"),w=G(A),K=H(),V=p("th"),S=G(z),n=H(),u=p("th"),C=H(),B=p("tbody");for(let _=0;_<D.length;_+=1)D[_].c();this.h()},l(_){e=b(_,"DIV",{class:!0});var g=k(e);t=b(g,"TABLE",{class:!0});var y=k(t);a=b(y,"THEAD",{});var X=k(a);o=b(X,"TR",{class:!0});var c=k(o);l=b(c,"TH",{});var ae=k(l);q=L(ae,v),ae.forEach(f),U=Y(c),R=b(c,"TH",{});var le=k(R);$=L(le,M),le.forEach(f),E=Y(c),i=b(c,"TH",{});var te=k(i);j=L(te,T),te.forEach(f),N=Y(c),d=b(c,"TH",{});var ne=k(d);w=L(ne,A),ne.forEach(f),K=Y(c),V=b(c,"TH",{});var m=k(V);S=L(m,z),m.forEach(f),n=Y(c),u=b(c,"TH",{}),k(u).forEach(f),c.forEach(f),X.forEach(f),C=Y(y),B=b(y,"TBODY",{});var h=k(B);for(let I=0;I<D.length;I+=1)D[I].l(h);h.forEach(f),y.forEach(f),g.forEach(f),this.h()},h(){P(o,"class","bg-base-200"),P(t,"class","table"),P(e,"class","overflow-x-auto")},m(_,g){J(_,e,g),s(e,t),s(t,a),s(a,o),s(o,l),s(l,q),s(o,U),s(o,R),s(R,$),s(o,E),s(o,i),s(i,j),s(o,N),s(o,d),s(d,w),s(o,K),s(o,V),s(V,S),s(o,n),s(o,u),s(t,C),s(t,B);for(let y=0;y<D.length;y+=1)D[y]&&D[y].m(B,null);Q=!0},p(_,g){g&23&&(W=de(_[0].bookingRequests),Ie(),D=We(D,g,ee,1,_,W,F,B,Xe,Be,null,He),ye())},i(_){if(!Q){for(let g=0;g<W.length;g+=1)x(D[g]);Q=!0}},o(_){for(let g=0;g<D.length;g+=1)Z(D[g]);Q=!1},d(_){_&&f(e);for(let g=0;g<D.length;g+=1)D[g].d()}}}function ht(r){let e,t;const a=[r[0]];let o={};for(let l=0;l<a.length;l+=1)o=Le(o,a[l]);return e=new dt({props:o}),{c(){fe(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,v){_e(e,l,v),t=!0},p(l,v){const q=v&1?Qe(a,[Ze(l[0])]):{};e.$set(q)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){ce(e,l)}}}function we(r){let e,t=r[14]+"",a;return{c(){e=p("p"),a=G(t),this.h()},l(o){e=b(o,"P",{class:!0});var l=k(e);a=L(l,t),l.forEach(f),this.h()},h(){P(e,"class","min-w-max")},m(o,l){J(o,e,l),s(e,a)},p(o,l){l&1&&t!==(t=o[14]+"")&&ie(a,t)},d(o){o&&f(e)}}}function Be(r,e){let t,a,o,l,v=re(e[11].start).format("YYYY-MM-DD HH:mm")+"",q,U,R,M=re(e[11].end).format("YYYY-MM-DD HH:mm")+"",$,E,i,T=e[11].event+"",j,N,d,A,w,K,V,z,S,n,u=ft()+"",C,B,D,F,Q=Oe()+"",W,ee,_,g,y,X=de(e[11].bookables.map(Se)),c=[];for(let m=0;m<X.length;m+=1)c[m]=we(Ye(e,X,m));function ae(m){e[5](m,e[11],e[12],e[13])}function le(m){e[6](m)}let te={class:"flex-col"};e[11]!==void 0&&(te.bookingRequest=e[11]),e[0].bookingRequests!==void 0&&(te.bookingRequests=e[0].bookingRequests),A=new _t({props:te}),he.push(()=>pe(A,"bookingRequest",ae)),he.push(()=>pe(A,"bookingRequests",le));function ne(){return e[7](e[11])}return{key:r,first:null,c(){t=p("tr"),a=p("td");for(let m=0;m<c.length;m+=1)c[m].c();o=H(),l=p("td"),q=G(v),U=H(),R=p("td"),$=G(M),E=H(),i=p("td"),j=G(T),N=H(),d=p("td"),fe(A.$$.fragment),V=H(),z=p("td"),S=p("div"),n=p("a"),C=G(u),D=H(),F=p("button"),W=G(Q),ee=H(),this.h()},l(m){t=b(m,"TR",{});var h=k(t);a=b(h,"TD",{});var I=k(a);for(let me=0;me<c.length;me+=1)c[me].l(I);I.forEach(f),o=Y(h),l=b(h,"TD",{});var O=k(l);q=L(O,v),O.forEach(f),U=Y(h),R=b(h,"TD",{});var oe=k(R);$=L(oe,M),oe.forEach(f),E=Y(h),i=b(h,"TD",{});var be=k(i);j=L(be,T),be.forEach(f),N=Y(h),d=b(h,"TD",{});var ke=k(d);ue(A.$$.fragment,ke),ke.forEach(f),V=Y(h),z=b(h,"TD",{});var ve=k(z);S=b(ve,"DIV",{class:!0});var se=k(S);n=b(se,"A",{href:!0,class:!0});var $e=k(n);C=L($e,u),$e.forEach(f),D=Y(se),F=b(se,"BUTTON",{class:!0});var Ee=k(F);W=L(Ee,Q),Ee.forEach(f),se.forEach(f),ve.forEach(f),ee=Y(h),h.forEach(f),this.h()},h(){P(n,"href",B=e[4](`/booking/${e[11].id}/edit`,void 0)),P(n,"class","btn btn-xs px-8"),P(F,"class","btn btn-xs px-8"),P(S,"class","form-control gap-2"),this.first=t},m(m,h){J(m,t,h),s(t,a);for(let I=0;I<c.length;I+=1)c[I]&&c[I].m(a,null);s(t,o),s(t,l),s(l,q),s(t,U),s(t,R),s(R,$),s(t,E),s(t,i),s(i,j),s(t,N),s(t,d),_e(A,d,null),s(t,V),s(t,z),s(z,S),s(S,n),s(n,C),s(S,D),s(S,F),s(F,W),s(t,ee),_=!0,g||(y=Ue(F,"click",ne),g=!0)},p(m,h){if(e=m,h&1){X=de(e[11].bookables.map(Se));let O;for(O=0;O<X.length;O+=1){const oe=Ye(e,X,O);c[O]?c[O].p(oe,h):(c[O]=we(oe),c[O].c(),c[O].m(a,null))}for(;O<c.length;O+=1)c[O].d(1);c.length=X.length}(!_||h&1)&&v!==(v=re(e[11].start).format("YYYY-MM-DD HH:mm")+"")&&ie(q,v),(!_||h&1)&&M!==(M=re(e[11].end).format("YYYY-MM-DD HH:mm")+"")&&ie($,M),(!_||h&1)&&T!==(T=e[11].event+"")&&ie(j,T);const I={};!w&&h&1&&(w=!0,I.bookingRequest=e[11],ge(()=>w=!1)),!K&&h&1&&(K=!0,I.bookingRequests=e[0].bookingRequests,ge(()=>K=!1)),A.$set(I),(!_||h&1&&B!==(B=e[4](`/booking/${e[11].id}/edit`,void 0)))&&P(n,"href",B)},i(m){_||(x(A.$$.fragment,m),_=!0)},o(m){Z(A.$$.fragment,m),_=!1},d(m){m&&f(t),Ve(c,m),ce(A),g=!1,y()}}}function Me(r){var o;let e,t=Te({bookables:(o=r[2])==null?void 0:o.bookables.map(Ce).join(", ")})+"",a;return{c(){e=new ze(!1),a=De(),this.h()},l(l){e=Ke(l,!1),a=De(),this.h()},h(){e.a=a},m(l,v){e.m(t,l,v),J(l,a,v)},p(l,v){var q;v&4&&t!==(t=Te({bookables:(q=l[2])==null?void 0:q.bookables.map(Ce).join(", ")})+"")&&e.p(t)},d(l){l&&(f(a),e.d())}}}function gt(r){let e,t=r[2]&&Me(r);return{c(){e=p("p"),t&&t.c(),this.h()},l(a){e=b(a,"P",{slot:!0});var o=k(e);t&&t.l(o),o.forEach(f),this.h()},h(){P(e,"slot","description")},m(a,o){J(a,e,o),t&&t.m(e,null)},p(a,o){a[2]?t?t.p(a,o):(t=Me(a),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(a){a&&f(e),t&&t.d()}}}function pt(r){var S;let e,t,a,o,l,v=at()+"",q,U,R=qe(Re.BOOKINGS.UPDATE,r[3].data.user),M,$,E,i,T,j,N;e=new xe({props:{title:et()}});let d=R&&Ae(r);const A=[ht,mt],w=[];function K(n,u){return n[0].bookingRequests.length===0?0:1}$=K(r),E=w[$]=A[$](r);function V(n){r[8](n)}let z={title:tt(),confirmText:Oe(),confirmClass:"btn-error",formTarget:"/booking?/delete",formData:{id:((S=r[2])==null?void 0:S.id)??""},$$slots:{description:[gt]},$$scope:{ctx:r}};return r[1]!==void 0&&(z.modal=r[1]),T=new ct({props:z}),he.push(()=>pe(T,"modal",V)),{c(){fe(e.$$.fragment),t=H(),a=p("div"),o=p("a"),l=G("+ "),q=G(v),U=H(),d&&d.c(),M=H(),E.c(),i=H(),fe(T.$$.fragment),this.h()},l(n){ue(e.$$.fragment,n),t=Y(n),a=b(n,"DIV",{class:!0});var u=k(a);o=b(u,"A",{class:!0,href:!0});var C=k(o);l=L(C,"+ "),q=L(C,v),C.forEach(f),U=Y(u),d&&d.l(u),u.forEach(f),M=Y(n),E.l(n),i=Y(n),ue(T.$$.fragment,n),this.h()},h(){P(o,"class","btn btn-primary"),P(o,"href",r[4]("/booking/create",void 0)),P(a,"class","mb-8 flex gap-4")},m(n,u){_e(e,n,u),J(n,t,u),J(n,a,u),s(a,o),s(o,l),s(o,q),s(a,U),d&&d.m(a,null),J(n,M,u),w[$].m(n,u),J(n,i,u),_e(T,n,u),N=!0},p(n,[u]){var D;u&8&&(R=qe(Re.BOOKINGS.UPDATE,n[3].data.user)),R?d?d.p(n,u):(d=Ae(n),d.c(),d.m(a,null)):d&&(d.d(1),d=null);let C=$;$=K(n),$===C?w[$].p(n,u):(Ie(),Z(w[C],1,1,()=>{w[C]=null}),ye(),E=w[$],E?E.p(n,u):(E=w[$]=A[$](n),E.c()),x(E,1),E.m(i.parentNode,i));const B={};u&4&&(B.formData={id:((D=n[2])==null?void 0:D.id)??""}),u&131076&&(B.$$scope={dirty:u,ctx:n}),!j&&u&2&&(j=!0,B.modal=n[1],ge(()=>j=!1)),T.$set(B)},i(n){N||(x(e.$$.fragment,n),x(E),x(T.$$.fragment,n),N=!0)},o(n){Z(e.$$.fragment,n),Z(E),Z(T.$$.fragment,n),N=!1},d(n){n&&(f(t),f(a),f(M),f(i)),ce(e,n),d&&d.d(),w[$].d(n),ce(T,n)}}}const Se=r=>r.name,Ce=({name:r})=>r;function bt(r,e,t){let a;je(r,ut,i=>t(3,a=i));let{data:o}=e,l,v;const q=Ne("$paraglide-adapter-sveltekit:context");function U(i,T){return typeof i!="string"||!q?i:q.translateHref(i,T)}function R(i,T,j,N){j[N]=i,t(0,o)}function M(i){r.$$.not_equal(o.bookingRequests,i)&&(o.bookingRequests=i,t(0,o))}const $=i=>{l==null||l.showModal(),t(2,v=i)};function E(i){l=i,t(1,l)}return r.$$set=i=>{"data"in i&&t(0,o=i.data)},[o,l,v,a,U,R,M,$,E]}class Mt extends Fe{constructor(e){super(),Je(this,e,bt,pt,Pe,{data:0})}}export{Mt as component};
