import{s as De,e as g,j as H,a as v,b as D,k as P,d as _,f as T,i as $,q as d,Q as bt,x as gt,m as Ne,c as vt,u as kt,g as $t,h as Ct,n as x,D as Re,F as Qe,_ as Je,H as At,t as z,o as G,S as fe,R as Ye,l as wt,C as de,E as ue}from"../chunks/scheduler.DK5noefF.js";import{S as He,i as Pe,g as be,b as N,e as ge,t as E,c as J,a as W,m as X,d as Z}from"../chunks/index.OECaLbXR.js";import{e as $e,u as It,o as Et}from"../chunks/each.Dbd03sI1.js";import{S as Tt}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{p as Dt}from"../chunks/stores.BdoTh84D.js";import{M as Ht}from"../chunks/MemberAvatar.DsenHHaP.js";import{g as We}from"../chunks/member.Deknk2Gk.js";import{d as Me}from"../chunks/dayjs.min.B27XEuZS.js";import{e as Pt}from"../chunks/forms.DDTWXYJD.js";import{g as Mt}from"../chunks/spread.CgU5AtxT.js";import{t as Xe}from"../chunks/bundle-mjs.BkWO730n.js";const qt=new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",currencyDisplay:"code",minimumFractionDigits:0,maximumFractionDigits:2}),qe=r=>qt.format(r/100),Nt="font-semibold text-success";function St(r){let e;const l=r[7].default,t=vt(l,r,r[6],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&64)&&kt(t,l,n,n[6],e?Ct(l,n[6],s,null):$t(n[6]),null)},i(n){e||(E(t,n),e=!0)},o(n){N(t,n),e=!1},d(n){t&&t.d(n)}}}function Rt(r){let e;return{c(){e=g("span"),this.h()},l(l){e=v(l,"SPAN",{class:!0}),D(e).forEach(_),this.h()},h(){T(e,"class","loading loading-spinner loading-sm")},m(l,t){$(l,e,t)},p:x,i:x,o:x,d(l){l&&_(e)}}}function Yt(r){let e,l,t,n,s,a,i,o,m,b,f;const p=[Rt,St],k=[];function Y(M,V){return M[2]?0:1}return s=Y(r),a=k[s]=p[s](r),{c(){e=g("form"),l=g("input"),t=H(),n=g("button"),a.c(),this.h()},l(M){e=v(M,"FORM",{method:!0,action:!0});var V=D(e);l=v(V,"INPUT",{type:!0,name:!0}),t=P(V),n=v(V,"BUTTON",{class:!0});var O=D(n);a.l(O),O.forEach(_),V.forEach(_),this.h()},h(){T(l,"type","hidden"),T(l,"name","consumableId"),l.value=r[1],T(n,"class","btn btn-ghost"),T(e,"method","POST"),T(e,"action",i=r[4](r[0],void 0))},m(M,V){$(M,e,V),d(e,l),d(e,t),d(e,n),k[s].m(n,null),m=!0,b||(f=bt(o=Pt.call(null,e,r[3])),b=!0)},p(M,[V]){(!m||V&2)&&(l.value=M[1]);let O=s;s=Y(M),s===O?k[s].p(M,V):(be(),N(k[O],1,1,()=>{k[O]=null}),ge(),a=k[s],a?a.p(M,V):(a=k[s]=p[s](M),a.c()),E(a,1),a.m(n,null)),(!m||V&1&&i!==(i=M[4](M[0],void 0)))&&T(e,"action",i),o&&gt(o.update)&&V&8&&o.update.call(null,M[3])},i(M){m||(E(a),m=!0)},o(M){N(a),m=!1},d(M){M&&_(e),k[s].d(),b=!1,f()}}}function Lt(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{action:a}=e,{warningMessage:i=null}=e,{consumableId:o}=e,m=!1;const b=Ne("$paraglide-adapter-sveltekit:context");function f(p,k){return typeof p!="string"||!b?p:b.translateHref(p,k)}return r.$$set=p=>{"action"in p&&l(0,a=p.action),"warningMessage"in p&&l(5,i=p.warningMessage),"consumableId"in p&&l(1,o=p.consumableId),"$$scope"in p&&l(6,s=p.$$scope)},r.$$.update=()=>{r.$$.dirty&32&&l(3,t=({cancel:p})=>(i!==null&&!confirm(i)?p():l(2,m=!0),({update:k})=>{l(2,m=!1),k()}))},[a,o,m,t,f,i,s,n]}class Le extends He{constructor(e){super(),Pe(this,e,Lt,Yt,De,{action:0,warningMessage:5,consumableId:1})}}function jt(r){let e;return{c(){e=z(r[3])},l(l){e=G(l,r[3])},m(l,t){$(l,e,t)},p(l,t){t&8&&fe(e,l[3])},d(l){l&&_(e)}}}function Bt(r){let e,l,t;return{c(){e=g("a"),l=z(r[3]),this.h()},l(n){e=v(n,"A",{class:!0,href:!0});var s=D(e);l=G(s,r[3]),s.forEach(_),this.h()},h(){T(e,"class","link text-primary"),T(e,"href",t=r[4](r[1],void 0))},m(n,s){$(n,e,s),d(e,l)},p(n,s){s&8&&fe(l,n[3]),s&2&&t!==(t=n[4](n[1],void 0))&&T(e,"href",t)},d(n){n&&_(e)}}}function Vt(r){let e,l,t,n,s;function a(f,p){return f[1]?Bt:jt}let i=a(r),o=i(r),m=[{class:n=Xe("tooltip max-w-32 overflow-x-hidden text-ellipsis whitespace-nowrap",r[2])},r[5]],b={};for(let f=0;f<m.length;f+=1)b=Re(b,m[f]);return{c(){e=g("td"),l=g("div"),t=g("span"),o.c(),this.h()},l(f){e=v(f,"TD",{});var p=D(e);l=v(p,"DIV",{class:!0,"data-tip":!0});var k=D(l);t=v(k,"SPAN",{class:!0});var Y=D(t);o.l(Y),Y.forEach(_),k.forEach(_),p.forEach(_),this.h()},h(){Qe(t,b),T(l,"class","tooltip"),T(l,"data-tip",s=r[0]?r[0]:"")},m(f,p){$(f,e,p),d(e,l),d(l,t),o.m(t,null)},p(f,[p]){i===(i=a(f))&&o?o.p(f,p):(o.d(1),o=i(f),o&&(o.c(),o.m(t,null))),Qe(t,b=Mt(m,[p&4&&n!==(n=Xe("tooltip max-w-32 overflow-x-hidden text-ellipsis whitespace-nowrap",f[2]))&&{class:n},p&32&&f[5]])),p&1&&s!==(s=f[0]?f[0]:"")&&T(l,"data-tip",s)},i:x,o:x,d(f){f&&_(e),o.d()}}}function Ft(r,e,l){let t;const n=["value","link","class"];let s=Je(e,n),{value:a}=e,{link:i=void 0}=e,{class:o=void 0}=e;const m=Ne("$paraglide-adapter-sveltekit:context");function b(f,p){return typeof f!="string"||!m?f:m.translateHref(f,p)}return r.$$set=f=>{e=Re(Re({},e),At(f)),l(5,s=Je(e,n)),"value"in f&&l(0,a=f.value),"link"in f&&l(1,i=f.link),"class"in f&&l(2,o=f.class)},r.$$.update=()=>{r.$$.dirty&1&&l(3,t=a===void 0?"-":a===null?"N/A":a)},[a,i,o,t,b,s]}class ke extends He{constructor(e){super(),Pe(this,e,Ft,Vt,De,{value:0,link:1,class:2})}}function Ze(r,e,l){const t=r.slice();return t[11]=e[l],t}function yt(r){const e=r.slice(),l=e[0].questionResponses.find(function(...n){return r[7](e[11],...n)});return e[14]=l,e}function Se(r){var t;const e=r.slice(),l=(t=e[0].member)==null?void 0:t.phadderGroup;return e[15]=l,e}function xe(r){let e,l=r[2].externalCustomerEmail+"",t;return{c(){e=g("div"),t=z(l),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=D(e);t=G(s,l),s.forEach(_),this.h()},h(){T(e,"class","text-sm opacity-50")},m(n,s){$(n,e,s),d(e,t)},p(n,s){s&4&&l!==(l=n[2].externalCustomerEmail+"")&&fe(t,l)},d(n){n&&_(e)}}}function et(r){var t;let e,l;return e=new ke({props:{value:(t=r[15])!=null&&t.name?r[15].name:""}}),{c(){J(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){X(e,n,s),l=!0},p(n,s){var i;const a={};s&1&&(a.value=(i=n[15])!=null&&i.name?n[15].name:""),e.$set(a)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Ot(r){let e,l;return e=new ke({props:{value:null}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p:x,i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Kt(r){let e,l;return e=new ke({props:{value:r[14]?`${r[14].answer}${r[14].extraPrice?` (${qe(r[14].extraPrice)})`:""}`:void 0}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&3&&(s.value=t[14]?`${t[14].answer}${t[14].extraPrice?` (${qe(t[14].extraPrice)})`:""}`:void 0),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function tt(r){let e,l,t,n;const s=[Kt,Ot],a=[];function i(m,b){return m[0]?0:1}function o(m,b){return b===0?yt(m):m}return e=i(r),l=a[e]=s[e](o(r,e)),{c(){l.c(),t=de()},l(m){l.l(m),t=de()},m(m,b){a[e].m(m,b),$(m,t,b),n=!0},p(m,b){let f=e;e=i(m),e===f?a[e].p(o(m,e),b):(be(),N(a[f],1,1,()=>{a[f]=null}),ge(),l=a[e],l?l.p(o(m,e),b):(l=a[e]=s[e](o(m,e)),l.c()),E(l,1),l.m(t.parentNode,t))},i(m){n||(E(l),n=!0)},o(m){N(l),n=!1},d(m){m&&_(t),a[e].d(m)}}}function Ut(r){let e,l="N/A";return{c(){e=g("span"),e.textContent=l,this.h()},l(t){e=v(t,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1bnmb02"&&(e.textContent=l),this.h()},h(){T(e,"class","font-semibold text-gray-400")},m(t,n){$(t,e,n)},p:x,i:x,o:x,d(t){t&&_(e)}}}function zt(r){let e,l;return e=new Le({props:{action:"?/unconsume",consumableId:r[0].id,warningMessage:"Är du säker på att du vill avkonsumera biljetten?",$$slots:{default:[Qt]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.consumableId=t[0].id),n&65536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Gt(r){let e,l;return e=new Le({props:{action:"?/consume",consumableId:r[0].id,$$slots:{default:[Jt]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.consumableId=t[0].id),n&65536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Qt(r){let e;return{c(){e=g("span"),this.h()},l(l){e=v(l,"SPAN",{class:!0}),D(e).forEach(_),this.h()},h(){T(e,"class","i-mdi-redo-variant text-xl text-error")},m(l,t){$(l,e,t)},p:x,d(l){l&&_(e)}}}function Jt(r){let e;return{c(){e=g("span"),this.h()},l(l){e=v(l,"SPAN",{class:!0}),D(e).forEach(_),this.h()},h(){T(e,"class","i-mdi-flame-circle text-xl text-secondary")},m(l,t){$(l,e,t)},p:x,d(l){l&&_(e)}}}function lt(r){let e,l;return e=new Le({props:{action:"?/refund",consumableId:r[0].id,warningMessage:"Är du säker på att du vill ge personen en återbetalning?",$$slots:{default:[Wt]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.consumableId=t[0].id),n&65536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Wt(r){let e;return{c(){e=g("span"),this.h()},l(l){e=v(l,"SPAN",{class:!0}),D(e).forEach(_),this.h()},h(){T(e,"class","i-mdi-cash-refund text-xl text-success")},m(l,t){$(l,e,t)},p:x,d(l){l&&_(e)}}}function Xt(r){var te,j,ve,he,Ee,R,oe,le;let e,l,t,n,s,a,i,o=(r[3]?We(r[3]):"Icke inloggad")+"",m,b,f,p,k,Y,M,V,O,ie,ee,ce,F,_e,me,Q,y,K,se,U,re;n=new Ht({props:{class:"h-8 w-8",member:r[3]}});let q=r[2].externalCustomerEmail&&xe(r);p=new ke({props:{value:r[3]?r[3].foodPreference??"":""}}),Y=new ke({props:{value:(te=r[0])!=null&&te.purchasedAt?Me(r[0].purchasedAt).format("HH:MM:ss DD-MM-YYYY"):null}});let w=r[0]!==null&&et(Se(r));O=new ke({props:{value:(j=r[0])!=null&&j.consumedAt?Me(r[0].consumedAt).format("HH:MM:ss DD-MM-YYYY"):r[0]?"Ej konsumerad":null,class:(ve=r[0])!=null&&ve.consumedAt?"text-success":""}}),ee=new ke({props:{value:(he=r[0])!=null&&he.priceAtPurchase?qe(r[0].priceAtPurchase):((Ee=r[0])==null?void 0:Ee.purchasedAt)!==null?"Okänt":null,class:Nt}}),F=new ke({props:{link:(R=r[0])!=null&&R.stripeIntentId?`${r[4]}/${r[0].stripeIntentId}`:void 0,value:(oe=r[0])!=null&&oe.stripeIntentId?`${r[0].stripeIntentId}`:(le=r[0])!=null&&le.purchasedAt?"Finns inte sparad":null}});let B=$e(r[1]),C=[];for(let c=0;c<B.length;c+=1)C[c]=tt(Ze(r,B,c));const L=c=>N(C[c],1,1,()=>{C[c]=null}),S=[Gt,zt,Ut],u=[];function A(c,h){var ne;return((ne=c[0])==null?void 0:ne.consumedAt)===null?0:c[0]?1:2}y=A(r),K=u[y]=S[y](r);let I=r[0]&&lt(r);return{c(){e=g("tr"),l=g("td"),t=g("div"),J(n.$$.fragment),s=H(),a=g("div"),i=g("div"),m=z(o),b=H(),q&&q.c(),f=H(),J(p.$$.fragment),k=H(),J(Y.$$.fragment),M=H(),w&&w.c(),V=H(),J(O.$$.fragment),ie=H(),J(ee.$$.fragment),ce=H(),J(F.$$.fragment),_e=H();for(let c=0;c<C.length;c+=1)C[c].c();me=H(),Q=g("th"),K.c(),se=H(),U=g("th"),I&&I.c(),this.h()},l(c){e=v(c,"TR",{});var h=D(e);l=v(h,"TD",{});var ne=D(l);t=v(ne,"DIV",{class:!0});var pe=D(t);W(n.$$.fragment,pe),s=P(pe),a=v(pe,"DIV",{});var Ce=D(a);i=v(Ce,"DIV",{class:!0});var we=D(i);m=G(we,o),we.forEach(_),b=P(Ce),q&&q.l(Ce),Ce.forEach(_),pe.forEach(_),ne.forEach(_),f=P(h),W(p.$$.fragment,h),k=P(h),W(Y.$$.fragment,h),M=P(h),w&&w.l(h),V=P(h),W(O.$$.fragment,h),ie=P(h),W(ee.$$.fragment,h),ce=P(h),W(F.$$.fragment,h),_e=P(h);for(let Ae=0;Ae<C.length;Ae+=1)C[Ae].l(h);me=P(h),Q=v(h,"TH",{});var Te=D(Q);K.l(Te),Te.forEach(_),se=P(h),U=v(h,"TH",{});var Ie=D(U);I&&I.l(Ie),Ie.forEach(_),h.forEach(_),this.h()},h(){T(i,"class","font-bold"),T(t,"class","flex items-center gap-3")},m(c,h){$(c,e,h),d(e,l),d(l,t),X(n,t,null),d(t,s),d(t,a),d(a,i),d(i,m),d(a,b),q&&q.m(a,null),d(e,f),X(p,e,null),d(e,k),X(Y,e,null),d(e,M),w&&w.m(e,null),d(e,V),X(O,e,null),d(e,ie),X(ee,e,null),d(e,ce),X(F,e,null),d(e,_e);for(let ne=0;ne<C.length;ne+=1)C[ne]&&C[ne].m(e,null);d(e,me),d(e,Q),u[y].m(Q,null),d(e,se),d(e,U),I&&I.m(U,null),re=!0},p(c,[h]){var Be,Ve,Fe,ye,Oe,Ke,Ue,ze;const ne={};h&8&&(ne.member=c[3]),n.$set(ne),(!re||h&8)&&o!==(o=(c[3]?We(c[3]):"Icke inloggad")+"")&&fe(m,o),c[2].externalCustomerEmail?q?q.p(c,h):(q=xe(c),q.c(),q.m(a,null)):q&&(q.d(1),q=null);const pe={};h&8&&(pe.value=c[3]?c[3].foodPreference??"":""),p.$set(pe);const Ce={};h&1&&(Ce.value=(Be=c[0])!=null&&Be.purchasedAt?Me(c[0].purchasedAt).format("HH:MM:ss DD-MM-YYYY"):null),Y.$set(Ce),c[0]!==null?w?(w.p(Se(c),h),h&1&&E(w,1)):(w=et(Se(c)),w.c(),E(w,1),w.m(e,V)):w&&(be(),N(w,1,1,()=>{w=null}),ge());const we={};h&1&&(we.value=(Ve=c[0])!=null&&Ve.consumedAt?Me(c[0].consumedAt).format("HH:MM:ss DD-MM-YYYY"):c[0]?"Ej konsumerad":null),h&1&&(we.class=(Fe=c[0])!=null&&Fe.consumedAt?"text-success":""),O.$set(we);const Te={};h&1&&(Te.value=(ye=c[0])!=null&&ye.priceAtPurchase?qe(c[0].priceAtPurchase):((Oe=c[0])==null?void 0:Oe.purchasedAt)!==null?"Okänt":null),ee.$set(Te);const Ie={};if(h&17&&(Ie.link=(Ke=c[0])!=null&&Ke.stripeIntentId?`${c[4]}/${c[0].stripeIntentId}`:void 0),h&1&&(Ie.value=(Ue=c[0])!=null&&Ue.stripeIntentId?`${c[0].stripeIntentId}`:(ze=c[0])!=null&&ze.purchasedAt?"Finns inte sparad":null),F.$set(Ie),h&3){B=$e(c[1]);let ae;for(ae=0;ae<B.length;ae+=1){const Ge=Ze(c,B,ae);C[ae]?(C[ae].p(Ge,h),E(C[ae],1)):(C[ae]=tt(Ge),C[ae].c(),E(C[ae],1),C[ae].m(e,me))}for(be(),ae=B.length;ae<C.length;ae+=1)L(ae);ge()}let Ae=y;y=A(c),y===Ae?u[y].p(c,h):(be(),N(u[Ae],1,1,()=>{u[Ae]=null}),ge(),K=u[y],K?K.p(c,h):(K=u[y]=S[y](c),K.c()),E(K,1),K.m(Q,null)),c[0]?I?(I.p(c,h),h&1&&E(I,1)):(I=lt(c),I.c(),E(I,1),I.m(U,null)):I&&(be(),N(I,1,1,()=>{I=null}),ge())},i(c){if(!re){E(n.$$.fragment,c),E(p.$$.fragment,c),E(Y.$$.fragment,c),E(w),E(O.$$.fragment,c),E(ee.$$.fragment,c),E(F.$$.fragment,c);for(let h=0;h<B.length;h+=1)E(C[h]);E(K),E(I),re=!0}},o(c){N(n.$$.fragment,c),N(p.$$.fragment,c),N(Y.$$.fragment,c),N(w),N(O.$$.fragment,c),N(ee.$$.fragment,c),N(F.$$.fragment,c),C=C.filter(Boolean);for(let h=0;h<C.length;h+=1)N(C[h]);N(K),N(I),re=!1},d(c){c&&_(e),Z(n),q&&q.d(),Z(p),Z(Y),w&&w.d(),Z(O),Z(ee),Z(F),Ye(C,c),u[y].d(),I&&I.d()}}}function Zt(r,e,l){let t,n,s,a;wt(r,Dt,f=>l(6,a=f));let{consumable:i=null}=e,{reservation:o=null}=e,{questions:m}=e;if(!i&&!o)throw new Error("Either consumable or reservation must be specified");Ne("$paraglide-adapter-sveltekit:context");const b=(f,p)=>p.questionId===f.id;return r.$$set=f=>{"consumable"in f&&l(0,i=f.consumable),"reservation"in f&&l(5,o=f.reservation),"questions"in f&&l(1,m=f.questions)},r.$$.update=()=>{r.$$.dirty&64&&l(4,t=a.data.stripeIntentBaseUrl),r.$$.dirty&33&&l(2,n=i??o),r.$$.dirty&4&&l(3,s=n.member)},[i,m,n,s,t,o,a,b]}class xt extends He{constructor(e){super(),Pe(this,e,Zt,Xt,De,{consumable:0,reservation:5,questions:1})}}function nt(r,e,l){const t=r.slice();return t[3]=e[l],t}function st(r,e,l){const t=r.slice();return t[6]=e[l],t}function rt(r){let e,l,t;return{c(){e=g("tr"),l=g("th"),t=z(r[0]),this.h()},l(n){e=v(n,"TR",{});var s=D(e);l=v(s,"TH",{colspan:!0,class:!0});var a=D(l);t=G(a,r[0]),a.forEach(_),s.forEach(_),this.h()},h(){T(l,"colspan","1000"),T(l,"class","text-center text-lg")},m(n,s){$(n,e,s),d(e,l),d(l,t)},p(n,s){s&1&&fe(t,n[0])},d(n){n&&_(e)}}}function at(r){let e,l,t,n=r[6].title+"",s,a;return{c(){e=g("th"),l=g("div"),t=g("span"),s=z(n),this.h()},l(i){e=v(i,"TH",{});var o=D(e);l=v(o,"DIV",{class:!0,"data-tip":!0});var m=D(l);t=v(m,"SPAN",{class:!0});var b=D(t);s=G(b,n),b.forEach(_),m.forEach(_),o.forEach(_),this.h()},h(){T(t,"class","inline-block max-w-32 overflow-hidden text-ellipsis whitespace-nowrap"),T(l,"class","tooltip"),T(l,"data-tip",a=r[6].title)},m(i,o){$(i,e,o),d(e,l),d(l,t),d(t,s)},p(i,o){o&2&&n!==(n=i[6].title+"")&&fe(s,n),o&2&&a!==(a=i[6].title)&&T(l,"data-tip",a)},d(i){i&&_(e)}}}function el(r){let e,l='<td colspan="1000" class="text-center">Inga biljetter</td>';return{c(){e=g("tr"),e.innerHTML=l},l(t){e=v(t,"TR",{"data-svelte-h":!0}),ue(e)!=="svelte-s1szqv"&&(e.innerHTML=l)},m(t,n){$(t,e,n)},p:x,i:x,o:x,d(t){t&&_(e)}}}function tl(r){let e=[],l=new Map,t,n,s=$e(r[2]);const a=i=>i[3].id;for(let i=0;i<s.length;i+=1){let o=nt(r,s,i),m=a(o);l.set(m,e[i]=it(m,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=de()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);t=de()},m(i,o){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(i,o);$(i,t,o),n=!0},p(i,o){o&6&&(s=$e(i[2]),be(),e=It(e,o,a,1,i,s,l,t.parentNode,Et,it,t,nt),ge())},i(i){if(!n){for(let o=0;o<s.length;o+=1)E(e[o]);n=!0}},o(i){for(let o=0;o<e.length;o+=1)N(e[o]);n=!1},d(i){i&&_(t);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function it(r,e){let l,t,n;return t=new xt({props:{consumable:"purchasedAt"in e[3]?e[3]??null:null,reservation:"purchasedAt"in e[3]?null:e[3],questions:e[1]}}),{key:r,first:null,c(){l=de(),J(t.$$.fragment),this.h()},l(s){l=de(),W(t.$$.fragment,s),this.h()},h(){this.first=l},m(s,a){$(s,l,a),X(t,s,a),n=!0},p(s,a){e=s;const i={};a&4&&(i.consumable="purchasedAt"in e[3]?e[3]??null:null),a&4&&(i.reservation="purchasedAt"in e[3]?null:e[3]),a&2&&(i.questions=e[1]),t.$set(i)},i(s){n||(E(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&_(l),Z(t,s)}}}function ll(r){let e,l,t,n,s,a,i="Person",o,m,b="Preferens",f,p,k="Köptes",Y,M,V="Phaddergrupp",O,ie,ee="Konsumerades",ce,F,_e="Betalat",me,Q,y="Stripeköp ID",K,se,U,re="Konsumera",q,w,B="Återbetala",C,L,S,u,A,I=r[0]&&rt(r),te=$e(r[1]),j=[];for(let R=0;R<te.length;R+=1)j[R]=at(st(r,te,R));const ve=[tl,el],he=[];function Ee(R,oe){return R[2].length>0?0:1}return S=Ee(r),u=he[S]=ve[S](r),{c(){e=g("div"),l=g("table"),t=g("thead"),I&&I.c(),n=H(),s=g("tr"),a=g("th"),a.textContent=i,o=H(),m=g("th"),m.textContent=b,f=H(),p=g("th"),p.textContent=k,Y=H(),M=g("th"),M.textContent=V,O=H(),ie=g("th"),ie.textContent=ee,ce=H(),F=g("th"),F.textContent=_e,me=H(),Q=g("th"),Q.textContent=y,K=H();for(let R=0;R<j.length;R+=1)j[R].c();se=H(),U=g("th"),U.textContent=re,q=H(),w=g("th"),w.textContent=B,C=H(),L=g("tbody"),u.c(),this.h()},l(R){e=v(R,"DIV",{class:!0});var oe=D(e);l=v(oe,"TABLE",{class:!0});var le=D(l);t=v(le,"THEAD",{});var c=D(t);I&&I.l(c),n=P(c),s=v(c,"TR",{});var h=D(s);a=v(h,"TH",{"data-svelte-h":!0}),ue(a)!=="svelte-18s9o4v"&&(a.textContent=i),o=P(h),m=v(h,"TH",{"data-svelte-h":!0}),ue(m)!=="svelte-id6gvs"&&(m.textContent=b),f=P(h),p=v(h,"TH",{"data-svelte-h":!0}),ue(p)!=="svelte-1qvl57b"&&(p.textContent=k),Y=P(h),M=v(h,"TH",{"data-svelte-h":!0}),ue(M)!=="svelte-19h1k22"&&(M.textContent=V),O=P(h),ie=v(h,"TH",{"data-svelte-h":!0}),ue(ie)!=="svelte-jis7cn"&&(ie.textContent=ee),ce=P(h),F=v(h,"TH",{"data-svelte-h":!0}),ue(F)!=="svelte-ez8tu7"&&(F.textContent=_e),me=P(h),Q=v(h,"TH",{"data-svelte-h":!0}),ue(Q)!=="svelte-1faw7w3"&&(Q.textContent=y),K=P(h);for(let pe=0;pe<j.length;pe+=1)j[pe].l(h);se=P(h),U=v(h,"TH",{"data-svelte-h":!0}),ue(U)!=="svelte-1ovu4i3"&&(U.textContent=re),q=P(h),w=v(h,"TH",{"data-svelte-h":!0}),ue(w)!=="svelte-1pmxbod"&&(w.textContent=B),h.forEach(_),c.forEach(_),C=P(le),L=v(le,"TBODY",{});var ne=D(L);u.l(ne),ne.forEach(_),le.forEach(_),oe.forEach(_),this.h()},h(){T(l,"class","table"),T(e,"class","my-8 overflow-x-auto rounded-box bg-base-200 p-2 shadow-xl")},m(R,oe){$(R,e,oe),d(e,l),d(l,t),I&&I.m(t,null),d(t,n),d(t,s),d(s,a),d(s,o),d(s,m),d(s,f),d(s,p),d(s,Y),d(s,M),d(s,O),d(s,ie),d(s,ce),d(s,F),d(s,me),d(s,Q),d(s,K);for(let le=0;le<j.length;le+=1)j[le]&&j[le].m(s,null);d(s,se),d(s,U),d(s,q),d(s,w),d(l,C),d(l,L),he[S].m(L,null),A=!0},p(R,[oe]){if(R[0]?I?I.p(R,oe):(I=rt(R),I.c(),I.m(t,n)):I&&(I.d(1),I=null),oe&2){te=$e(R[1]);let c;for(c=0;c<te.length;c+=1){const h=st(R,te,c);j[c]?j[c].p(h,oe):(j[c]=at(h),j[c].c(),j[c].m(s,se))}for(;c<j.length;c+=1)j[c].d(1);j.length=te.length}let le=S;S=Ee(R),S===le?he[S].p(R,oe):(be(),N(he[le],1,1,()=>{he[le]=null}),ge(),u=he[S],u?u.p(R,oe):(u=he[S]=ve[S](R),u.c()),E(u,1),u.m(L,null))},i(R){A||(E(u),A=!0)},o(R){N(u),A=!1},d(R){R&&_(e),I&&I.d(),Ye(j,R),he[S].d()}}}function nl(r,e,l){let{title:t=null}=e,{questions:n=[]}=e,{consumables:s}=e;return r.$$set=a=>{"title"in a&&l(0,t=a.title),"questions"in a&&l(1,n=a.questions),"consumables"in a&&l(2,s=a.consumables)},[t,n,s]}class je extends He{constructor(e){super(),Pe(this,e,nl,ll,De,{title:0,questions:1,consumables:2})}}function ot(r,e,l){const t=r.slice();return t[5]=e[l],t}function ut(r){let e,l=r[1].description+"",t;return{c(){e=g("p"),t=z(l),this.h()},l(n){e=v(n,"P",{class:!0});var s=D(e);t=G(s,l),s.forEach(_),this.h()},h(){T(e,"class","text-lg")},m(n,s){$(n,e,s),d(e,t)},p(n,s){s&2&&l!==(l=n[1].description+"")&&fe(t,l)},d(n){n&&_(e)}}}function ft(r){let e,l,t="Frågor",n,s,a=$e(r[1].questions),i=[];for(let o=0;o<a.length;o+=1)i[o]=_t(ot(r,a,o));return{c(){e=g("div"),l=g("h3"),l.textContent=t,n=H(),s=g("ul");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var m=D(e);l=v(m,"H3",{class:!0,"data-svelte-h":!0}),ue(l)!=="svelte-xfjpnw"&&(l.textContent=t),n=P(m),s=v(m,"UL",{class:!0});var b=D(s);for(let f=0;f<i.length;f+=1)i[f].l(b);b.forEach(_),m.forEach(_),this.h()},h(){T(l,"class","text-lg font-semibold"),T(s,"class","ml-4 list-decimal"),T(e,"class","rounded-box bg-base-200 p-4")},m(o,m){$(o,e,m),d(e,l),d(e,n),d(e,s);for(let b=0;b<i.length;b+=1)i[b]&&i[b].m(s,null)},p(o,m){if(m&2){a=$e(o[1].questions);let b;for(b=0;b<a.length;b+=1){const f=ot(o,a,b);i[b]?i[b].p(f,m):(i[b]=_t(f),i[b].c(),i[b].m(s,null))}for(;b<i.length;b+=1)i[b].d(1);i.length=a.length}},d(o){o&&_(e),Ye(i,o)}}}function ct(r){let e,l="(borttagen)";return{c(){e=g("span"),e.textContent=l,this.h()},l(t){e=v(t,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-27pk81"&&(e.textContent=l),this.h()},h(){T(e,"class","opacity-50")},m(t,n){$(t,e,n)},d(t){t&&_(e)}}}function _t(r){let e,l,t=r[5].title+"",n,s,a,i,o=r[5].description+"",m,b,f=r[5].removedAt!==null&&ct();return{c(){e=g("li"),l=g("h2"),n=z(t),s=H(),f&&f.c(),a=H(),i=g("p"),m=z(o),b=H(),this.h()},l(p){e=v(p,"LI",{class:!0});var k=D(e);l=v(k,"H2",{class:!0});var Y=D(l);n=G(Y,t),s=P(Y),f&&f.l(Y),Y.forEach(_),a=P(k),i=v(k,"P",{});var M=D(i);m=G(M,o),M.forEach(_),b=P(k),k.forEach(_),this.h()},h(){T(l,"class","text-lg font-medium"),T(e,"class","mt-4")},m(p,k){$(p,e,k),d(e,l),d(l,n),d(l,s),f&&f.m(l,null),d(e,a),d(e,i),d(i,m),d(e,b)},p(p,k){k&2&&t!==(t=p[5].title+"")&&fe(n,t),p[5].removedAt!==null?f||(f=ct(),f.c(),f.m(l,null)):f&&(f.d(1),f=null),k&2&&o!==(o=p[5].description+"")&&fe(m,o)},d(p){p&&_(e),f&&f.d()}}}function mt(r){let e;function l(s,a){return s[0].consumablesInCart.length>1?rl:sl}let t=l(r),n=t(r);return{c(){n.c(),e=de()},l(s){n.l(s),e=de()},m(s,a){n.m(s,a),$(s,e,a)},p(s,a){t===(t=l(s))&&n?n.p(s,a):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&_(e),n.d(s)}}}function sl(r){let e,l;return{c(){e=z("1 i kundvagn"),l=g("br")},l(t){e=G(t,"1 i kundvagn"),l=v(t,"BR",{})},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(_(e),_(l))}}}function rl(r){let e=r[0].consumablesInCart.length+"",l,t,n;return{c(){l=z(e),t=z(" i kundvagner"),n=g("br")},l(s){l=G(s,e),t=G(s," i kundvagner"),n=v(s,"BR",{})},m(s,a){$(s,l,a),$(s,t,a),$(s,n,a)},p(s,a){a&1&&e!==(e=s[0].consumablesInCart.length+"")&&fe(l,e)},d(s){s&&(_(l),_(t),_(n))}}}function dt(r){let e;function l(s,a){return s[0].reservations.length>1?il:al}let t=l(r),n=t(r);return{c(){n.c(),e=de()},l(s){n.l(s),e=de()},m(s,a){n.m(s,a),$(s,e,a)},p(s,a){t===(t=l(s))&&n?n.p(s,a):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&_(e),n.d(s)}}}function al(r){let e,l;return{c(){e=z("1 reservation"),l=g("br")},l(t){e=G(t,"1 reservation"),l=v(t,"BR",{})},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(_(e),_(l))}}}function il(r){let e=r[0].reservations.length+"",l,t,n;return{c(){l=z(e),t=z(" reservationer"),n=g("br")},l(s){l=G(s,e),t=G(s," reservationer"),n=v(s,"BR",{})},m(s,a){$(s,l,a),$(s,t,a),$(s,n,a)},p(s,a){a&1&&e!==(e=s[0].reservations.length+"")&&fe(l,e)},d(s){s&&(_(l),_(t),_(n))}}}function ht(r){let e,l;return e=new je({props:{consumables:r[0].consumablesInCart,title:"I kundvagn"}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.consumables=t[0].consumablesInCart),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function pt(r){let e,l;return e=new je({props:{consumables:r[0].reservations,title:"Reservationer"}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.consumables=t[0].reservations),e.$set(s)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function ol(r){let e,l,t,n,s=r[1].title+"",a,i,o,m,b,f,p,k,Y=r[0].purchasedConsumables.length+"",M,V,O,ie,ee,ce,F,_e,me,Q,y,K,se,U,re;e=new Tt({props:{title:r[1].title}});let q=r[1].description&&ut(r),w=r[1].questions.length>0&&ft(r),B=r[0].consumablesInCart.length>0&&mt(r),C=r[0].reservations.length>0&&dt(r);y=new je({props:{questions:r[1].questions,consumables:r[0].purchasedConsumables,title:"Köpta biljetter"}});let L=r[0].consumablesInCart.length>0&&ht(r),S=r[0].reservations.length>0&&pt(r);return{c(){J(e.$$.fragment),l=H(),t=g("div"),n=g("h1"),a=z(s),i=H(),o=g("a"),m=z("Redigera biljett"),b=H(),q&&q.c(),f=H(),w&&w.c(),p=H(),k=g("p"),M=z(Y),V=z(" köpta "),O=g("br"),ie=H(),B&&B.c(),ee=H(),C&&C.c(),ce=H(),F=g("a"),_e=g("span"),me=z(" Ladda ner CSV"),Q=H(),J(y.$$.fragment),K=H(),L&&L.c(),se=H(),S&&S.c(),U=de(),this.h()},l(u){W(e.$$.fragment,u),l=P(u),t=v(u,"DIV",{class:!0});var A=D(t);n=v(A,"H1",{class:!0});var I=D(n);a=G(I,s),I.forEach(_),i=P(A),o=v(A,"A",{href:!0,class:!0});var te=D(o);m=G(te,"Redigera biljett"),te.forEach(_),A.forEach(_),b=P(u),q&&q.l(u),f=P(u),w&&w.l(u),p=P(u),k=v(u,"P",{});var j=D(k);M=G(j,Y),V=G(j," köpta "),O=v(j,"BR",{}),ie=P(j),B&&B.l(j),ee=P(j),C&&C.l(j),j.forEach(_),ce=P(u),F=v(u,"A",{href:!0,class:!0});var ve=D(F);_e=v(ve,"SPAN",{class:!0}),D(_e).forEach(_),me=G(ve," Ladda ner CSV"),ve.forEach(_),Q=P(u),W(y.$$.fragment,u),K=P(u),L&&L.l(u),se=P(u),S&&S.l(u),U=de(),this.h()},h(){T(n,"class","text-2xl"),T(o,"href",r[2]("edit",void 0)),T(o,"class","btn btn-secondary"),T(t,"class","flex justify-between"),T(_e,"class","i-mdi-download"),T(F,"href",r[2]("manage/download-csv",void 0)),T(F,"class","btn btn-primary btn-sm mt-2")},m(u,A){X(e,u,A),$(u,l,A),$(u,t,A),d(t,n),d(n,a),d(t,i),d(t,o),d(o,m),$(u,b,A),q&&q.m(u,A),$(u,f,A),w&&w.m(u,A),$(u,p,A),$(u,k,A),d(k,M),d(k,V),d(k,O),d(k,ie),B&&B.m(k,null),d(k,ee),C&&C.m(k,null),$(u,ce,A),$(u,F,A),d(F,_e),d(F,me),$(u,Q,A),X(y,u,A),$(u,K,A),L&&L.m(u,A),$(u,se,A),S&&S.m(u,A),$(u,U,A),re=!0},p(u,[A]){const I={};A&2&&(I.title=u[1].title),e.$set(I),(!re||A&2)&&s!==(s=u[1].title+"")&&fe(a,s),u[1].description?q?q.p(u,A):(q=ut(u),q.c(),q.m(f.parentNode,f)):q&&(q.d(1),q=null),u[1].questions.length>0?w?w.p(u,A):(w=ft(u),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null),(!re||A&1)&&Y!==(Y=u[0].purchasedConsumables.length+"")&&fe(M,Y),u[0].consumablesInCart.length>0?B?B.p(u,A):(B=mt(u),B.c(),B.m(k,ee)):B&&(B.d(1),B=null),u[0].reservations.length>0?C?C.p(u,A):(C=dt(u),C.c(),C.m(k,null)):C&&(C.d(1),C=null);const te={};A&2&&(te.questions=u[1].questions),A&1&&(te.consumables=u[0].purchasedConsumables),y.$set(te),u[0].consumablesInCart.length>0?L?(L.p(u,A),A&1&&E(L,1)):(L=ht(u),L.c(),E(L,1),L.m(se.parentNode,se)):L&&(be(),N(L,1,1,()=>{L=null}),ge()),u[0].reservations.length>0?S?(S.p(u,A),A&1&&E(S,1)):(S=pt(u),S.c(),E(S,1),S.m(U.parentNode,U)):S&&(be(),N(S,1,1,()=>{S=null}),ge())},i(u){re||(E(e.$$.fragment,u),E(y.$$.fragment,u),E(L),E(S),re=!0)},o(u){N(e.$$.fragment,u),N(y.$$.fragment,u),N(L),N(S),re=!1},d(u){u&&(_(l),_(t),_(b),_(f),_(p),_(k),_(ce),_(F),_(Q),_(K),_(se),_(U)),Z(e,u),q&&q.d(u),w&&w.d(u),B&&B.d(),C&&C.d(),Z(y,u),L&&L.d(u),S&&S.d(u)}}}function ul(r,e,l){let t,{data:n}=e;const s=Ne("$paraglide-adapter-sveltekit:context");function a(i,o){return typeof i!="string"||!s?i:s.translateHref(i,o)}return r.$$set=i=>{"data"in i&&l(0,n=i.data)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=n.ticket)},[n,t,a]}class $l extends He{constructor(e){super(),Pe(this,e,ul,ol,De,{data:0})}}export{$l as component};
