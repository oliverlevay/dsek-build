import{s as te,e as T,j as C,t as O,a as N,b as w,d as g,k as I,o as j,f as k,i as F,q as D,G as le,S as ie,l as ae,C as S,R as oe,m as ue,n as me}from"../chunks/scheduler.DK5noefF.js";import{S as ne,i as se,t as E,g as Y,b as v,e as R,c as U,a as $,m as B,d as P}from"../chunks/index.OECaLbXR.js";import{b as V}from"../chunks/public.D6ikzIky.js";import{P as de}from"../chunks/Pagination.C3TH-bth.js";import{S as ce}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{a as K}from"../chunks/apiNames.G3FqMHey.js";import{i as q}from"../chunks/authorization.BfNSR1Nc.js";import{m as _e,dV as G,dW as H,ap as pe,e2 as ge}from"../chunks/messages.DZzIl59o.js";import{e as M}from"../chunks/each.Dbd03sI1.js";import{D as he}from"../chunks/servePdf.DVfB6ULO.js";import{F as be}from"../chunks/FileLink.Bn_2gEpu.js";import{p as Ee}from"../chunks/stores.BdoTh84D.js";function J(r,e,i){const t=r.slice();return t[8]=e[i],t}function Q(r){let e,i,t=M(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Z(J(r,t,s));const a=s=>v(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=S()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);e=S()},m(s,f){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(s,f);F(s,e,f),i=!0},p(s,f){if(f&92){t=M(s[2]);let n;for(n=0;n<t.length;n+=1){const u=J(s,t,n);l[n]?(l[n].p(u,f),E(l[n],1)):(l[n]=Z(u),l[n].c(),E(l[n],1),l[n].m(e.parentNode,e))}for(Y(),n=t.length;n<l.length;n+=1)a(n);R()}},i(s){if(!i){for(let f=0;f<t.length;f+=1)E(l[f]);i=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)v(l[f]);i=!1},d(s){s&&g(e),oe(l,s)}}}function ke(r){let e,i,t,l=q(K.FILES.BUCKET(V).DELETE,r[6].data.user)&&r[3],a,s;i=new be({props:{name:r[8].name,url:r[8].url}});let f=l&&X(r);return{c(){e=T("div"),U(i.$$.fragment),t=C(),f&&f.c(),a=C(),this.h()},l(n){e=N(n,"DIV",{class:!0});var u=w(e);$(i.$$.fragment,u),t=I(u),f&&f.l(u),a=I(u),u.forEach(g),this.h()},h(){k(e,"class","flex flex-row gap-1")},m(n,u){F(n,e,u),B(i,e,null),D(e,t),f&&f.m(e,null),D(e,a),s=!0},p(n,u){const h={};u&4&&(h.name=n[8].name),u&4&&(h.url=n[8].url),i.$set(h),u&72&&(l=q(K.FILES.BUCKET(V).DELETE,n[6].data.user)&&n[3]),l?f?(f.p(n,u),u&72&&E(f,1)):(f=X(n),f.c(),E(f,1),f.m(e,a)):f&&(Y(),v(f,1,1,()=>{f=null}),R())},i(n){s||(E(i.$$.fragment,n),E(f),s=!0)},o(n){v(i.$$.fragment,n),v(f),s=!1},d(n){n&&g(e),P(i),f&&f.d()}}}function Fe(r){let e,i;return e=new re({props:{name:r[8].name,folders:r[8].files,expanded:!1,isEditing:r[3],deleteForm:r[4]}}),{c(){U(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){B(e,t,l),i=!0},p(t,l){const a={};l&4&&(a.name=t[8].name),l&4&&(a.folders=t[8].files),l&8&&(a.isEditing=t[3]),l&16&&(a.deleteForm=t[4]),e.$set(a)},i(t){i||(E(e.$$.fragment,t),i=!0)},o(t){v(e.$$.fragment,t),i=!1},d(t){P(e,t)}}}function X(r){let e,i;return e=new he({props:{fileId:r[8].id,fileName:r[8].name,data:r[4]}}),{c(){U(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){B(e,t,l),i=!0},p(t,l){const a={};l&4&&(a.fileId=t[8].id),l&4&&(a.fileName=t[8].name),l&16&&(a.data=t[4]),e.$set(a)},i(t){i||(E(e.$$.fragment,t),i=!0)},o(t){v(e.$$.fragment,t),i=!1},d(t){P(e,t)}}}function Z(r){let e,i,t,l;const a=[Fe,ke],s=[];function f(n,u){return n[8].isFolder?0:1}return e=f(r),i=s[e]=a[e](r),{c(){i.c(),t=S()},l(n){i.l(n),t=S()},m(n,u){s[e].m(n,u),F(n,t,u),l=!0},p(n,u){let h=e;e=f(n),e===h?s[e].p(n,u):(Y(),v(s[h],1,1,()=>{s[h]=null}),R(),i=s[e],i?i.p(n,u):(i=s[e]=a[e](n),i.c()),E(i,1),i.m(t.parentNode,t))},i(n){l||(E(i),l=!0)},o(n){v(i),l=!1},d(n){n&&g(t),s[e].d(n)}}}function ve(r){let e,i,t,l,a,s,f,n,u,h,_,m=r[0]&&Q(r);return{c(){e=T("div"),i=T("button"),t=T("span"),a=C(),s=O(r[1]),f=C(),n=T("div"),m&&m.c(),this.h()},l(p){e=N(p,"DIV",{class:!0,"data-tip":!0});var d=w(e);i=N(d,"BUTTON",{});var o=w(i);t=N(o,"SPAN",{class:!0}),w(t).forEach(g),a=I(o),s=j(o,r[1]),o.forEach(g),d.forEach(g),f=I(p),n=N(p,"DIV",{class:!0});var c=w(n);m&&m.l(c),c.forEach(g),this.h()},h(){k(t,"class",l=r[5]+" align-text-top text-xl text-primary"),k(e,"class","flex"),k(e,"data-tip",r[1]),k(n,"class","m-2 border-l border-gray-400 pl-5")},m(p,d){F(p,e,d),D(e,i),D(i,t),D(i,a),D(i,s),F(p,f,d),F(p,n,d),m&&m.m(n,null),u=!0,h||(_=le(i,"click",r[7]),h=!0)},p(p,[d]){(!u||d&32&&l!==(l=p[5]+" align-text-top text-xl text-primary"))&&k(t,"class",l),(!u||d&2)&&ie(s,p[1]),(!u||d&2)&&k(e,"data-tip",p[1]),p[0]?m?(m.p(p,d),d&1&&E(m,1)):(m=Q(p),m.c(),E(m,1),m.m(n,null)):m&&(Y(),v(m,1,1,()=>{m=null}),R())},i(p){u||(E(m),u=!0)},o(p){v(m),u=!1},d(p){p&&(g(e),g(f),g(n)),m&&m.d(),h=!1,_()}}}function De(r,e){return r.isFolder&&!e.isFolder?-1:e.isFolder&&!r.isFolder?1:r.name.localeCompare(e.name,"sv")}function Te(r,e,i){let t,l;ae(r,Ee,_=>i(6,l=_));let{expanded:a=!0}=e,{name:s}=e,{folders:f}=e,{isEditing:n=!1}=e,{deleteForm:u}=e;function h(){i(0,a=!a)}return r.$$set=_=>{"expanded"in _&&i(0,a=_.expanded),"name"in _&&i(1,s=_.name),"folders"in _&&i(2,f=_.folders),"isEditing"in _&&i(3,n=_.isEditing),"deleteForm"in _&&i(4,u=_.deleteForm)},r.$$.update=()=>{r.$$.dirty&4&&f.sort(De),r.$$.dirty&1&&i(5,t=a?"i-mdi-folder-open-outline":"i-mdi-folder-outline")},[a,s,f,n,u,t,l,h]}class re extends ne{constructor(e){super(),se(this,e,Te,ve,te,{expanded:0,name:1,folders:2,isEditing:3,deleteForm:4})}}function y(r){let e,i,t=r[4]&&x(r),l=r[3]&&ee(r);return{c(){e=T("div"),t&&t.c(),i=C(),l&&l.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var s=w(e);t&&t.l(s),i=I(s),l&&l.l(s),s.forEach(g),this.h()},h(){k(e,"class","mb-4 flex flex-row gap-1")},m(a,s){F(a,e,s),t&&t.m(e,null),D(e,i),l&&l.m(e,null)},p(a,s){a[4]?t?t.p(a,s):(t=x(a),t.c(),t.m(e,i)):t&&(t.d(1),t=null),a[3]?l?l.p(a,s):(l=ee(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&g(e),t&&t.d(),l&&l.d()}}}function x(r){let e,i=pe()+"",t;return{c(){e=T("a"),t=O(i),this.h()},l(l){e=N(l,"A",{class:!0,href:!0});var a=w(e);t=j(a,i),a.forEach(g),this.h()},h(){k(e,"class","btn btn-primary btn-sm"),k(e,"href",r[6]("/documents/upload?type=requirement",void 0))},m(l,a){F(l,e,a),D(e,t)},p:me,d(l){l&&g(e)}}}function ee(r){let e,i=(r[2]?G():H())+"",t,l,a;return{c(){e=T("button"),t=O(i),this.h()},l(s){e=N(s,"BUTTON",{class:!0});var f=w(e);t=j(f,i),f.forEach(g),this.h()},h(){k(e,"class","btn btn-secondary btn-sm")},m(s,f){F(s,e,f),D(e,t),l||(a=le(e,"click",r[9]),l=!0)},p(s,f){f&4&&i!==(i=(s[2]?G():H())+"")&&ie(t,i)},d(s){s&&g(e),l=!1,a()}}}function Ne(r){let e,i,t,l,a=ge()+"",s,f,n,u,h,_,m,p;e=new ce({props:{title:_e()}}),n=new de({props:{class:"max-w-prose",count:r[5]-1981,getPageName:r[7],getPageNumber:r[8],fieldName:"year"}});let d=(r[4]||r[3])&&y(r);return m=new re({props:{name:"",folders:r[1],deleteForm:r[0].deleteForm,isEditing:r[2]}}),{c(){U(e.$$.fragment),i=C(),t=T("div"),l=T("span"),s=O(a),f=C(),U(n.$$.fragment),u=C(),d&&d.c(),h=C(),_=T("div"),U(m.$$.fragment),this.h()},l(o){$(e.$$.fragment,o),i=I(o),t=N(o,"DIV",{class:!0});var c=w(t);l=N(c,"SPAN",{class:!0});var b=w(l);s=j(b,a),b.forEach(g),f=I(c),$(n.$$.fragment,c),c.forEach(g),u=I(o),d&&d.l(o),h=I(o),_=N(o,"DIV",{class:!0});var A=w(_);$(m.$$.fragment,A),A.forEach(g),this.h()},h(){k(l,"class","text-lg"),k(t,"class","mb-4 flex w-full flex-col items-start gap-2"),k(_,"class","flex flex-col rounded-lg bg-base-200 p-5")},m(o,c){B(e,o,c),F(o,i,c),F(o,t,c),D(t,l),D(l,s),D(t,f),B(n,t,null),F(o,u,c),d&&d.m(o,c),F(o,h,c),F(o,_,c),B(m,_,null),p=!0},p(o,[c]){o[4]||o[3]?d?d.p(o,c):(d=y(o),d.c(),d.m(h.parentNode,h)):d&&(d.d(1),d=null);const b={};c&2&&(b.folders=o[1]),c&1&&(b.deleteForm=o[0].deleteForm),c&4&&(b.isEditing=o[2]),m.$set(b)},i(o){p||(E(e.$$.fragment,o),E(n.$$.fragment,o),E(m.$$.fragment,o),p=!0)},o(o){v(e.$$.fragment,o),v(n.$$.fragment,o),v(m.$$.fragment,o),p=!1},d(o){o&&(g(i),g(t),g(u),g(h),g(_)),P(e,o),P(n),d&&d.d(o),P(m)}}}function we(r,e,i){let t,l,{data:a}=e,s=!1;const f=new Date().getFullYear(),n=[];function u(o,c,b){var z;c.startsWith("/")&&(c=c.substring(1));const A=o.split("/")[0];if(o){const L=b==null?void 0:b.find(fe=>fe.name===A);let W;L?W=L.files:(b.push({id:"",url:"",name:A||"undefined",isFolder:!0,files:[]}),W=b[(b==null?void 0:b.length)-1].files),u(o.split("/").slice(1).join("/"),c+"/"+A,W)}else(z=a.folders[c])==null||z.forEach(L=>{b.push({id:L.id,name:L.name,isFolder:!1,url:L.thumbnailUrl?L.thumbnailUrl:"",files:[]})})}const h=ue("$paraglide-adapter-sveltekit:context");function _(o,c){return typeof o!="string"||!h?o:h.translateHref(o,c)}const m=o=>(f-o).toString(),p=o=>f-+o,d=()=>{i(2,s=!s)};return r.$$set=o=>{"data"in o&&i(0,a=o.data)},r.$$.update=()=>{r.$$.dirty&3&&(i(1,n.length=0,n),Object.keys(a.folders).forEach(o=>{u(o,"",n)})),r.$$.dirty&1&&i(4,t=q(K.FILES.BUCKET(V).CREATE,a.user)),r.$$.dirty&1&&i(3,l=q(K.FILES.BUCKET(V).DELETE,a.user))},[a,n,s,l,t,f,_,m,p,d]}class Oe extends ne{constructor(e){super(),se(this,e,we,Ne,te,{data:0})}}export{Oe as component};
