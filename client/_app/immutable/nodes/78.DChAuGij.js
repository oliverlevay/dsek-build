import{s as pe,e as E,j as O,t as H,a as w,b as S,d as u,k as U,o as W,f as g,i as M,q as m,G as Te,S as se,R as Ae,r as $e,Y as Ee,l as we,m as Se,n as be,C as ne}from"../chunks/scheduler.DK5noefF.js";import{S as ve,i as ke,c as X,a as Z,m as x,t as F,b as J,d as ee,f as Ce,e as De,g as ye}from"../chunks/index.OECaLbXR.js";import{e as te,u as oe,d as Ie,o as Ne}from"../chunks/each.Dbd03sI1.js";import{p as Pe}from"../chunks/stores.BdoTh84D.js";import{P as Ye}from"../chunks/Pagination.C3TH-bth.js";import{S as Me}from"../chunks/SearchBar.D5otZFyl.js";import{T as Re}from"../chunks/TagSelector.BFldg1VB.js";import{a as K}from"../chunks/apiNames.G3FqMHey.js";import{i as Q}from"../chunks/authorization.BfNSR1Nc.js";import{A as Ve}from"../chunks/AuthorSignature.DMwuj1EW.js";import{g as Ge}from"../chunks/redirect.D99U8wwi.js";import{d as ae}from"../chunks/dayjs.min.B27XEuZS.js";import{m as ie}from"../chunks/markdown-to-txt.B8OWY_su.js";import{f as Oe,ee as Ue,ef as je}from"../chunks/messages.DZzIl59o.js";import{S as qe}from"../chunks/SetPageTitle.Cf9LBAU4.js";function fe(n,e,l){const a=n.slice();return a[2]=e[l],a}function ce(n){let e,l=n[2].name+"",a;return{c(){e=E("span"),a=H(l),this.h()},l(r){e=w(r,"SPAN",{class:!0});var t=S(e);a=W(t,l),t.forEach(u),this.h()},h(){g(e,"class","badge text-xs text-neutral-600")},m(r,t){M(r,e,t),m(e,a)},p(r,t){t&1&&l!==(l=r[2].name+"")&&se(a,l)},d(r){r&&u(e)}}}function Le(n){let e=ae(n[0].createdAt).fromNow()+"",l;return{c(){l=H(e)},l(a){l=W(a,e)},m(a,r){M(a,l,r)},p(a,r){r&1&&e!==(e=ae(a[0].createdAt).fromNow()+"")&&se(l,e)},d(a){a&&u(l)}}}function Be(n){let e=ae(n[0].createdAt).format("YYYY-MM-DD")+"",l;return{c(){l=H(e)},l(a){l=W(a,e)},m(a,r){M(a,l,r)},p(a,r){r&1&&e!==(e=ae(a[0].createdAt).format("YYYY-MM-DD")+"")&&se(l,e)},d(a){a&&u(l)}}}function He(n){let e,l;function a(i,c){return c&1&&(l=null),l==null&&(l=ae(i[0].createdAt).diff(ae(),"week")<-1),l?Be:Le}let r=a(n,-1),t=r(n);return{c(){e=E("p"),t.c(),this.h()},l(i){e=w(i,"P",{class:!0,slot:!0});var c=S(e);t.l(c),c.forEach(u),this.h()},h(){g(e,"class","my-1 self-end text-nowrap text-xs font-light text-neutral-600"),g(e,"slot","end")},m(i,c){M(i,e,c),t.m(e,null)},p(i,c){r===(r=a(i,c))&&t?t.p(i,c):(t.d(1),t=r(i),t&&(t.c(),t.m(e,null)))},d(i){i&&u(e),t.d()}}}function We(n){var Y;let e,l,a,r,t,i,c,y,C=n[0].header+"",R,k,h,I=ie(n[0].body,{pedantic:!0})+"",q,L,N,V,P,T,j=te(n[0].tags),p=[];for(let f=0;f<j.length;f+=1)p[f]=ce(fe(n,j,f));return N=new Ve({props:{member:n[0].author.member,position:(Y=n[0].author.mandate)==null?void 0:Y.position,customAuthor:n[0].author.customAuthor??void 0,type:n[0].author.type,$$slots:{end:[He]},$$scope:{ctx:n}}}),{c(){e=E("article"),l=E("div"),a=E("div");for(let f=0;f<p.length;f+=1)p[f].c();r=O(),t=E("div"),i=E("div"),c=E("button"),y=E("h1"),R=H(C),k=O(),h=E("div"),q=H(I),L=O(),X(N.$$.fragment),this.h()},l(f){e=w(f,"ARTICLE",{class:!0});var v=S(e);l=w(v,"DIV",{class:!0});var A=S(l);a=w(A,"DIV",{class:!0});var G=S(a);for(let s=0;s<p.length;s+=1)p[s].l(G);G.forEach(u),A.forEach(u),r=U(v),t=w(v,"DIV",{class:!0});var b=S(t);i=w(b,"DIV",{class:!0});var d=S(i);c=w(d,"BUTTON",{class:!0});var $=S(c);y=w($,"H1",{class:!0});var B=S(y);R=W(B,C),B.forEach(u),k=U($),h=w($,"DIV",{class:!0});var le=S(h);q=W(le,I),le.forEach(u),$.forEach(u),d.forEach(u),L=U(b),Z(N.$$.fragment,b),b.forEach(u),v.forEach(u),this.h()},h(){g(a,"class","flex flex-wrap gap-2"),g(l,"class","flex justify-between gap-4 bg-base-300 p-4"),g(y,"class","text-2xl font-bold group-hover:underline"),g(h,"class","prose mb-8 mt-2 line-clamp-3 prose-headings:text-sm"),g(c,"class","group text-start"),g(i,"class","flex-1"),g(t,"class","flex flex-col items-stretch overflow-hidden p-8"),g(e,"class","row-span-2 grid grid-rows-subgrid gap-0 overflow-hidden rounded-xl bg-base-200")},m(f,v){M(f,e,v),m(e,l),m(l,a);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(a,null);m(e,r),m(e,t),m(t,i),m(i,c),m(c,y),m(y,R),m(c,k),m(c,h),m(h,q),m(t,L),x(N,t,null),V=!0,P||(T=Te(c,"click",n[1]),P=!0)},p(f,[v]){var G;if(v&1){j=te(f[0].tags);let b;for(b=0;b<j.length;b+=1){const d=fe(f,j,b);p[b]?p[b].p(d,v):(p[b]=ce(d),p[b].c(),p[b].m(a,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=j.length}(!V||v&1)&&C!==(C=f[0].header+"")&&se(R,C),(!V||v&1)&&I!==(I=ie(f[0].body,{pedantic:!0})+"")&&se(q,I);const A={};v&1&&(A.member=f[0].author.member),v&1&&(A.position=(G=f[0].author.mandate)==null?void 0:G.position),v&1&&(A.customAuthor=f[0].author.customAuthor??void 0),v&1&&(A.type=f[0].author.type),v&33&&(A.$$scope={dirty:v,ctx:f}),N.$set(A)},i(f){V||(F(N.$$.fragment,f),V=!0)},o(f){J(N.$$.fragment,f),V=!1},d(f){f&&u(e),Ae(p,f),ee(N),P=!1,T()}}}function ze(n,e,l){let{article:a}=e;const r=()=>Ge("news/"+a.slug);return n.$$set=t=>{"article"in t&&l(0,a=t.article)},[a,r]}class Fe extends ve{constructor(e){super(),ke(this,e,ze,We,pe,{article:0})}}function ue(n,e,l){const a=n.slice();return a[10]=e[l],a}function he(n,e,l){const a=n.slice();return a[13]=e[l],a}function me(n,e){let l,a;return{key:n,first:null,c(){l=E("input"),this.h()},l(r){l=w(r,"INPUT",{type:!0,name:!0}),this.h()},h(){g(l,"type","hidden"),g(l,"name","tags"),l.value=a=e[13].name,this.first=l},m(r,t){M(r,l,t)},p(r,t){e=r,t&2&&a!==(a=e[13].name)&&(l.value=a)},d(r){r&&u(l)}}}function _e(n){let e,l=Ue()+"",a;return{c(){e=E("a"),a=H(l),this.h()},l(r){e=w(r,"A",{class:!0,href:!0});var t=S(e);a=W(t,l),t.forEach(u),this.h()},h(){g(e,"class","btn"),g(e,"href",n[3]("/news/tags",void 0))},m(r,t){M(r,e,t),m(e,a)},p:be,d(r){r&&u(e)}}}function de(n){let e,l,a=je()+"",r;return{c(){e=E("a"),l=H("+ "),r=H(a),this.h()},l(t){e=w(t,"A",{class:!0,href:!0});var i=S(e);l=W(i,"+ "),r=W(i,a),i.forEach(u),this.h()},h(){g(e,"class","btn btn-primary"),g(e,"href",n[3]("/news/create",void 0))},m(t,i){M(t,e,i),m(e,l),m(e,r)},p:be,d(t){t&&u(e)}}}function ge(n,e){let l,a,r;return a=new Fe({props:{article:e[10]}}),{key:n,first:null,c(){l=ne(),X(a.$$.fragment),this.h()},l(t){l=ne(),Z(a.$$.fragment,t),this.h()},h(){this.first=l},m(t,i){M(t,l,i),x(a,t,i),r=!0},p(t,i){e=t;const c={};i&1&&(c.article=e[10]),a.$set(c)},i(t){r||(F(a.$$.fragment,t),r=!0)},o(t){J(a.$$.fragment,t),r=!1},d(t){t&&u(l),ee(a,t)}}}function Je(n){let e,l,a,r,t,i,c,y,C,R,k=[],h=new Map,I,q=Q(K.TAGS.CREATE,n[0].user)||Q(K.TAGS.UPDATE,n[0].user),L,N=Q(K.NEWS.CREATE,n[0].user),V,P,T=[],j=new Map,p,Y,f;e=new qe({props:{title:Oe()}});function v(s){n[5](s)}let A={allTags:n[0].allTags,onChange:n[4]};n[1]!==void 0&&(A.selectedTags=n[1]),i=new Re({props:A}),$e.push(()=>Ce(i,"selectedTags",v)),C=new Me({});let G=te(n[1]);const b=s=>s[13].id;for(let s=0;s<G.length;s+=1){let o=he(n,G,s),_=b(o);h.set(_,k[s]=me(_,o))}let d=q&&_e(n),$=N&&de(n),B=te(n[0].articles);const le=s=>s[10].id;for(let s=0;s<B.length;s+=1){let o=ue(n,B,s),_=le(o);j.set(_,T[s]=ge(_,o))}return Y=new Ye({props:{count:n[0].pageCount}}),{c(){X(e.$$.fragment),l=O(),a=E("div"),r=E("section"),t=E("form"),X(i.$$.fragment),y=O(),X(C.$$.fragment),R=O();for(let s=0;s<k.length;s+=1)k[s].c();I=O(),d&&d.c(),L=O(),$&&$.c(),V=O(),P=E("section");for(let s=0;s<T.length;s+=1)T[s].c();p=O(),X(Y.$$.fragment),this.h()},l(s){Z(e.$$.fragment,s),l=U(s),a=w(s,"DIV",{class:!0});var o=S(a);r=w(o,"SECTION",{});var _=S(r);t=w(_,"FORM",{method:!0,class:!0,id:!0});var D=S(t);Z(i.$$.fragment,D),y=U(D),Z(C.$$.fragment,D),R=U(D);for(let z=0;z<k.length;z+=1)k[z].l(D);I=U(D),d&&d.l(D),L=U(D),$&&$.l(D),D.forEach(u),_.forEach(u),V=U(o),P=w(o,"SECTION",{class:!0});var re=S(P);for(let z=0;z<T.length;z+=1)T[z].l(re);re.forEach(u),p=U(o),Z(Y.$$.fragment,o),o.forEach(u),this.h()},h(){g(t,"method","get"),g(t,"class","form-control flex-1 gap-2 md:flex-row md:items-end"),g(t,"id","filter-form"),g(P,"class","grid grid-cols-1 gap-8 md:grid-cols-2"),g(a,"class","space-y-4")},m(s,o){x(e,s,o),M(s,l,o),M(s,a,o),m(a,r),m(r,t),x(i,t,null),m(t,y),x(C,t,null),m(t,R);for(let _=0;_<k.length;_+=1)k[_]&&k[_].m(t,null);m(t,I),d&&d.m(t,null),m(t,L),$&&$.m(t,null),n[6](t),m(a,V),m(a,P);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(P,null);m(a,p),x(Y,a,null),f=!0},p(s,[o]){const _={};o&1&&(_.allTags=s[0].allTags),o&4&&(_.onChange=s[4]),!c&&o&2&&(c=!0,_.selectedTags=s[1],Ee(()=>c=!1)),i.$set(_),o&2&&(G=te(s[1]),k=oe(k,o,b,1,s,G,h,t,Ie,me,I,he)),o&1&&(q=Q(K.TAGS.CREATE,s[0].user)||Q(K.TAGS.UPDATE,s[0].user)),q?d?d.p(s,o):(d=_e(s),d.c(),d.m(t,L)):d&&(d.d(1),d=null),o&1&&(N=Q(K.NEWS.CREATE,s[0].user)),N?$?$.p(s,o):($=de(s),$.c(),$.m(t,null)):$&&($.d(1),$=null),o&1&&(B=te(s[0].articles),ye(),T=oe(T,o,le,1,s,B,j,P,Ne,ge,null,ue),De());const D={};o&1&&(D.count=s[0].pageCount),Y.$set(D)},i(s){if(!f){F(e.$$.fragment,s),F(i.$$.fragment,s),F(C.$$.fragment,s);for(let o=0;o<B.length;o+=1)F(T[o]);F(Y.$$.fragment,s),f=!0}},o(s){J(e.$$.fragment,s),J(i.$$.fragment,s),J(C.$$.fragment,s);for(let o=0;o<T.length;o+=1)J(T[o]);J(Y.$$.fragment,s),f=!1},d(s){s&&(u(l),u(a)),ee(e,s),ee(i),ee(C);for(let o=0;o<k.length;o+=1)k[o].d();d&&d.d(),$&&$.d(),n[6](null);for(let o=0;o<T.length;o+=1)T[o].d();ee(Y)}}}function Ke(n,e,l){let a;we(n,Pe,h=>l(7,a=h));let{data:r}=e,t=r.allTags.filter(h=>a.url.searchParams.getAll("tags").includes(h.name)),i;const c=Se("$paraglide-adapter-sveltekit:context");function y(h,I){return typeof h!="string"||!c?h:c.translateHref(h,I)}const C=()=>setTimeout(()=>i.requestSubmit());function R(h){t=h,l(1,t)}function k(h){$e[h?"unshift":"push"](()=>{i=h,l(2,i)})}return n.$$set=h=>{"data"in h&&l(0,r=h.data)},[r,t,i,y,C,R,k]}class ut extends ve{constructor(e){super(),ke(this,e,Ke,Je,pe,{data:0})}}export{ut as component};
