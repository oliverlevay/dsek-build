import{s as ye,e as N,j as U,a as T,b as O,k as C,d as y,f,L as ce,K as ne,i as Z,q as b,G as R,M as ve,n as te,w as ke,a9 as st,a3 as ut,a2 as ct,m as Fe,p as ae,r as De,E as ft,Q as Pe,l as ie,t as K,o as Q,S as z,C as se,P as $}from"../chunks/scheduler.DK5noefF.js";import{S as Me,i as Ne,c as fe,a as he,m as me,b as j,e as de,t as G,d as pe,g as _e}from"../chunks/index.OECaLbXR.js";import{e as He,u as ht,o as mt}from"../chunks/each.Dbd03sI1.js";import{M as dt}from"../chunks/MemberAvatar.DsenHHaP.js";import{g as ue}from"../chunks/member.Deknk2Gk.js";import{hu as Le,hv as We,hw as Oe,hx as pt,bC as _t,hy as gt}from"../chunks/messages.DZzIl59o.js";import{g as bt}from"../chunks/globals.D0QH3NT1.js";import{s as Ee,a as vt}from"../chunks/superForms.37TMp2uc.js";import"../chunks/index.DQfRr7yB.js";import{z as J}from"../chunks/index.DXqQCM1T.js";import{S as wt}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{z as Pt}from"../chunks/zod.DUpHobOl.js";function Ue(n,e,t){return n>=e*t?{width:e*t,height:e}:{width:n,height:n/t}}function we(n,e,t,l){return{x:Ce(n.x,e.width,t.width,l),y:Ce(n.y,e.height,t.height,l)}}function Ce(n,e,t,l){let i=e*l/2-t/2;return l<1&&(i=t/2-e*l/2),Math.min(i,Math.max(n,-i))}function Ye(n,e){return Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2))}function Et(n,e,t,l,i,r=!0){const o=r?yt:kt,a={x:o(100,((e.width-t.width/i)/2-n.x/i)/e.width*100),y:o(100,((e.height-t.height/i)/2-n.y/i)/e.height*100),width:o(100,t.width/e.width*100/i),height:o(100,t.height/e.height*100/i)},v=o(e.naturalWidth,a.width*e.naturalWidth/100,!0),m=o(e.naturalHeight,a.height*e.naturalHeight/100,!0),I=e.naturalWidth>=e.naturalHeight*l?{width:Math.round(m*l),height:m}:{width:v,height:Math.round(v/l)},L={...I,x:o(e.naturalWidth-I.width,a.x*e.naturalWidth/100,!0),y:o(e.naturalHeight-I.height,a.y*e.naturalHeight/100,!0)};return{croppedAreaPercentages:a,croppedAreaPixels:L}}function yt(n,e,t=!1){const l=t?Math.round(e):e;return Math.min(n,Math.max(0,l))}function kt(n,e){return e}function Xe(n,e){return{x:(e.x+n.x)/2,y:(e.y+n.y)/2}}const{window:Ft}=bt;function Ze(n){let e;return{c(){e=N("div"),this.h()},l(t){e=T(t,"DIV",{class:!0,style:!0,"data-testid":!0}),O(e).forEach(y),this.h()},h(){f(e,"class","cropperArea svelte-wphbcw"),ne(e,"width",n[8].width+"px"),ne(e,"height",n[8].height+"px"),f(e,"data-testid","cropper"),ae(e,"round",n[3]==="round"),ae(e,"grid",n[4])},m(t,l){Z(t,e,l)},p(t,l){l[0]&256&&ne(e,"width",t[8].width+"px"),l[0]&256&&ne(e,"height",t[8].height+"px"),l[0]&8&&ae(e,"round",t[3]==="round"),l[0]&16&&ae(e,"grid",t[4])},d(t){t&&y(e)}}}function Mt(n){let e,t,l,i,r,o,a=n[8]&&Ze(n);return{c(){e=N("div"),t=N("img"),i=U(),a&&a.c(),this.h()},l(v){e=T(v,"DIV",{class:!0,tabindex:!0,role:!0,"data-testid":!0});var m=O(e);t=T(m,"IMG",{class:!0,src:!0,alt:!0,style:!0,crossorigin:!0}),i=C(m),a&&a.l(m),m.forEach(y),this.h()},h(){f(t,"class","image svelte-wphbcw"),ce(t.src,l=n[2])||f(t,"src",l),f(t,"alt",""),ne(t,"transform","translate("+n[1].x+"px, "+n[1].y+"px) scale("+n[0]+")"),f(t,"crossorigin",n[5]),f(e,"class","container svelte-wphbcw"),f(e,"tabindex",n[6]),f(e,"role","button"),f(e,"data-testid","container")},m(v,m){Z(v,e,m),b(e,t),n[21](t),b(e,i),a&&a.m(e,null),n[22](e),r||(o=[R(Ft,"resize",n[11]),R(t,"load",n[10]),R(e,"mousedown",ve(n[12])),R(e,"touchstart",ve(n[13]),{passive:!1}),R(e,"wheel",ve(n[14]),{passive:!1})],r=!0)},p(v,m){m[0]&4&&!ce(t.src,l=v[2])&&f(t,"src",l),m[0]&3&&ne(t,"transform","translate("+v[1].x+"px, "+v[1].y+"px) scale("+v[0]+")"),m[0]&32&&f(t,"crossorigin",v[5]),v[8]?a?a.p(v,m):(a=Ze(v),a.c(),a.m(e,null)):a&&(a.d(1),a=null),m[0]&64&&f(e,"tabindex",v[6])},i:te,o:te,d(v){v&&y(e),n[21](null),a&&a.d(),n[22](null),r=!1,ke(o)}}}function Nt(n,e,t){let{image:l}=e,{crop:i={x:0,y:0}}=e,{zoom:r=1}=e,{aspect:o=4/3}=e,{minZoom:a=1}=e,{maxZoom:v=3}=e,{cropSize:m=null}=e,{cropShape:H="rect"}=e,{showGrid:I=!0}=e,{zoomSpeed:L=1}=e,{crossOrigin:Y=null}=e,{restrictPosition:P=!0}=e,{tabindex:F=void 0}=e,d=null,W={width:0,height:0,naturalWidth:0,naturalHeight:0},w=null,S=null,A=null,B={x:0,y:0},M={x:0,y:0},D=0,g=null,k=null;const u=st();ut(()=>{A&&A.complete&&E(),w&&(w.addEventListener("gesturestart",h),w.addEventListener("gesturechange",h))}),ct(()=>{w&&(w.removeEventListener("gesturestart",h),w.removeEventListener("gesturechange",h)),c()});const h=s=>s.preventDefault(),c=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",le),document.removeEventListener("touchmove",Ie),document.removeEventListener("touchend",le))},E=()=>{_(),oe()},p=()=>m?m.width/m.height:o,_=()=>{A&&(W={width:A.width,height:A.height,naturalWidth:A.naturalWidth,naturalHeight:A.naturalHeight},t(8,d=m||Ue(A.width,A.height,o))),w&&(S=w.getBoundingClientRect())},V=s=>({x:Number(s.clientX),y:Number(s.clientY)}),re=s=>({x:Number(s.clientX),y:Number(s.clientY)}),xe=s=>{document.addEventListener("mousemove",Te),document.addEventListener("mouseup",le),ge(V(s))},Te=s=>be(V(s)),$e=s=>{document.addEventListener("touchmove",Ie,{passive:!1}),document.addEventListener("touchend",le),s.touches.length===2?et(s):s.touches.length===1&&ge(re(s.touches[0]))},Ie=s=>{s.preventDefault(),s.touches.length===2?tt(s):s.touches.length===1&&be(re(s.touches[0]))},ge=({x:s,y:X})=>{B={x:s,y:X},M={x:i.x,y:i.y}},be=({x:s,y:X})=>{g&&window.cancelAnimationFrame(g),g=window.requestAnimationFrame(()=>{if(s===void 0||X===void 0||!d)return;const q=s-B.x,ee=X-B.y,x={x:M.x+q,y:M.y+ee};t(1,i=P?we(x,W,d,r):x)})},le=()=>{c(),oe()},et=s=>{const X=re(s.touches[0]),q=re(s.touches[1]);D=Ye(X,q),ge(Xe(X,q))},tt=s=>{const X=re(s.touches[0]),q=re(s.touches[1]),ee=Xe(X,q);be(ee),k&&window.cancelAnimationFrame(k),k=window.requestAnimationFrame(()=>{const x=Ye(X,q),at=r*(x/D);Ae(at,ee),D=x})},rt=s=>{const X=V(s),q=r-s.deltaY*L/200;Ae(q,X)},nt=({x:s,y:X})=>{if(!S)throw new Error("The Cropper is not mounted");return{x:S.width/2-(s-S.left),y:S.height/2-(X-S.top)}},it=({x:s,y:X})=>({x:(s+i.x)/r,y:(X+i.y)/r}),Ae=(s,X)=>{if(!d)return;const q=nt(X),ee=it(q);t(0,r=Math.min(v,Math.max(s,a)));const x={x:ee.x*r-q.x,y:ee.y*r-q.y};t(1,i=P?we(x,W,d,r):x)},oe=()=>{if(!d||d.width===0)return;const s=P?we(i,W,d,r):i,{croppedAreaPercentages:X,croppedAreaPixels:q}=Et(s,W,d,p(),r,P);u("cropcomplete",{percent:X,pixels:q})};Fe("$paraglide-adapter-sveltekit:context");function lt(s){De[s?"unshift":"push"](()=>{A=s,t(7,A)})}function ot(s){De[s?"unshift":"push"](()=>{w=s,t(9,w)})}return n.$$set=s=>{"image"in s&&t(2,l=s.image),"crop"in s&&t(1,i=s.crop),"zoom"in s&&t(0,r=s.zoom),"aspect"in s&&t(15,o=s.aspect),"minZoom"in s&&t(16,a=s.minZoom),"maxZoom"in s&&t(17,v=s.maxZoom),"cropSize"in s&&t(18,m=s.cropSize),"cropShape"in s&&t(3,H=s.cropShape),"showGrid"in s&&t(4,I=s.showGrid),"zoomSpeed"in s&&t(19,L=s.zoomSpeed),"crossOrigin"in s&&t(5,Y=s.crossOrigin),"restrictPosition"in s&&t(20,P=s.restrictPosition),"tabindex"in s&&t(6,F=s.tabindex)},n.$$.update=()=>{n.$$.dirty[0]&295040&&A&&t(8,d=m||Ue(A.width,A.height,o)),n.$$.dirty[0]&1&&r&&oe(),n.$$.dirty[0]&32768&&o&&(_(),oe())},[r,i,l,H,I,Y,F,A,d,w,E,_,xe,$e,rt,o,a,v,m,L,P,lt,ot]}class Tt extends Me{constructor(e){super(),Ne(this,e,Nt,Mt,ye,{image:2,crop:1,zoom:0,aspect:15,minZoom:16,maxZoom:17,cropSize:18,cropShape:3,showGrid:4,zoomSpeed:19,crossOrigin:5,restrictPosition:20,tabindex:6},null,[-1,-1])}}function Se(n){let e,t=n[3].url+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&8&&t!==(t=i[3].url+"")&&z(l,t)},d(i){i&&y(e)}}}function Be(n){let e,t=n[4].fileName+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&16&&t!==(t=i[4].fileName+"")&&z(l,t)},d(i){i&&y(e)}}}function It(n){let e,t,l,i,r,o,a,v,m,H,I,L,Y,P,F,d,W,w,S='<span class="i-mdi-delete"></span>',A,B,M=n[3].url&&Se(n),D=n[4].fileName&&Be(n);return{c(){e=N("div"),t=N("form"),l=N("input"),i=U(),M&&M.c(),r=U(),o=N("button"),a=N("div"),v=N("figure"),m=N("img"),Y=U(),P=N("form"),F=N("input"),d=U(),D&&D.c(),W=U(),w=N("button"),w.innerHTML=S,this.h()},l(g){e=T(g,"DIV",{class:!0});var k=O(e);t=T(k,"FORM",{method:!0,action:!0});var u=O(t);l=T(u,"INPUT",{type:!0,name:!0}),i=C(u),M&&M.l(u),r=C(u),o=T(u,"BUTTON",{type:!0});var h=O(o);a=T(h,"DIV",{class:!0});var c=O(a);v=T(c,"FIGURE",{class:!0});var E=O(v);m=T(E,"IMG",{src:!0,alt:!0}),E.forEach(y),c.forEach(y),h.forEach(y),u.forEach(y),Y=C(k),P=T(k,"FORM",{method:!0,action:!0});var p=O(P);F=T(p,"INPUT",{type:!0,name:!0}),d=C(p),D&&D.l(p),W=C(p),w=T(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(w)!=="svelte-vtr4nf"&&(w.innerHTML=S),p.forEach(y),k.forEach(y),this.h()},h(){f(l,"type","hidden"),l.value=n[1],f(l,"name","url"),ce(m.src,H=n[1])||f(m,"src",H),f(m,"alt",I=n[2]?Le():We()),f(v,"class","relative w-48"),f(a,"class",L="avatar overflow-hidden rounded-full border-8 "+(n[2]?"border-primary":"border-transparent")),f(o,"type","submit"),f(t,"method","POST"),f(t,"action",n[9]("?/change",void 0)),f(F,"type","hidden"),F.value=n[0],f(F,"name","fileName"),f(w,"class","btn btn-square btn-secondary btn-sm absolute bottom-1 right-1"),f(P,"method","POST"),f(P,"action",n[9]("?/delete",void 0)),f(e,"class","relative")},m(g,k){Z(g,e,k),b(e,t),b(t,l),b(t,i),M&&M.m(t,null),b(t,r),b(t,o),b(o,a),b(a,v),b(v,m),b(e,Y),b(e,P),b(P,F),b(P,d),D&&D.m(P,null),b(P,W),b(P,w),A||(B=[Pe(n[6].call(null,t)),Pe(n[8].call(null,P))],A=!0)},p(g,[k]){k&2&&(l.value=g[1]),g[3].url?M?M.p(g,k):(M=Se(g),M.c(),M.m(t,r)):M&&(M.d(1),M=null),k&2&&!ce(m.src,H=g[1])&&f(m,"src",H),k&4&&I!==(I=g[2]?Le():We())&&f(m,"alt",I),k&4&&L!==(L="avatar overflow-hidden rounded-full border-8 "+(g[2]?"border-primary":"border-transparent"))&&f(a,"class",L),k&1&&(F.value=g[0]),g[4].fileName?D?D.p(g,k):(D=Be(g),D.c(),D.m(P,W)):D&&(D.d(1),D=null)},i:te,o:te,d(g){g&&y(e),M&&M.d(),D&&D.d(),A=!1,ke(B)}}}function At(n,e,t){let l,i,{fileName:r}=e,{url:o}=e,{current:a=!1}=e,{changeForm:v}=e,{deleteForm:m}=e;const{errors:H,enhance:I}=Ee(v,{id:`change-${r}`});ie(n,H,d=>t(3,l=d));const{errors:L,enhance:Y}=Ee(m,{id:`delete-${r}`});ie(n,L,d=>t(4,i=d));const P=Fe("$paraglide-adapter-sveltekit:context");function F(d,W){return typeof d!="string"||!P?d:P.translateHref(d,W)}return n.$$set=d=>{"fileName"in d&&t(0,r=d.fileName),"url"in d&&t(1,o=d.url),"current"in d&&t(2,a=d.current),"changeForm"in d&&t(10,v=d.changeForm),"deleteForm"in d&&t(11,m=d.deleteForm)},[r,o,a,l,i,H,I,L,Y,F,v,m]}class Dt extends Me{constructor(e){super(),Ne(this,e,At,It,ye,{fileName:0,url:1,current:2,changeForm:10,deleteForm:11})}}J.object({url:J.string().url()});const Ht=J.object({image:J.instanceof(File,{message:Oe()}).refine(n=>n.size>0,{message:Oe()}).refine(n=>n.size<8e6,pt({size:"8MB"})),cropWidth:J.number().min(0).default(0),cropHeight:J.number().min(0).default(0),cropX:J.number().min(0).default(0),cropY:J.number().min(0).default(0)});J.object({fileName:J.string()});function qe(n,e,t){const l=n.slice();return l[26]=e[t],l}function Lt(n){let e,t,l,i,r,o,a,v,m,H,I,L,Y,P,F,d,W,w,S=_t()+"",A,B,M,D,g=n[3]&&Ge(n),k=n[7].cropX&&Re(n),u=n[7].cropY&&Ve(n),h=n[7].cropWidth&&je(n),c=n[7].cropHeight&&Ke(n),E=n[7].image&&Qe(n);return{c(){e=N("form"),g&&g.c(),t=U(),l=N("input"),i=U(),r=N("input"),o=U(),a=N("input"),v=U(),m=N("input"),H=U(),k&&k.c(),I=U(),u&&u.c(),L=U(),h&&h.c(),Y=U(),c&&c.c(),P=U(),F=N("input"),d=U(),E&&E.c(),W=U(),w=N("button"),A=K(S),this.h()},l(p){e=T(p,"FORM",{method:!0,action:!0,class:!0,enctype:!0});var _=O(e);g&&g.l(_),t=C(_),l=T(_,"INPUT",{type:!0,name:!0}),i=C(_),r=T(_,"INPUT",{type:!0,name:!0}),o=C(_),a=T(_,"INPUT",{type:!0,name:!0}),v=C(_),m=T(_,"INPUT",{type:!0,name:!0}),H=C(_),k&&k.l(_),I=C(_),u&&u.l(_),L=C(_),h&&h.l(_),Y=C(_),c&&c.l(_),P=C(_),F=T(_,"INPUT",{type:!0,accept:!0,name:!0,class:!0}),d=C(_),E&&E.l(_),W=C(_),w=T(_,"BUTTON",{type:!0,class:!0});var V=O(w);A=Q(V,S),V.forEach(y),_.forEach(y),this.h()},h(){f(l,"type","hidden"),f(l,"name","cropX"),f(r,"type","hidden"),f(r,"name","cropY"),f(a,"type","hidden"),f(a,"name","cropWidth"),f(m,"type","hidden"),f(m,"name","cropHeight"),f(F,"type","file"),f(F,"accept","image/*"),f(F,"name","image"),f(F,"class","file-input file-input-bordered w-full max-w-xs"),f(w,"type","submit"),f(w,"class","btn btn-primary"),f(e,"method","POST"),f(e,"action",n[14]("?/upload",void 0)),f(e,"class","form-control gap-2"),f(e,"enctype","multipart/form-data")},m(p,_){Z(p,e,_),g&&g.m(e,null),b(e,t),b(e,l),$(l,n[6].cropX),b(e,i),b(e,r),$(r,n[6].cropY),b(e,o),b(e,a),$(a,n[6].cropWidth),b(e,v),b(e,m),$(m,n[6].cropHeight),b(e,H),k&&k.m(e,null),b(e,I),u&&u.m(e,null),b(e,L),h&&h.m(e,null),b(e,Y),c&&c.m(e,null),b(e,P),b(e,F),b(e,d),E&&E.m(e,null),b(e,W),b(e,w),b(w,A),B=!0,M||(D=[R(l,"input",n[17]),R(r,"input",n[18]),R(a,"input",n[19]),R(m,"input",n[20]),R(F,"change",n[21]),R(F,"change",n[22]),Pe(n[11].call(null,e))],M=!0)},p(p,_){p[3]?g?(g.p(p,_),_&8&&G(g,1)):(g=Ge(p),g.c(),G(g,1),g.m(e,t)):g&&(_e(),j(g,1,1,()=>{g=null}),de()),_&64&&$(l,p[6].cropX),_&64&&$(r,p[6].cropY),_&64&&$(a,p[6].cropWidth),_&64&&$(m,p[6].cropHeight),p[7].cropX?k?k.p(p,_):(k=Re(p),k.c(),k.m(e,I)):k&&(k.d(1),k=null),p[7].cropY?u?u.p(p,_):(u=Ve(p),u.c(),u.m(e,L)):u&&(u.d(1),u=null),p[7].cropWidth?h?h.p(p,_):(h=je(p),h.c(),h.m(e,Y)):h&&(h.d(1),h=null),p[7].cropHeight?c?c.p(p,_):(c=Ke(p),c.c(),c.m(e,P)):c&&(c.d(1),c=null),p[7].image?E?E.p(p,_):(E=Qe(p),E.c(),E.m(e,W)):E&&(E.d(1),E=null)},i(p){B||(G(g),B=!0)},o(p){j(g),B=!1},d(p){p&&y(e),g&&g.d(),k&&k.d(),u&&u.d(),h&&h.d(),c&&c.d(),E&&E.d(),M=!1,ke(D)}}}function Wt(n){let e,t=gt()+"",l,i,r;return{c(){e=N("button"),l=K(t),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var a=O(e);l=Q(a,t),a.forEach(y),this.h()},h(){f(e,"class","btn btn-primary btn-lg")},m(o,a){Z(o,e,a),b(e,l),i||(r=R(e,"click",n[15]),i=!0)},p:te,i:te,o:te,d(o){o&&y(e),i=!1,r()}}}function Ge(n){let e,t,l;return t=new Tt({props:{aspect:1/1,cropShape:"round",showGrid:!1,image:n[3]}}),t.$on("cropcomplete",n[16]),{c(){e=N("div"),fe(t.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var r=O(e);he(t.$$.fragment,r),r.forEach(y),this.h()},h(){f(e,"class","relative h-[400px] w-[400px]")},m(i,r){Z(i,e,r),me(t,e,null),l=!0},p(i,r){const o={};r&8&&(o.image=i[3]),t.$set(o)},i(i){l||(G(t.$$.fragment,i),l=!0)},o(i){j(t.$$.fragment,i),l=!1},d(i){i&&y(e),pe(t)}}}function Re(n){let e,t=n[7].cropX+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&128&&t!==(t=i[7].cropX+"")&&z(l,t)},d(i){i&&y(e)}}}function Ve(n){let e,t=n[7].cropY+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&128&&t!==(t=i[7].cropY+"")&&z(l,t)},d(i){i&&y(e)}}}function je(n){let e,t=n[7].cropWidth+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&128&&t!==(t=i[7].cropWidth+"")&&z(l,t)},d(i){i&&y(e)}}}function Ke(n){let e,t=n[7].cropHeight+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&128&&t!==(t=i[7].cropHeight+"")&&z(l,t)},d(i){i&&y(e)}}}function Qe(n){let e,t=n[7].image+"",l;return{c(){e=N("p"),l=K(t),this.h()},l(i){e=T(i,"P",{class:!0});var r=O(e);l=Q(r,t),r.forEach(y),this.h()},h(){f(e,"class","text-error")},m(i,r){Z(i,e,r),b(e,l)},p(i,r){r&128&&t!==(t=i[7].image+"")&&z(l,t)},d(i){i&&y(e)}}}function Je(n){let e,t,l,i;return t=new Dt({props:{url:n[26].thumbnailUrl,current:n[5].picturePath===n[26].thumbnailUrl,fileName:n[26].name,changeForm:n[0].changeForm,deleteForm:n[0].deleteForm}}),{c(){e=N("div"),fe(t.$$.fragment),l=U(),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=O(e);he(t.$$.fragment,o),l=C(o),o.forEach(y),this.h()},h(){f(e,"class","relative")},m(r,o){Z(r,e,o),me(t,e,null),b(e,l),i=!0},p(r,o){const a={};o&16&&(a.url=r[26].thumbnailUrl),o&48&&(a.current=r[5].picturePath===r[26].thumbnailUrl),o&16&&(a.fileName=r[26].name),o&1&&(a.changeForm=r[0].changeForm),o&1&&(a.deleteForm=r[0].deleteForm),t.$set(a)},i(r){i||(G(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&y(e),pe(t)}}}function ze(n,e){let t,l,i,r=e[26].thumbnailUrl&&Je(e);return{key:n,first:null,c(){t=se(),r&&r.c(),l=se(),this.h()},l(o){t=se(),r&&r.l(o),l=se(),this.h()},h(){this.first=t},m(o,a){Z(o,t,a),r&&r.m(o,a),Z(o,l,a),i=!0},p(o,a){e=o,e[26].thumbnailUrl?r?(r.p(e,a),a&16&&G(r,1)):(r=Je(e),r.c(),G(r,1),r.m(l.parentNode,l)):r&&(_e(),j(r,1,1,()=>{r=null}),de())},i(o){i||(G(r),i=!0)},o(o){j(r),i=!1},d(o){o&&(y(t),y(l)),r&&r.d(o)}}}function Ot(n){let e,t,l,i,r,o,a,v=ue(n[5])+"",m,H,I=n[5].studentId+"",L,Y,P,F,d,W,w=[],S=new Map,A;e=new wt({props:{title:"Bio - "+ue(n[5])}}),i=new dt({props:{member:n[5],class:"w-32 rounded-lg"}});const B=[Wt,Lt],M=[];function D(u,h){return u[1]?1:0}F=D(n),d=M[F]=B[F](n);let g=He(n[4]);const k=u=>u[26].id;for(let u=0;u<g.length;u+=1){let h=qe(n,g,u),c=k(h);S.set(c,w[u]=ze(c,h))}return{c(){fe(e.$$.fragment),t=U(),l=N("header"),fe(i.$$.fragment),r=U(),o=N("div"),a=N("h1"),m=K(v),H=U(),L=K(I),Y=U(),P=N("div"),d.c(),W=U();for(let u=0;u<w.length;u+=1)w[u].c();this.h()},l(u){he(e.$$.fragment,u),t=C(u),l=T(u,"HEADER",{class:!0});var h=O(l);he(i.$$.fragment,h),r=C(h),o=T(h,"DIV",{class:!0});var c=O(o);a=T(c,"H1",{class:!0});var E=O(a);m=Q(E,v),E.forEach(y),H=C(c),L=Q(c,I),c.forEach(y),h.forEach(y),Y=C(u),P=T(u,"DIV",{class:!0});var p=O(P);d.l(p),W=C(p);for(let _=0;_<w.length;_+=1)w[_].l(p);p.forEach(y),this.h()},h(){f(a,"class","text-3xl font-bold"),f(o,"class","flex flex-col"),f(l,"class","flex gap-4"),f(P,"class","mt-4 flex flex-wrap items-start gap-4")},m(u,h){me(e,u,h),Z(u,t,h),Z(u,l,h),me(i,l,null),b(l,r),b(l,o),b(o,a),b(a,m),b(o,H),b(o,L),Z(u,Y,h),Z(u,P,h),M[F].m(P,null),b(P,W);for(let c=0;c<w.length;c+=1)w[c]&&w[c].m(P,null);A=!0},p(u,[h]){const c={};h&32&&(c.title="Bio - "+ue(u[5])),e.$set(c);const E={};h&32&&(E.member=u[5]),i.$set(E),(!A||h&32)&&v!==(v=ue(u[5])+"")&&z(m,v),(!A||h&32)&&I!==(I=u[5].studentId+"")&&z(L,I);let p=F;F=D(u),F===p?M[F].p(u,h):(_e(),j(M[p],1,1,()=>{M[p]=null}),de(),d=M[F],d?d.p(u,h):(d=M[F]=B[F](u),d.c()),G(d,1),d.m(P,W)),h&49&&(g=He(u[4]),_e(),w=ht(w,h,k,1,u,g,S,P,mt,ze,null,qe),de())},i(u){if(!A){G(e.$$.fragment,u),G(i.$$.fragment,u),G(d);for(let h=0;h<g.length;h+=1)G(w[h]);A=!0}},o(u){j(e.$$.fragment,u),j(i.$$.fragment,u),j(d);for(let h=0;h<w.length;h+=1)j(w[h]);A=!1},d(u){u&&(y(t),y(l),y(Y),y(P)),pe(e,u),pe(i),M[F].d();for(let h=0;h<w.length;h+=1)w[h].d()}}}function Ut(n,e,t){let l,i,r,o,a,{data:v}=e,m=!1,H={x:0,y:0,width:0,height:0};const{form:I,errors:L,enhance:Y}=Ee(v.uploadForm,{resetForm:!0,onResult(c){c.result.type==="success"&&(t(3,F=void 0),t(1,m=!1))},validators:Pt(Ht)});ie(n,I,c=>t(6,r=c)),ie(n,L,c=>t(7,o=c));const P=vt(I,"image");ie(n,P,c=>t(8,a=c));let F;const d=c=>{var p;let E=(p=c.currentTarget.files)==null?void 0:p[0];E&&createImageBitmap(E).then(_=>{let V=W(_);t(3,F=V)})},W=c=>{const E=document.createElement("canvas"),p=E.getContext("2d"),_=400,V=c.height/c.width*_;return E.width=_,E.height=V,p==null||p.drawImage(c,0,0,_,V),E.toDataURL()},w=Fe("$paraglide-adapter-sveltekit:context");function S(c,E){return typeof c!="string"||!w?c:w.translateHref(c,E)}const A=()=>{t(1,m=!0)},B=c=>{t(2,H=c.detail.pixels),I.update(E=>(E.cropX=H.x,E.cropY=H.y,E.cropWidth=H.width,E.cropHeight=H.height,E))};function M(){r.cropX=this.value,I.set(r)}function D(){r.cropY=this.value,I.set(r)}function g(){r.cropWidth=this.value,I.set(r)}function k(){r.cropHeight=this.value,I.set(r)}const u=c=>d(c);function h(){a=this.files,P.set(a)}return n.$$set=c=>{"data"in c&&t(0,v=c.data)},n.$$.update=()=>{n.$$.dirty&1&&t(5,l=v.member),n.$$.dirty&1&&t(4,i=v.photos)},[v,m,H,F,i,l,r,o,a,I,L,Y,P,d,S,A,B,M,D,g,k,u,h]}class Qt extends Me{constructor(e){super(),Ne(this,e,Ut,Ot,ye,{data:0})}}export{Qt as component};
