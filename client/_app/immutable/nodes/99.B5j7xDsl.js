import{s as ue,e as S,j as N,t as K,a as A,b as y,k as T,d as m,o as Q,f as p,i as D,q as v,R as ee,m as ce,n as he,G as ie,p as te,S as me,r as _e}from"../chunks/scheduler.DK5noefF.js";import{S as ge,i as de,c as q,a as R,m as U,t as P,e as pe,b as j,d as F,g as be}from"../chunks/index.OECaLbXR.js";import{e as X}from"../chunks/each.Dbd03sI1.js";import{P as ve}from"../chunks/PageHeader.C1QSjqnO.js";import{P as $e}from"../chunks/Pagination.C3TH-bth.js";import{S as ke}from"../chunks/SearchBar.D5otZFyl.js";import{a as Z}from"../chunks/apiNames.G3FqMHey.js";import{i as J}from"../chunks/authorization.BfNSR1Nc.js";import{D as Ee,S as we}from"../chunks/SongElement.m9wBhzD4.js";import{s as Se,bX as Ae,bY as De,bZ as ye}from"../chunks/messages.DZzIl59o.js";function le(o,t,l){const r=o.slice();return r[9]=t[l],r}function ae(o,t,l){const r=o.slice();return r[12]=t[l],r}function ne(o){let t,l,r,_=Ae()+"",a;return{c(){t=S("div"),l=S("a"),r=S("button"),a=K(_),this.h()},l(s){t=A(s,"DIV",{class:!0});var c=y(t);l=A(c,"A",{href:!0});var g=y(l);r=A(g,"BUTTON",{class:!0});var $=y(r);a=Q($,_),$.forEach(m),g.forEach(m),c.forEach(m),this.h()},h(){p(r,"class","btn"),p(l,"href",o[3]("/songbook/create",void 0)),p(t,"class","ml-auto")},m(s,c){D(s,t,c),v(t,l),v(l,r),v(r,a)},p:he,d(s){s&&m(t)}}}function se(o){let t,l,r,_,a,s=De()+"",c,g,$;return{c(){t=S("div"),l=S("input"),_=N(),a=S("label"),c=K(s),this.h()},l(d){t=A(d,"DIV",{class:!0});var n=y(t);l=A(n,"INPUT",{class:!0,type:!0,name:!0}),_=T(n),a=A(n,"LABEL",{class:!0,for:!0});var u=y(a);c=Q(u,s),u.forEach(m),n.forEach(m),this.h()},h(){p(l,"class","checkbox"),p(l,"type","checkbox"),p(l,"name","show-deleted"),l.value="true",l.checked=r=o[0].params.includes("show-deleted"),p(a,"class","label"),p(a,"for","show-deleted"),p(t,"class","my-4 flex items-center justify-end gap-2")},m(d,n){D(d,t,n),v(t,l),v(t,_),v(t,a),v(a,c),g||($=ie(l,"change",o[4]),g=!0)},p(d,n){n&1&&r!==(r=d[0].params.includes("show-deleted"))&&(l.checked=r)},d(d){d&&m(t),g=!1,$()}}}function re(o){let t,l=o[0].categoryMap[o[12]]+"",r,_,a,s,c,g,$,d;return{c(){t=S("label"),r=K(l),_=N(),a=S("input"),g=N(),this.h()},l(n){t=A(n,"LABEL",{class:!0});var u=y(t);r=Q(u,l),_=T(u),a=A(u,"INPUT",{type:!0,name:!0}),g=T(u),u.forEach(m),this.h()},h(){a.hidden=!0,p(a,"type","checkbox"),p(a,"name","category"),a.value=s=o[12],a.checked=c=o[2](o[12]),p(t,"class","m-1 flex-grow cursor-pointer rounded-lg px-2 py-1 text-center ring-neutral-700 transition hover:scale-105 hover:bg-neutral-700 md:ring-1"),te(t,"bg-neutral-600",o[2](o[12]))},m(n,u){D(n,t,u),v(t,r),v(t,_),v(t,a),v(t,g),$||(d=ie(a,"change",o[5]),$=!0)},p(n,u){u&1&&l!==(l=n[0].categoryMap[n[12]]+"")&&me(r,l),u&1&&s!==(s=n[12])&&(a.value=s),u&1&&c!==(c=n[2](n[12]))&&(a.checked=c),u&5&&te(t,"bg-neutral-600",n[2](n[12]))},d(n){n&&m(t),$=!1,d()}}}function oe(o){let t,l,r,_,a;return r=new we({props:{song:o[9]}}),{c(){t=S("div"),l=S("a"),q(r.$$.fragment),this.h()},l(s){t=A(s,"DIV",{class:!0});var c=y(t);l=A(c,"A",{href:!0});var g=y(l);R(r.$$.fragment,g),g.forEach(m),c.forEach(m),this.h()},h(){p(l,"href",_=o[3](`/songbook/${o[9].slug}`,void 0)),p(t,"class","rounded-lg hover:ring-2 hover:ring-primary")},m(s,c){D(s,t,c),v(t,l),U(r,l,null),a=!0},p(s,c){const g={};c&1&&(g.song=s[9]),r.$set(g),(!a||c&1&&_!==(_=s[3](`/songbook/${s[9].slug}`,void 0)))&&p(l,"href",_)},i(s){a||(P(r.$$.fragment,s),a=!0)},o(s){j(r.$$.fragment,s),a=!1},d(s){s&&m(t),F(r)}}}function Ne(o){let t,l,r,_=J(Z.SONG.CREATE,o[0].user),a,s,c=ye()+"",g,$,d,n,u,W=J(Z.SONG.DELETE,o[0].user),H,C,x,I,Y,M,L,z;l=new ve({props:{title:Se()}});let k=_&&ne(o);d=new Ee({});let E=W&&se(o),V=X(Object.keys(o[0].categoryMap)),b=[];for(let e=0;e<V.length;e+=1)b[e]=re(ae(o,V,e));I=new ke({});let B=X(o[0].songs),h=[];for(let e=0;e<B.length;e+=1)h[e]=oe(le(o,B,e));const fe=e=>j(h[e],1,1,()=>{h[e]=null});return L=new $e({props:{count:o[0].pageCount}}),{c(){t=S("div"),q(l.$$.fragment),r=N(),k&&k.c(),a=N(),s=S("p"),g=K(c),$=N(),q(d.$$.fragment),n=N(),u=S("form"),E&&E.c(),H=N(),C=S("div");for(let e=0;e<b.length;e+=1)b[e].c();x=N(),q(I.$$.fragment),Y=N();for(let e=0;e<h.length;e+=1)h[e].c();M=N(),q(L.$$.fragment),this.h()},l(e){t=A(e,"DIV",{class:!0});var f=y(t);R(l.$$.fragment,f),r=T(f),k&&k.l(f),f.forEach(m),a=T(e),s=A(e,"P",{class:!0});var w=y(s);g=Q(w,c),w.forEach(m),$=T(e),R(d.$$.fragment,e),n=T(e),u=A(e,"FORM",{method:!0,"data-sveltekit-keepfocus":!0});var i=y(u);E&&E.l(i),H=T(i),C=A(i,"DIV",{class:!0});var O=y(C);for(let G=0;G<b.length;G+=1)b[G].l(O);O.forEach(m),x=T(i),R(I.$$.fragment,i),i.forEach(m),Y=T(e);for(let G=0;G<h.length;G+=1)h[G].l(e);M=T(e),R(L.$$.fragment,e),this.h()},h(){p(t,"class","flex flex-row"),p(s,"class","text-xl font-bold"),p(C,"class","my-4 flex flex-wrap justify-between"),p(u,"method","GET"),p(u,"data-sveltekit-keepfocus","")},m(e,f){D(e,t,f),U(l,t,null),v(t,r),k&&k.m(t,null),D(e,a,f),D(e,s,f),v(s,g),D(e,$,f),U(d,e,f),D(e,n,f),D(e,u,f),E&&E.m(u,null),v(u,H),v(u,C);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(C,null);v(u,x),U(I,u,null),o[6](u),D(e,Y,f);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(e,f);D(e,M,f),U(L,e,f),z=!0},p(e,[f]){if(f&1&&(_=J(Z.SONG.CREATE,e[0].user)),_?k?k.p(e,f):(k=ne(e),k.c(),k.m(t,null)):k&&(k.d(1),k=null),f&1&&(W=J(Z.SONG.DELETE,e[0].user)),W?E?E.p(e,f):(E=se(e),E.c(),E.m(u,H)):E&&(E.d(1),E=null),f&7){V=X(Object.keys(e[0].categoryMap));let i;for(i=0;i<V.length;i+=1){const O=ae(e,V,i);b[i]?b[i].p(O,f):(b[i]=re(O),b[i].c(),b[i].m(C,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=V.length}if(f&9){B=X(e[0].songs);let i;for(i=0;i<B.length;i+=1){const O=le(e,B,i);h[i]?(h[i].p(O,f),P(h[i],1)):(h[i]=oe(O),h[i].c(),P(h[i],1),h[i].m(M.parentNode,M))}for(be(),i=B.length;i<h.length;i+=1)fe(i);pe()}const w={};f&1&&(w.count=e[0].pageCount),L.$set(w)},i(e){if(!z){P(l.$$.fragment,e),P(d.$$.fragment,e),P(I.$$.fragment,e);for(let f=0;f<B.length;f+=1)P(h[f]);P(L.$$.fragment,e),z=!0}},o(e){j(l.$$.fragment,e),j(d.$$.fragment,e),j(I.$$.fragment,e),h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)j(h[f]);j(L.$$.fragment,e),z=!1},d(e){e&&(m(t),m(a),m(s),m($),m(n),m(u),m(Y),m(M)),F(l),k&&k.d(),F(d,e),E&&E.d(),ee(b,e),F(I),o[6](null),ee(h,e),F(L,e)}}}function Te(o,t,l){function r(n){return _.categories.includes(n)}let{data:_}=t,a;const s=ce("$paraglide-adapter-sveltekit:context");function c(n,u){return typeof n!="string"||!s?n:s.translateHref(n,u)}const g=()=>a.requestSubmit(),$=()=>a.requestSubmit();function d(n){_e[n?"unshift":"push"](()=>{a=n,l(1,a)})}return o.$$set=n=>{"data"in n&&l(0,_=n.data)},[_,a,r,c,g,$,d]}class qe extends ge{constructor(t){super(),de(this,t,Te,Ne,ue,{data:0})}}export{qe as component};
