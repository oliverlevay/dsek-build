import{s as Z,e as S,a as F,b as y,d,f as k,i as A,n as X,l as De,m as Se,t as O,j as C,o as $,k as I,p as oe,q as p,S as x,r as Ne,Y as Ce,G as Ie,C as ue}from"../chunks/scheduler.DK5noefF.js";import{S as ee,i as te,g as q,e as z,t as D,b as N,c as B,a as V,m as M,d as K,f as Le}from"../chunks/index.OECaLbXR.js";import{e as j,u as le,d as Pe,o as Fe}from"../chunks/each.Dbd03sI1.js";import{b as G}from"../chunks/public.D6ikzIky.js";import{P as Ue}from"../chunks/Pagination.C3TH-bth.js";import{p as ye}from"../chunks/stores.BdoTh84D.js";import{a as W}from"../chunks/apiNames.G3FqMHey.js";import{D as Be}from"../chunks/servePdf.DVfB6ULO.js";import{F as Ve}from"../chunks/FileLink.Bn_2gEpu.js";import{i as J}from"../chunks/authorization.BfNSR1Nc.js";import{j as Me,dV as ce,dW as me,f2 as Ke,f3 as Oe,f4 as $e,f5 as je,ap as Re,e2 as Ye,f6 as He}from"../chunks/messages.DZzIl59o.js";import{S as qe}from"../chunks/SetPageTitle.Cf9LBAU4.js";function _e(f,e,t){const l=f.slice();return l[8]=e[t],l}function de(f,e){let t,l=e[8].name+"",n,i,a;return{key:f,first:null,c(){t=S("a"),n=O(l),i=C(),this.h()},l(s){t=F(s,"A",{href:!0,role:!0,class:!0});var r=y(t);n=$(r,l),i=I(r),r.forEach(d),this.h()},h(){k(t,"href",a=e[3](e[2](e[8].value),void 0)),k(t,"role","tab"),k(t,"class","tab h-auto"),oe(t,"tab-active",e[8].value===e[0]),this.first=t},m(s,r){A(s,t,r),p(t,n),p(t,i)},p(s,r){e=s,r&2&&l!==(l=e[8].name+"")&&x(n,l),r&6&&a!==(a=e[3](e[2](e[8].value),void 0))&&k(t,"href",a),r&3&&oe(t,"tab-active",e[8].value===e[0])},d(s){s&&d(t)}}}function ze(f){let e,t=[],l=new Map,n=j(f[1]);const i=a=>a[8].value;for(let a=0;a<n.length;a+=1){let s=_e(f,n,a),r=i(s);l.set(r,t[a]=de(r,s))}return{c(){e=S("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=F(a,"DIV",{role:!0,class:!0});var s=y(e);for(let r=0;r<t.length;r+=1)t[r].l(s);s.forEach(d),this.h()},h(){k(e,"role","tablist"),k(e,"class","tabs-boxed flex w-full flex-col items-stretch sm:w-auto sm:flex-row")},m(a,s){A(a,e,s);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(a,[s]){s&15&&(n=j(a[1]),t=le(t,s,i,1,a,n,l,e,Pe,de,null,_e))},i:X,o:X,d(a){a&&d(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Ge(f,e,t){var h;let l,n;De(f,ye,o=>t(5,n=o));let{options:i=[]}=e,{fieldName:a="type"}=e,{currentTab:s=(h=i[0])==null?void 0:h.value}=e;const r=Se("$paraglide-adapter-sveltekit:context");function m(o,c){return typeof o!="string"||!r?o:r.translateHref(o,c)}return f.$$set=o=>{"options"in o&&t(1,i=o.options),"fieldName"in o&&t(4,a=o.fieldName),"currentTab"in o&&t(0,s=o.currentTab)},f.$$.update=()=>{f.$$.dirty&48&&(()=>{const o=n.url.searchParams.get(a);o&&t(0,s=o)})(),f.$$.dirty&48&&t(2,l=o=>{const c=new URLSearchParams(n.url.searchParams);return c.set(a,o.toString()),`?${c.toString()}`})},[s,i,l,m,a,n]}class We extends ee{constructor(e){super(),te(this,e,Ge,ze,Z,{options:1,fieldName:4,currentTab:0})}}function he(f,e,t){const l=f.slice();return l[5]=e[t],l}function ge(f){let e,t;return e=new Ve({props:{name:f[5].name,url:f[5].thumbnailUrl,full:!0}}),{c(){B(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,n){M(e,l,n),t=!0},p(l,n){const i={};n&4&&(i.name=l[5].name),n&4&&(i.url=l[5].thumbnailUrl),e.$set(i)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function pe(f){let e,t;return e=new Be({props:{fileId:f[5].id,fileName:f[5].name,data:f[0]}}),{c(){B(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,n){M(e,l,n),t=!0},p(l,n){const i={};n&4&&(i.fileId=l[5].id),n&4&&(i.fileName=l[5].name),n&1&&(i.data=l[0]),e.$set(i)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function be(f,e){let t,l,n=J(W.FILES.BUCKET(G).DELETE,e[4].data.user)&&e[3],i,a,s=e[5].thumbnailUrl&&ge(e),r=n&&pe(e);return{key:f,first:null,c(){t=S("div"),s&&s.c(),l=C(),r&&r.c(),i=C(),this.h()},l(m){t=F(m,"DIV",{class:!0});var h=y(t);s&&s.l(h),l=I(h),r&&r.l(h),i=I(h),h.forEach(d),this.h()},h(){k(t,"class","flex gap-1"),this.first=t},m(m,h){A(m,t,h),s&&s.m(t,null),p(t,l),r&&r.m(t,null),p(t,i),a=!0},p(m,h){e=m,e[5].thumbnailUrl?s?(s.p(e,h),h&4&&D(s,1)):(s=ge(e),s.c(),D(s,1),s.m(t,l)):s&&(q(),N(s,1,1,()=>{s=null}),z()),h&24&&(n=J(W.FILES.BUCKET(G).DELETE,e[4].data.user)&&e[3]),n?r?(r.p(e,h),h&24&&D(r,1)):(r=pe(e),r.c(),D(r,1),r.m(t,i)):r&&(q(),N(r,1,1,()=>{r=null}),z())},i(m){a||(D(s),D(r),a=!0)},o(m){N(s),N(r),a=!1},d(m){m&&d(t),s&&s.d(),r&&r.d()}}}function Je(f){let e,t,l,n,i,a=[],s=new Map,r,m=j(f[2]);const h=o=>o[5].id;for(let o=0;o<m.length;o+=1){let c=he(f,m,o),E=h(c);s.set(E,a[o]=be(E,c))}return{c(){e=S("section"),t=S("h2"),l=O(f[1]),n=C(),i=S("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=F(o,"SECTION",{class:!0});var c=y(e);t=F(c,"H2",{class:!0});var E=y(t);l=$(E,f[1]),E.forEach(d),n=I(c),i=F(c,"DIV",{class:!0});var P=y(i);for(let T=0;T<a.length;T+=1)a[T].l(P);P.forEach(d),c.forEach(d),this.h()},h(){k(t,"class","mb-2 text-lg font-bold"),k(i,"class","grid grid-flow-row grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3"),k(e,"class","rounded-lg bg-base-200 p-4 pt-2 shadow")},m(o,c){A(o,e,c),p(e,t),p(t,l),p(e,n),p(e,i);for(let E=0;E<a.length;E+=1)a[E]&&a[E].m(i,null);r=!0},p(o,[c]){(!r||c&2)&&x(l,o[1]),c&29&&(m=j(o[2]),q(),a=le(a,c,h,1,o,m,s,i,Fe,be,null,he),z())},i(o){if(!r){for(let c=0;c<m.length;c+=1)D(a[c]);r=!0}},o(o){for(let c=0;c<a.length;c+=1)N(a[c]);r=!1},d(o){o&&d(e);for(let c=0;c<a.length;c+=1)a[c].d()}}}function Qe(f,e,t){let l;De(f,ye,r=>t(4,l=r));let{deleteForm:n}=e,{name:i}=e,{files:a}=e,{isEditing:s=!1}=e;return f.$$set=r=>{"deleteForm"in r&&t(0,n=r.deleteForm),"name"in r&&t(1,i=r.name),"files"in r&&t(2,a=r.files),"isEditing"in r&&t(3,s=r.isEditing)},[n,i,a,s,l]}class Xe extends ee{constructor(e){super(),te(this,e,Qe,Je,Z,{deleteForm:0,name:1,files:2,isEditing:3})}}function ke(f,e,t){const l=f.slice();return l[15]=e[t],l}function Ee(f){let e,t,l=f[4]&&ve(f),n=f[3]&&Te(f);return{c(){e=S("div"),l&&l.c(),t=C(),n&&n.c(),this.h()},l(i){e=F(i,"DIV",{class:!0});var a=y(e);l&&l.l(a),t=I(a),n&&n.l(a),a.forEach(d),this.h()},h(){k(e,"class","mb-4 flex flex-row gap-1")},m(i,a){A(i,e,a),l&&l.m(e,null),p(e,t),n&&n.m(e,null)},p(i,a){i[4]?l?l.p(i,a):(l=ve(i),l.c(),l.m(e,t)):l&&(l.d(1),l=null),i[3]?n?n.p(i,a):(n=Te(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(i){i&&d(e),l&&l.d(),n&&n.d()}}}function ve(f){let e,t=Re()+"",l;return{c(){e=S("a"),l=O(t),this.h()},l(n){e=F(n,"A",{class:!0,href:!0});var i=y(e);l=$(i,t),i.forEach(d),this.h()},h(){k(e,"class","btn btn-primary btn-sm"),k(e,"href",f[8]("/documents/upload",void 0))},m(n,i){A(n,e,i),p(e,l)},p:X,d(n){n&&d(e)}}}function Te(f){let e,t=(f[2]?ce():me())+"",l,n,i;return{c(){e=S("button"),l=O(t),this.h()},l(a){e=F(a,"BUTTON",{class:!0});var s=y(e);l=$(s,t),s.forEach(d),this.h()},h(){k(e,"class","btn btn-secondary btn-sm")},m(a,s){A(a,e,s),p(e,l),n||(i=Ie(e,"click",f[12]),n=!0)},p(a,s){s&4&&t!==(t=(a[2]?ce():me())+"")&&x(l,t)},d(a){a&&d(e),n=!1,i()}}}function we(f,e){let t,l,n;return l=new Xe({props:{name:e[15],files:e[0].meetings[e[15]]??[],isEditing:e[2],deleteForm:e[0].deleteForm}}),{key:f,first:null,c(){t=ue(),B(l.$$.fragment),this.h()},l(i){t=ue(),V(l.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){A(i,t,a),M(l,i,a),n=!0},p(i,a){e=i;const s={};a&32&&(s.name=e[15]),a&33&&(s.files=e[0].meetings[e[15]]??[]),a&4&&(s.isEditing=e[2]),a&1&&(s.deleteForm=e[0].deleteForm),l.$set(s)},i(i){n||(D(l.$$.fragment,i),n=!0)},o(i){N(l.$$.fragment,i),n=!1},d(i){i&&d(t),K(l,i)}}}function Ze(f){let e,t,l,n,i,a=Ye()+"",s,r,m,h,o,c=He()+"",E,P,T,R,g,L,U,w=[],ae=new Map,H;e=new qe({props:{title:Me()}}),m=new Ue({props:{class:"max-w-prose",count:f[6]-1981,getPageName:f[9],getPageNumber:f[10],fieldName:"year"}});function Ae(u){f[11](u)}let ne={options:f[7],fieldName:"type"};f[1]!==void 0&&(ne.currentTab=f[1]),T=new We({props:ne}),Ne.push(()=>Le(T,"currentTab",Ae));let v=(f[4]||f[3])&&Ee(f),Y=j(f[5]);const ie=u=>u[15];for(let u=0;u<Y.length;u+=1){let _=ke(f,Y,u),b=ie(_);ae.set(b,w[u]=we(b,_))}return{c(){B(e.$$.fragment),t=C(),l=S("div"),n=S("div"),i=S("span"),s=O(a),r=C(),B(m.$$.fragment),h=C(),o=S("span"),E=O(c),P=C(),B(T.$$.fragment),g=C(),v&&v.c(),L=C(),U=S("div");for(let u=0;u<w.length;u+=1)w[u].c();this.h()},l(u){V(e.$$.fragment,u),t=I(u),l=F(u,"DIV",{class:!0});var _=y(l);n=F(_,"DIV",{class:!0});var b=y(n);i=F(b,"SPAN",{class:!0});var se=y(i);s=$(se,a),se.forEach(d),r=I(b),V(m.$$.fragment,b),h=I(b),o=F(b,"SPAN",{class:!0});var re=y(o);E=$(re,c),re.forEach(d),P=I(b),V(T.$$.fragment,b),b.forEach(d),g=I(_),v&&v.l(_),_.forEach(d),L=I(u),U=F(u,"DIV",{class:!0});var fe=y(U);for(let Q=0;Q<w.length;Q+=1)w[Q].l(fe);fe.forEach(d),this.h()},h(){k(i,"class","text-lg"),k(o,"class","text-lg"),k(n,"class","mb-4 flex w-full flex-col items-start gap-2"),k(l,"class","flex flex-row flex-wrap justify-between"),k(U,"class","flex flex-col gap-4")},m(u,_){M(e,u,_),A(u,t,_),A(u,l,_),p(l,n),p(n,i),p(i,s),p(n,r),M(m,n,null),p(n,h),p(n,o),p(o,E),p(n,P),M(T,n,null),p(l,g),v&&v.m(l,null),A(u,L,_),A(u,U,_);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(U,null);H=!0},p(u,[_]){const b={};!R&&_&2&&(R=!0,b.currentTab=u[1],Ce(()=>R=!1)),T.$set(b),u[4]||u[3]?v?v.p(u,_):(v=Ee(u),v.c(),v.m(l,null)):v&&(v.d(1),v=null),_&37&&(Y=j(u[5]),q(),w=le(w,_,ie,1,u,Y,ae,U,Fe,we,null,ke),z())},i(u){if(!H){D(e.$$.fragment,u),D(m.$$.fragment,u),D(T.$$.fragment,u);for(let _=0;_<Y.length;_+=1)D(w[_]);H=!0}},o(u){N(e.$$.fragment,u),N(m.$$.fragment,u),N(T.$$.fragment,u);for(let _=0;_<w.length;_+=1)N(w[_]);H=!1},d(u){u&&(d(t),d(l),d(L),d(U)),K(e,u),K(m),K(T),v&&v.d();for(let _=0;_<w.length;_+=1)w[_].d()}}}function xe(f,e,t){let l,n,i,{data:a}=e,s=!1;const r=new Date().getFullYear();let m="board-meeting";const h=[{name:Ke(),value:"guild-meeting"},{name:Oe(),value:"board-meeting"},{name:$e(),value:"SRD-meeting"},{name:je(),value:"other"}],o=Se("$paraglide-adapter-sveltekit:context");function c(g,L){return typeof g!="string"||!o?g:o.translateHref(g,L)}const E=g=>(r-g).toString(),P=g=>r-+g;function T(g){m=g,t(1,m)}const R=()=>{t(2,s=!s)};return f.$$set=g=>{"data"in g&&t(0,a=g.data)},f.$$.update=()=>{f.$$.dirty&3&&t(5,l=Object.keys(a.meetings).sort((g,L)=>m==="board-meeting"||m==="SRD-meeting"?L.localeCompare(g,"sv"):g.localeCompare(L,"sv"))),f.$$.dirty&1&&t(4,n=J(W.FILES.BUCKET(G).CREATE,a.user)),f.$$.dirty&1&&t(3,i=J(W.FILES.BUCKET(G).DELETE,a.user))},[a,m,s,i,n,l,r,h,c,E,P,T,R]}class mt extends ee{constructor(e){super(),te(this,e,xe,Ze,Z,{data:0})}}export{mt as component};
