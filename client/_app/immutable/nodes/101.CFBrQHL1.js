import{s as _t,D as $e,r as ye,j as v,e as d,t as C,W as dt,k as $,N as gt,a as g,d as _,b as h,o as F,X as bt,E as ht,f as n,i as M,q as i,Q as vt,G as Ge,Y as Re,w as $t,l as Be,m as yt,F as lt,P as st,C as nt,n as Et}from"../chunks/scheduler.DK5noefF.js";import{S as kt,i as Tt,f as je,c as X,a as Y,m as Q,t as W,b as J,d as K}from"../chunks/index.OECaLbXR.js";import{g as Ee,a as ze}from"../chunks/spread.CgU5AtxT.js";import{A as ct}from"../chunks/Autocomplete.DdSuRofk.js";import{I as Ot}from"../chunks/Input.B5KtvBzm.js";import{L as He}from"../chunks/Labeled.DSKh_Z0I.js";import{S as wt}from"../chunks/SetPageTitle.Cf9LBAU4.js";import{a as rt}from"../chunks/apiNames.G3FqMHey.js";import{i as it}from"../chunks/authorization.BfNSR1Nc.js";import{s as At}from"../chunks/superForms.37TMp2uc.js";import{b$ as Nt,c0 as Dt,c1 as It,c2 as St,c3 as Pt,c4 as Lt,c5 as Vt,c6 as ut,c7 as mt,c8 as Ut,c9 as Ct,ca as Ft}from"../chunks/messages.DZzIl59o.js";function Mt(a){let e,f,s;const u=[{name:"melody"},{options:a[0].existingMelodies},a[3].melody,{error:a[4].melody},{searchValue:a[0].song.melody??""}];function r(t){a[11](t)}let o={};for(let t=0;t<u.length;t+=1)o=$e(o,u[t]);return a[2].melody!==void 0&&(o.value=a[2].melody),e=new ct({props:o}),ye.push(()=>je(e,"value",r)),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,c){Q(e,t,c),s=!0},p(t,c){const b=c&25?Ee(u,[u[0],c&1&&{options:t[0].existingMelodies},c&8&&ze(t[3].melody),c&16&&{error:t[4].melody},c&1&&{searchValue:t[0].song.melody??""}]):{};!f&&c&4&&(f=!0,b.value=t[2].melody,Re(()=>f=!1)),e.$set(b)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function qt(a){let e,f,s;const u=[{name:"category"},{options:a[0].existingCategories},a[3].category,{error:a[4].category},{searchValue:a[0].song.category??""}];function r(t){a[12](t)}let o={};for(let t=0;t<u.length;t+=1)o=$e(o,u[t]);return a[2].category!==void 0&&(o.value=a[2].category),e=new ct({props:o}),ye.push(()=>je(e,"value",r)),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,c){Q(e,t,c),s=!0},p(t,c){const b=c&25?Ee(u,[u[0],c&1&&{options:t[0].existingCategories},c&8&&ze(t[3].category),c&16&&{error:t[4].category},c&1&&{searchValue:t[0].song.category??""}]):{};!f&&c&4&&(f=!0,b.value=t[2].category,Re(()=>f=!1)),e.$set(b)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function Bt(a){let e,f,s,u=[{id:"lyrics"},{name:"lyrics"},{class:"textarea textarea-bordered h-80"},a[3].lyrics],r={};for(let o=0;o<u.length;o+=1)r=$e(r,u[o]);return{c(){e=d("textarea"),this.h()},l(o){e=g(o,"TEXTAREA",{id:!0,name:!0,class:!0}),h(e).forEach(_),this.h()},h(){lt(e,r)},m(o,t){M(o,e,t),e.autofocus&&e.focus(),st(e,a[2].lyrics),f||(s=Ge(e,"input",a[13]),f=!0)},p(o,t){lt(e,r=Ee(u,[{id:"lyrics"},{name:"lyrics"},{class:"textarea textarea-bordered h-80"},t&8&&o[3].lyrics])),t&4&&st(e,o[2].lyrics)},d(o){o&&_(e),f=!1,s()}}}function ft(a){let e;function f(r,o){return r[0].song.deletedAt===null?Gt:Ht}let s=f(a),u=s(a);return{c(){u.c(),e=nt()},l(r){u.l(r),e=nt()},m(r,o){u.m(r,o),M(r,e,o)},p(r,o){s===(s=f(r))&&u?u.p(r,o):(u.d(1),u=s(r),u&&(u.c(),u.m(e.parentNode,e)))},d(r){r&&_(e),u.d(r)}}}function Ht(a){let e,f,s,u,r,o=Ft()+"",t;return{c(){e=d("form"),f=d("input"),u=v(),r=d("button"),t=C(o),this.h()},l(c){e=g(c,"FORM",{method:!0,action:!0,class:!0});var b=h(e);f=g(b,"INPUT",{type:!0,name:!0}),u=$(b),r=g(b,"BUTTON",{class:!0,type:!0,formaction:!0});var k=h(r);t=F(k,o),k.forEach(_),b.forEach(_),this.h()},h(){n(f,"type","hidden"),n(f,"name","id"),f.value=s=a[0].song.id,n(r,"class","btn"),n(r,"type","submit"),n(r,"formaction",a[9]("?/restore",void 0)),n(e,"method","POST"),n(e,"action",a[9]("?/restore",void 0)),n(e,"class","form-control gap-2")},m(c,b){M(c,e,b),i(e,f),i(e,u),i(e,r),i(r,t)},p(c,b){b&1&&s!==(s=c[0].song.id)&&(f.value=s)},d(c){c&&_(e)}}}function Gt(a){let e,f=mt()+"",s,u,r;return{c(){e=d("button"),s=C(f),this.h()},l(o){e=g(o,"BUTTON",{class:!0,type:!0});var t=h(e);s=F(t,f),t.forEach(_),this.h()},h(){n(e,"class","btn"),n(e,"type","button")},m(o,t){M(o,e,t),i(e,s),u||(r=Ge(e,"click",a[14]),u=!0)},p:Et,d(o){o&&_(e),u=!1,r()}}}function Rt(a){let e,f,s,u,r,o,t,c,b,k,T,Z,w,se,A,ne,N,re,O,D,m,ce=Vt()+"",ke,Te,L,Xe=ut()+"",Oe,me,we,Ae=it(rt.SONG.DELETE,a[0].user),pe,I,S,x,Ye=mt()+"",Ne,De,V,Qe=Ut()+"",Ie,Se,ee,ie,_e=a[0].song.title+"",Pe,Le,te,P,j,de,Ve,q,B,We=ut()+"",Ue,Ce,H,Je=Ct()+"",Fe,Me,G,Ke='<button class="cursor-auto"></button>',U,qe,Ze;e=new wt({props:{title:a[0].song.title}});const ue=[{name:"title"},{label:Nt()},a[3].title,{error:a[4].title}];function pt(l){a[10](l)}let ge={};for(let l=0;l<ue.length;l+=1)ge=$e(ge,ue[l]);a[2].title!==void 0&&(ge.value=a[2].title),k=new Ot({props:ge}),ye.push(()=>je(k,"value",pt)),w=new He({props:{label:Dt(),error:a[4].melody,explanation:It(),$$slots:{default:[Mt]},$$scope:{ctx:a}}}),A=new He({props:{label:St(),error:a[4].category,explanation:Pt(),$$slots:{default:[qt]},$$scope:{ctx:a}}}),N=new He({props:{label:Lt(),error:a[4].lyrics,$$slots:{default:[Bt]},$$scope:{ctx:a}}});let y=Ae&&ft(a);return{c(){X(e.$$.fragment),f=v(),s=d("meta"),r=v(),o=d("form"),t=d("input"),b=v(),X(k.$$.fragment),Z=v(),X(w.$$.fragment),se=v(),X(A.$$.fragment),ne=v(),X(N.$$.fragment),re=v(),O=d("div"),D=d("div"),m=d("button"),ke=C(ce),Te=v(),L=d("a"),Oe=C(Xe),we=v(),y&&y.c(),pe=v(),I=d("dialog"),S=d("div"),x=d("h3"),Ne=C(Ye),De=v(),V=d("p"),Ie=C(Qe),Se=v(),ee=d("b"),ie=new dt(!1),Pe=C("?"),Le=v(),te=d("div"),P=d("form"),j=d("input"),Ve=v(),q=d("div"),B=d("button"),Ue=C(We),Ce=v(),H=d("button"),Fe=C(Je),Me=v(),G=d("form"),G.innerHTML=Ke,this.h()},l(l){Y(e.$$.fragment,l),f=$(l);const p=gt("svelte-lsamal",document.head);s=g(p,"META",{name:!0,content:!0}),p.forEach(_),r=$(l),o=g(l,"FORM",{method:!0,action:!0,class:!0});var E=h(o);t=g(E,"INPUT",{type:!0,name:!0}),b=$(E),Y(k.$$.fragment,E),Z=$(E),Y(w.$$.fragment,E),se=$(E),Y(A.$$.fragment,E),ne=$(E),Y(N.$$.fragment,E),re=$(E),O=g(E,"DIV",{class:!0});var z=h(O);D=g(z,"DIV",{class:!0});var R=h(D);m=g(R,"BUTTON",{class:!0,type:!0});var ae=h(m);ke=F(ae,ce),ae.forEach(_),Te=$(R),L=g(R,"A",{class:!0,type:!0,href:!0});var oe=h(L);Oe=F(oe,Xe),oe.forEach(_),R.forEach(_),we=$(z),y&&y.l(z),z.forEach(_),E.forEach(_),pe=$(l),I=g(l,"DIALOG",{class:!0});var be=h(I);S=g(be,"DIV",{class:!0});var le=h(S);x=g(le,"H3",{class:!0});var xe=h(x);Ne=F(xe,Ye),xe.forEach(_),De=$(le),V=g(le,"P",{class:!0});var fe=h(V);Ie=F(fe,Qe),Se=$(fe),ee=g(fe,"B",{class:!0});var et=h(ee);ie=bt(et,!1),et.forEach(_),Pe=F(fe,"?"),fe.forEach(_),Le=$(le),te=g(le,"DIV",{class:!0});var tt=h(te);P=g(tt,"FORM",{method:!0,action:!0,class:!0});var he=h(P);j=g(he,"INPUT",{type:!0,name:!0}),Ve=$(he),q=g(he,"DIV",{class:!0});var ve=h(q);B=g(ve,"BUTTON",{class:!0,type:!0});var at=h(B);Ue=F(at,We),at.forEach(_),Ce=$(ve),H=g(ve,"BUTTON",{class:!0,type:!0,formaction:!0});var ot=h(H);Fe=F(ot,Je),ot.forEach(_),ve.forEach(_),he.forEach(_),tt.forEach(_),le.forEach(_),Me=$(be),G=g(be,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ht(G)!=="svelte-cqws4v"&&(G.innerHTML=Ke),be.forEach(_),this.h()},h(){n(s,"name","description"),n(s,"content",u=a[0].song.lyrics),n(t,"type","hidden"),n(t,"name","id"),t.value=c=a[0].song.id,n(m,"class","btn btn-primary"),n(m,"type","submit"),n(L,"class","btn"),n(L,"type","button"),n(L,"href",me=a[9](`/songbook/${a[0].song.slug}`,void 0)),n(D,"class","flex gap-2"),n(O,"class","flex justify-between"),n(o,"method","POST"),n(o,"action",a[9]("?/update",void 0)),n(o,"class","form-control gap-2"),n(x,"class","text-lg font-bold"),ie.a=null,n(ee,"class","capitalize"),n(V,"class","py-4"),n(j,"type","hidden"),n(j,"name","id"),j.value=de=a[0].song.id,n(B,"class","btn"),n(B,"type","button"),n(H,"class","btn btn-error"),n(H,"type","submit"),n(H,"formaction",a[9]("?/delete",void 0)),n(q,"class","flex gap-2"),n(P,"method","POST"),n(P,"action",a[9]("?/delete",void 0)),n(P,"class","form-control gap-2"),n(te,"class","modal-action"),n(S,"class","modal-box"),n(G,"method","dialog"),n(G,"class","modal-backdrop"),n(I,"class","modal modal-bottom sm:modal-middle")},m(l,p){Q(e,l,p),M(l,f,p),i(document.head,s),M(l,r,p),M(l,o,p),i(o,t),i(o,b),Q(k,o,null),i(o,Z),Q(w,o,null),i(o,se),Q(A,o,null),i(o,ne),Q(N,o,null),i(o,re),i(o,O),i(O,D),i(D,m),i(m,ke),i(D,Te),i(D,L),i(L,Oe),i(O,we),y&&y.m(O,null),M(l,pe,p),M(l,I,p),i(I,S),i(S,x),i(x,Ne),i(S,De),i(S,V),i(V,Ie),i(V,Se),i(V,ee),ie.m(_e,ee),i(V,Pe),i(S,Le),i(S,te),i(te,P),i(P,j),i(P,Ve),i(P,q),i(q,B),i(B,Ue),i(q,Ce),i(q,H),i(H,Fe),i(I,Me),i(I,G),a[16](I),U=!0,qe||(Ze=[vt(a[8].call(null,o)),Ge(B,"click",a[15])],qe=!0)},p(l,[p]){const E={};p&1&&(E.title=l[0].song.title),e.$set(E),(!U||p&1&&u!==(u=l[0].song.lyrics))&&n(s,"content",u),(!U||p&1&&c!==(c=l[0].song.id))&&(t.value=c);const z=p&24?Ee(ue,[ue[0],ue[1],p&8&&ze(l[3].title),p&16&&{error:l[4].title}]):{};!T&&p&4&&(T=!0,z.value=l[2].title,Re(()=>T=!1)),k.$set(z);const R={};p&16&&(R.error=l[4].melody),p&524317&&(R.$$scope={dirty:p,ctx:l}),w.$set(R);const ae={};p&16&&(ae.error=l[4].category),p&524317&&(ae.$$scope={dirty:p,ctx:l}),A.$set(ae);const oe={};p&16&&(oe.error=l[4].lyrics),p&524300&&(oe.$$scope={dirty:p,ctx:l}),N.$set(oe),(!U||p&1&&me!==(me=l[9](`/songbook/${l[0].song.slug}`,void 0)))&&n(L,"href",me),p&1&&(Ae=it(rt.SONG.DELETE,l[0].user)),Ae?y?y.p(l,p):(y=ft(l),y.c(),y.m(O,null)):y&&(y.d(1),y=null),(!U||p&1)&&_e!==(_e=l[0].song.title+"")&&ie.p(_e),(!U||p&1&&de!==(de=l[0].song.id))&&(j.value=de)},i(l){U||(W(e.$$.fragment,l),W(k.$$.fragment,l),W(w.$$.fragment,l),W(A.$$.fragment,l),W(N.$$.fragment,l),U=!0)},o(l){J(e.$$.fragment,l),J(k.$$.fragment,l),J(w.$$.fragment,l),J(A.$$.fragment,l),J(N.$$.fragment,l),U=!1},d(l){l&&(_(f),_(r),_(o),_(pe),_(I)),K(e,l),_(s),K(k),K(w),K(A),K(N),y&&y.d(),a[16](null),qe=!1,$t(Ze)}}}function jt(a,e,f){let s,u,r,{data:o}=e;const{form:t,errors:c,constraints:b,enhance:k}=At(o.form);Be(a,t,m=>f(2,s=m)),Be(a,c,m=>f(4,r=m)),Be(a,b,m=>f(3,u=m));let T;const Z=yt("$paraglide-adapter-sveltekit:context");function w(m,ce){return typeof m!="string"||!Z?m:Z.translateHref(m,ce)}function se(m){a.$$.not_equal(s.title,m)&&(s.title=m,t.set(s))}function A(m){a.$$.not_equal(s.melody,m)&&(s.melody=m,t.set(s))}function ne(m){a.$$.not_equal(s.category,m)&&(s.category=m,t.set(s))}function N(){s.lyrics=this.value,t.set(s)}const re=()=>T==null?void 0:T.showModal(),O=()=>T==null?void 0:T.close();function D(m){ye[m?"unshift":"push"](()=>{T=m,f(1,T)})}return a.$$set=m=>{"data"in m&&f(0,o=m.data)},[o,T,s,u,r,t,c,b,k,w,se,A,ne,N,re,O,D]}class aa extends kt{constructor(e){super(),Tt(this,e,jt,Rt,_t,{data:0})}}export{aa as component};
