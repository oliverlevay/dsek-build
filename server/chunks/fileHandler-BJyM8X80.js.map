{"version":3,"file":"fileHandler-BJyM8X80.js","sources":["../../../.svelte-kit/adapter-node/chunks/fileHandler.js"],"sourcesContent":["import { d as private_env } from \"./shared-server.js\";\nimport { a as PUBLIC_MINIO_ENDPOINT, b as PUBLIC_MINIO_PORT, c as PUBLIC_MINIO_USE_SSL } from \"./public.js\";\nimport { Client, CopyConditions } from \"minio\";\nimport { M as MINIO_BASE_URL } from \"./client3.js\";\nimport { a as apiNames } from \"./apiNames.js\";\nimport { a as authorize } from \"./authorization.js\";\nimport { e as error } from \"./index.js\";\nimport path from \"path\";\nconst minio = new Client({\n  endPoint: PUBLIC_MINIO_ENDPOINT,\n  port: Number.parseInt(PUBLIC_MINIO_PORT, 10),\n  useSSL: PUBLIC_MINIO_USE_SSL === \"true\",\n  accessKey: private_env.MINIO_ROOT_USER || \"\",\n  secretKey: private_env.MINIO_ROOT_PASSWORD || \"\"\n});\nconst fileExists = async (bucket, fileName) => {\n  try {\n    await minio.statObject(bucket, fileName);\n    return true;\n  } catch {\n    return false;\n  }\n};\nconst isDir = (fileName) => {\n  return fileName.charAt(fileName.length - 1) === \"/\";\n};\nconst getFilesInFolder = (bucket, prefix, recursive) => {\n  return new Promise((resolve, reject) => {\n    const stream = minio.listObjectsV2(bucket, prefix, recursive);\n    const files = [];\n    stream.on(\"data\", (obj) => {\n      if (obj.name) {\n        files.push({\n          id: obj.name,\n          name: path.basename(obj.name),\n          modDate: obj.lastModified,\n          size: obj.size,\n          thumbnailUrl: `${MINIO_BASE_URL}${bucket}/${obj.name}`\n        });\n      }\n      if (obj.prefix) {\n        files.push({\n          id: obj.prefix,\n          name: path.basename(obj.prefix),\n          isDir: true\n        });\n      }\n    });\n    stream.on(\"error\", reject);\n    stream.on(\"end\", () => {\n      resolve(files);\n    });\n  });\n};\nconst getFilesInBucket = async (user, bucket, prefix, recursive = false) => {\n  if (!bucket) {\n    return Promise.resolve([]);\n  }\n  authorize(apiNames.FILES.BUCKET(bucket).READ, user);\n  const basePath = \"\";\n  const files = (await getFilesInFolder(\n    bucket,\n    prefix !== \"/\" ? basePath + prefix : basePath,\n    recursive\n  )).filter((file) => file.name !== \"_folder-preserver\");\n  return files;\n};\nconst ONE_HOUR_IN_SECONDS = 60 * 60;\nconst getPresignedPutUrl = async (user, bucket, fileName, allowOverwrite = false) => {\n  authorize(apiNames.FILES.BUCKET(bucket).CREATE, user);\n  if (fileName === \"\") throw error(400, \"File name cannot be empty\");\n  if (!allowOverwrite && await fileExists(bucket, fileName)) {\n    throw error(409, `File ${fileName} already exists`);\n  }\n  const url = await minio.presignedPutObject(\n    bucket,\n    fileName,\n    ONE_HOUR_IN_SECONDS\n  );\n  return url;\n};\nconst removeFilesWithoutAccessCheck = async (user, bucket, fileNames) => {\n  const deleted = [];\n  await Promise.all(\n    fileNames.map(async (fileName) => {\n      if (isDir(fileName)) {\n        const filesInFolder = await getFilesInBucket(user, bucket, fileName);\n        if (filesInFolder) {\n          await removeFilesWithoutAccessCheck(\n            user,\n            bucket,\n            filesInFolder.map((file) => file.id)\n          );\n        }\n        deleted.push({\n          id: fileName,\n          name: path.basename(fileName)\n        });\n      } else {\n        await minio.removeObject(bucket, fileName);\n        deleted.push({\n          id: fileName,\n          name: path.basename(fileName)\n        });\n      }\n    })\n  );\n  return deleted;\n};\nconst removeObjects = async (user, bucket, fileNames) => {\n  authorize(apiNames.FILES.BUCKET(bucket).DELETE, user);\n  await removeFilesWithoutAccessCheck(user, bucket, fileNames);\n};\nconst moveObject = async (user, bucket, fileNames, newFolder) => {\n  authorize(apiNames.FILES.BUCKET(bucket).UPDATE, user);\n  const moved = [];\n  await Promise.all(\n    fileNames.map(async (fileName) => {\n      const basename = path.basename(fileName);\n      if (isDir(fileName)) {\n        const filesInFolder = await getFilesInBucket(user, bucket, fileName);\n        if (filesInFolder) {\n          const recursivedMoved = await moveObject(\n            user,\n            bucket,\n            filesInFolder.map((file) => file.id),\n            `${newFolder + basename}/`\n          );\n          const FileChange = {\n            file: {\n              id: `${newFolder + basename}/`,\n              name: basename,\n              isDir: true\n            },\n            oldFile: { id: fileName, name: basename, isDir: true }\n          };\n          moved.push(FileChange);\n          moved.push(...recursivedMoved);\n        }\n      } else {\n        const newFileName = path.join(newFolder, basename);\n        const objectStats = await minio.statObject(bucket, fileName);\n        if (await fileExists(bucket, newFileName)) {\n          return;\n        }\n        const oldFile = {\n          id: fileName,\n          name: path.basename(fileName),\n          modDate: objectStats.lastModified,\n          size: objectStats.size,\n          thumbnailUrl: `${MINIO_BASE_URL}${bucket}/${fileName}`\n        };\n        const newFile = {\n          id: newFileName,\n          name: path.basename(newFileName),\n          size: objectStats.size,\n          thumbnailUrl: `${MINIO_BASE_URL}${bucket}/${newFileName}`\n        };\n        await minio.copyObject(\n          bucket,\n          newFileName,\n          `/${bucket}/${fileName}`,\n          new CopyConditions()\n        );\n        await minio.removeObject(bucket, fileName);\n        const FileChange = {\n          file: newFile,\n          oldFile\n        };\n        moved.push(FileChange);\n      }\n    })\n  );\n  return moved;\n};\nconst renameObject = async (user, bucket, fileName, newFileName) => {\n  authorize(apiNames.FILES.BUCKET(bucket).UPDATE, user);\n  if (await fileExists(bucket, newFileName)) {\n    throw error(409, `File ${newFileName} already exists`);\n  }\n  const dirname = path.dirname(fileName);\n  if (isDir(fileName)) {\n    const filesInFolder = await getFilesInBucket(user, bucket, fileName);\n    if (filesInFolder) {\n      await moveObject(\n        user,\n        bucket,\n        filesInFolder.map((file) => file.id),\n        `${newFileName}/`\n      );\n    }\n    return void 0;\n  }\n  const newFileId = path.join(`${dirname}/`, newFileName);\n  const objectStats = await minio.statObject(bucket, fileName);\n  if (await fileExists(bucket, newFileId)) {\n    return void 0;\n  }\n  const oldFile = {\n    id: fileName,\n    name: path.basename(fileName),\n    modDate: objectStats.lastModified,\n    size: objectStats.size,\n    thumbnailUrl: `${MINIO_BASE_URL}${bucket}/${fileName}`\n  };\n  const newFile = {\n    id: newFileId,\n    name: path.basename(newFileId),\n    size: objectStats.size,\n    thumbnailUrl: `${MINIO_BASE_URL}${bucket}/${newFileId}`\n  };\n  await minio.copyObject(\n    bucket,\n    newFileName,\n    `/${bucket}/${fileName}`,\n    new CopyConditions()\n  );\n  await minio.removeObject(bucket, fileName);\n  const FileChange = {\n    file: newFile,\n    oldFile\n  };\n  return FileChange;\n};\nconst fileHandler = {\n  getInBucket: getFilesInBucket,\n  getPresignedPutUrl,\n  remove: removeObjects,\n  move: moveObject,\n  rename: renameObject\n};\nexport {\n  fileHandler as f\n};\n"],"names":[],"mappings":"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"}