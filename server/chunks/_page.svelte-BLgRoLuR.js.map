{"version":3,"file":"_page.svelte-BLgRoLuR.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/documents/upload/_page.svelte.js"],"sourcesContent":["import { a as subscribe, g as getContext } from \"../../../../../chunks/lifecycle.js\";\nimport { c as create_ssr_component, a as add_attribute, b as escape, v as validate_component, s as spread, g as escape_attribute_value, d as escape_object } from \"../../../../../chunks/ssr.js\";\nimport { L as Labeled } from \"../../../../../chunks/Labeled.js\";\nimport { a as fileProxy } from \"../../../../../chunks/superForm.js\";\nimport \"../../../../../chunks/index.js\";\nimport \"devalue\";\nimport \"just-clone\";\nimport \"ts-deepmerge\";\nimport \"../../../../../chunks/formData.js\";\nimport { s as superForm } from \"../../../../../chunks/superForms.js\";\nimport { p as page } from \"../../../../../chunks/stores.js\";\nimport { dC as documents_meetingDocument, dD as documents_meetingDocumentBlurb, dE as documents_theStudyCouncil, dF as documents_theStudyCouncilBlurb, G as documents_requirementProfiles, dG as documents_requirementProfilesBlurb, dH as documents_uploadDocument, dI as documents_writePositionName, dJ as documents_writeMeetingName, dK as documents_chooseDocumentType, b_ as documents_uploadFile, dL as documents_enterDocumentName, dM as documents_pickMeetingYear, dN as documents_upload } from \"../../../../../chunks/messages.js\";\nimport { u as uploadSchema, t as typeToPath } from \"../../../../../chunks/types7.js\";\nimport { S as SetPageTitle } from \"../../../../../chunks/SetPageTitle.js\";\nimport \"memoize-weak\";\nimport { a as zodClient } from \"../../../../../chunks/zod.js\";\nconst DocumentTypeSelector = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $page, $$unsubscribe_page;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  let { type } = $$props;\n  type = $page.url.searchParams.get(\"type\") ?? \"meeting\";\n  if ($$props.type === void 0 && $$bindings.type && type !== void 0) $$bindings.type(type);\n  $$unsubscribe_page();\n  return `<ul class=\"xyz flex flex-wrap gap-4\"><li class=\"flex-1\"><input type=\"radio\" id=\"meeting\" name=\"type\" value=\"meeting\" class=\"peer hidden\"${\"meeting\" === type ? add_attribute(\"checked\", true, 1) : \"\"}> <label for=\"meeting\" class=\"flex cursor-pointer rounded-lg border border-base-content/20 p-5 peer-checked:border-primary peer-checked:bg-primary/10\"><div class=\"flex gap-4\"><span class=\"i-mdi-document self-center text-2xl\"></span> <div><p class=\"text-lg font-semibold\">${escape(documents_meetingDocument())}</p> <p class=\"text-gray-400\">${escape(documents_meetingDocumentBlurb())}</p></div></div></label></li> <li class=\"flex-1\"><input type=\"radio\" id=\"srd\" name=\"type\" value=\"srd\" class=\"peer hidden\"${\"srd\" === type ? add_attribute(\"checked\", true, 1) : \"\"}> <label for=\"srd\" class=\"flex cursor-pointer rounded-lg border border-base-content/20 p-5 peer-checked:border-primary peer-checked:bg-primary/10\"><div class=\"flex gap-4\"><span class=\"i-mdi-account-student self-center text-2xl\"></span> <div><p class=\"text-lg font-semibold\">${escape(documents_theStudyCouncil())}</p> <p class=\"text-gray-400\">${escape(documents_theStudyCouncilBlurb())}</p></div></div></label></li> <li class=\"flex-1\"><input type=\"radio\" id=\"requirement\" name=\"type\" value=\"requirement\" class=\"peer hidden\"${\"requirement\" === type ? add_attribute(\"checked\", true, 1) : \"\"}> <label for=\"requirement\" class=\"flex cursor-pointer rounded-lg border border-base-content/20 p-5 peer-checked:border-primary peer-checked:bg-primary/10\"><div class=\"flex gap-4\"><span class=\"i-mdi-format-list-bulleted-type self-center text-2xl\"></span> <div><p class=\"text-lg font-semibold\">${escape(documents_requirementProfiles())}</p> <p class=\"text-gray-400\">${escape(documents_requirementProfilesBlurb())}</p></div></div></label></li></ul>`;\n});\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let pathInfo;\n  let fileErrors;\n  let $errors, $$unsubscribe_errors;\n  let $form, $$unsubscribe_form;\n  let $constraints, $$unsubscribe_constraints;\n  let $$unsubscribe_file;\n  let { data } = $$props;\n  const { form, constraints, errors, enhance } = superForm(data.form, {\n    onResult: (event) => {\n      if (event.result.type === \"success\") {\n        fileInput.value = \"\";\n      }\n    },\n    resetForm: false,\n    validators: zodClient(uploadSchema)\n  });\n  $$unsubscribe_form = subscribe(form, (value) => $form = value);\n  $$unsubscribe_constraints = subscribe(constraints, (value) => $constraints = value);\n  $$unsubscribe_errors = subscribe(errors, (value) => $errors = value);\n  const file = fileProxy(form, \"file\");\n  $$unsubscribe_file = subscribe(file, (value) => value);\n  let fileInput;\n  getContext(\"$paraglide-adapter-sveltekit:context\");\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);\n  let $$settled;\n  let $$rendered;\n  let previous_head = $$result.head;\n  do {\n    $$settled = true;\n    $$result.head = previous_head;\n    pathInfo = typeToPath[$form.type];\n    fileErrors = $errors.file;\n    $$rendered = `${validate_component(SetPageTitle, \"SetPageTitle\").$$render($$result, { title: documents_uploadDocument() }, {}, {})} <form id=\"upload-file\" class=\"form-control items-stretch gap-4\" method=\"POST\" enctype=\"multipart/form-data\"><div><p class=\"mb-5 text-lg font-medium\">1. ${escape(documents_chooseDocumentType())}</p> ${validate_component(DocumentTypeSelector, \"DocumentTypeSelector\").$$render(\n      $$result,\n      { type: $form.type },\n      {\n        type: ($$value) => {\n          $form.type = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )}</div> ${validate_component(Labeled, \"Labeled\").$$render($$result, { error: $errors.folder }, {}, {\n      default: () => {\n        return `<label class=\"mb-5 text-lg font-medium\" for=\"folder\">2. ${escape($form.type === \"requirement\" ? documents_writePositionName() : documents_writeMeetingName())}</label> <input${spread(\n          [\n            { id: \"folder\" },\n            { name: \"folder\" },\n            { class: \"input input-bordered\" },\n            { type: \"text\" },\n            {\n              placeholder: escape_attribute_value($form.type === \"requirement\" ? \"Øverphøs, Aktivitetsanssvarig...\" : \"S18, HTM1, VTM-extra...\")\n            },\n            escape_object($constraints.folder)\n          ],\n          {}\n        )}${add_attribute(\"value\", $form.folder, 0)}>`;\n      }\n    })} ${validate_component(Labeled, \"Labeled\").$$render($$result, { error: fileErrors }, {}, {\n      default: () => {\n        return `<label class=\"mb-5 text-lg font-medium\" for=\"file\">3. ${escape(documents_uploadFile())}</label> <input${spread(\n          [\n            { id: \"file\" },\n            { type: \"file\" },\n            { name: \"file\" },\n            { class: \"file-input file-input-bordered\" },\n            escape_object($constraints.file)\n          ],\n          {}\n        )}>`;\n      }\n    })} ${validate_component(Labeled, \"Labeled\").$$render($$result, { error: $errors.name }, {}, {\n      default: () => {\n        return `<label class=\"mb-5 text-lg font-medium\" for=\"name\">4. ${escape(documents_enterDocumentName())}</label> <input${spread(\n          [\n            { id: \"name\" },\n            { name: \"name\" },\n            { class: \"input input-bordered\" },\n            { type: \"text\" },\n            { placeholder: \"Namn\" },\n            escape_object($constraints.name)\n          ],\n          {}\n        )}${add_attribute(\"value\", $form.name, 0)}>`;\n      }\n    })} ${validate_component(Labeled, \"Labeled\").$$render($$result, { error: $errors.year }, {}, {\n      default: () => {\n        return `<label class=\"mb-5 text-lg font-medium\" for=\"year\">5. ${escape(documents_pickMeetingYear())}</label> <input${spread(\n          [\n            { id: \"year\" },\n            { name: \"year\" },\n            { class: \"input input-bordered\" },\n            { type: \"number\" },\n            escape_object($constraints.year)\n          ],\n          {}\n        )}${add_attribute(\"value\", $form.year, 0)}>`;\n      }\n    })} ${$form.type && $form.folder && $form.name ? `<pre class=\"input input-bordered input-disabled\">${escape(pathInfo.bucket)}/${escape(pathInfo.path($form.year, $form.folder))}/${escape($form.name)}</pre>` : ``} <button type=\"submit\" form=\"upload-file\" class=\"btn btn-primary\">${escape(documents_upload())}</button></form>`;\n  } while (!$$settled);\n  $$unsubscribe_errors();\n  $$unsubscribe_form();\n  $$unsubscribe_constraints();\n  $$unsubscribe_file();\n  return $$rendered;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}