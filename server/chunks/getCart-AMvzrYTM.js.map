{"version":3,"file":"getCart-AMvzrYTM.js","sources":["../../../.svelte-kit/adapter-node/chunks/getCart.js"],"sourcesContent":["import { w as withHandledNotificationQueue, r as removeExpiredConsumables, m as moveQueueToCart, s as sendQueuedNotifications, a as moveQueueForwardOneStep } from \"./reservations.js\";\nimport { a as authorizedPrismaClient } from \"./authorizedPrisma.js\";\nimport { d as dbIdentification, G as GRACE_PERIOD_WINDOW } from \"./types4.js\";\nimport { h1 as tickets_purchase_errors_cartEmpty, h2 as tickets_purchase_errors_expiredConsumable, h3 as tickets_purchase_errors_soldOutDuringPurchase, h4 as tickets_purchase_alreadyPaidFor, h5 as tickets_purchase_errors_missingAnswers, h6 as tickets_purchase_freeConsumablesPurchased, h7 as tickets_purchase_errors_unableToCreatePaymentIntent, h8 as tickets_purchase_errors_multipleActivePayments, h9 as tickets_purchase_errors_couldNotSaveIntentID, ha as tickets_purchase_readyToPurchase, hb as cart_errors_itemNotInCart, hc as cart_errors_noCart, hd as cart_itemHasBeenRemoved, he as cart_errors_reservationNotInCart, hf as cart_reservationHasBeenRemoved } from \"./messages.js\";\nimport { Q as QuestionType, q as questionForm } from \"./types5.js\";\nimport { a as apiNames } from \"./apiNames.js\";\nimport { a as authorize } from \"./authorization.js\";\nimport { r as redirect } from \"./redirect.js\";\nimport { f as fail, e as error } from \"./index.js\";\nimport \"just-clone\";\nimport \"ts-deepmerge\";\nimport \"memoize-weak\";\nimport { z as zod } from \"./zod.js\";\nimport \"devalue\";\nimport { s as superValidate, m as message } from \"./superValidate.js\";\nimport z, { z as z$1 } from \"zod\";\nimport { s as stripe, e as ensurePaymentIntentState, r as removePaymentIntent, d as creteConsumableMetadata, u as updatePaymentIntent, f as createPaymentIntent } from \"./stripeWebhooks.js\";\nimport { g as getFullName } from \"./member.js\";\nimport { ShoppableType } from \"@prisma/client\";\nimport { N as NotificationType } from \"./types3.js\";\nconst purchaseForm = z.object({\n  idempotencyKey: z.string()\n});\nconst createStripeCustomer = async ({ member }) => {\n  const { id, studentId } = member;\n  try {\n    const customer = await stripe.customers.create({\n      name: getFullName({ ...member, nickname: null }),\n      description: `D-sek member: ${studentId}`,\n      metadata: {\n        member: id\n      }\n    });\n    try {\n      await authorizedPrismaClient.member.update({\n        where: { id },\n        data: { stripeCustomerId: customer.id }\n      });\n      return customer;\n    } catch (error2) {\n      console.error(\n        `Could not save customer stripe info: ${member.id}, ${customer.id}`\n      );\n      throw new Error(`Could not save customer info: ${error2}`);\n    }\n  } catch (error2) {\n    throw new Error(`Failed to create stripe customer: ${error2}`);\n  }\n};\nconst obtainStripeCustomer = async (member) => {\n  const { stripeCustomerId } = member;\n  if (!stripeCustomerId) {\n    return await createStripeCustomer({ member });\n  }\n  try {\n    const customer = await stripe.customers.retrieve(stripeCustomerId);\n    if (!customer.deleted) {\n      return customer;\n    }\n    return await createStripeCustomer({ member });\n  } catch {\n    return await createStripeCustomer({ member });\n  }\n};\nconst clearOutConsumablesAfterSellingOut = async (soldOutShoppableIds) => {\n  await withHandledNotificationQueue(\n    authorizedPrismaClient.$transaction(async (tx) => {\n      const soldOutConsumables = await tx.consumable.findMany({\n        where: {\n          shoppableId: {\n            in: soldOutShoppableIds\n          },\n          purchasedAt: null\n        },\n        include: {\n          shoppable: true\n        }\n      });\n      await tx.consumable.deleteMany({\n        where: {\n          id: {\n            in: soldOutConsumables.map((c) => c.id)\n          }\n        }\n      });\n      const soldOutReservations = await tx.consumableReservation.findMany({\n        where: {\n          shoppableId: {\n            in: soldOutShoppableIds\n          }\n        },\n        include: {\n          shoppable: true\n        }\n      });\n      await tx.consumableReservation.deleteMany({\n        where: {\n          id: {\n            in: soldOutReservations.map((r) => r.id)\n          }\n        }\n      });\n      const memberIds = soldOutConsumables.map((con) => con.memberId).concat(soldOutReservations.map((res) => res.memberId)).filter(Boolean);\n      return [\n        {\n          title: \"ðŸ˜¢ SlutsÃ¥lt:(\",\n          message: `${soldOutReservations[0]?.shoppable?.title ?? \"Biljett\"} har blivit slutsÃ¥ld`,\n          memberIds,\n          type: NotificationType.PURCHASE_SOLD_OUT,\n          link: \"/shop/cart\"\n        }\n      ];\n    })\n  );\n};\nconst purchaseCart = async (prisma, identification, idempotencyKey) => {\n  const soldOutShoppableIds = [];\n  const now = /* @__PURE__ */ new Date();\n  const userConsumables = await prisma.consumable.findMany({\n    where: {\n      ...dbIdentification(identification),\n      purchasedAt: null\n    },\n    include: {\n      questionResponses: true,\n      shoppable: {\n        include: {\n          questions: {\n            where: {\n              removedAt: null\n            }\n          },\n          ticket: true,\n          _count: {\n            select: {\n              consumables: {\n                where: {\n                  purchasedAt: {\n                    not: null\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  });\n  if (userConsumables.length === 0) {\n    throw new Error(tickets_purchase_errors_cartEmpty());\n  }\n  for (const consumable of userConsumables) {\n    if (consumable.expiresAt && consumable.expiresAt < now) {\n      await withHandledNotificationQueue(\n        removeExpiredConsumables(prisma, /* @__PURE__ */ new Date()).then(\n          (res) => res.queuedNotifications\n        )\n      );\n      throw new Error(tickets_purchase_errors_expiredConsumable());\n    }\n    if (consumable.shoppable.type === ShoppableType.TICKET && consumable.shoppable._count.consumables >= (consumable.shoppable.ticket?.stock ?? 0)) {\n      soldOutShoppableIds.push(consumable.shoppable.id);\n    }\n  }\n  if (soldOutShoppableIds.length > 0) {\n    await clearOutConsumablesAfterSellingOut(soldOutShoppableIds);\n    throw new Error(tickets_purchase_errors_soldOutDuringPurchase());\n  }\n  let didUpdateAlreadyPaidFor = false;\n  const existingPaymentIntents = {};\n  for (const consumable of userConsumables) {\n    if (consumable.stripeIntentId) {\n      const [intent2, canRetryPayment] = await ensurePaymentIntentState(\n        consumable.stripeIntentId\n      );\n      if (intent2.status === \"succeeded\") didUpdateAlreadyPaidFor = true;\n      else if (!canRetryPayment)\n        await removePaymentIntent(consumable.stripeIntentId);\n      else existingPaymentIntents[intent2.id] = intent2;\n    }\n  }\n  if (didUpdateAlreadyPaidFor) {\n    return {\n      message: tickets_purchase_alreadyPaidFor(),\n      type: \"success\",\n      redirect: \"inventory\"\n    };\n  }\n  if (userConsumables.some(\n    (consumable) => consumable.questionResponses.length < consumable.shoppable.questions.length || // check if there is an unanswered question\n    consumable.shoppable.questions.some(\n      (q) => (\n        // check if no response exists for this question\n        consumable.questionResponses.some((r) => r.questionId === q.id) === false\n      )\n    )\n  )) {\n    throw new Error(tickets_purchase_errors_missingAnswers());\n  }\n  const price = calculateCartPrice(userConsumables);\n  if (price <= 0) {\n    await authorizedPrismaClient.consumable.updateMany({\n      where: {\n        id: {\n          in: userConsumables.map((c) => c.id)\n        },\n        shoppable: {\n          // in case any price is negative we filter by price=0.\n          // A product's price should never be negative, but we check just in case.\n          // We do not want to give away another product for free accidentally.\n          price: 0\n        }\n      },\n      data: {\n        purchasedAt: /* @__PURE__ */ new Date(),\n        priceAtPurchase: 0\n      }\n    });\n    return {\n      message: tickets_purchase_freeConsumablesPurchased(),\n      type: \"success\",\n      redirect: \"inventory\"\n    };\n  }\n  const member = identification.memberId ? await prisma.member.findUnique({\n    where: {\n      id: identification.memberId\n    }\n  }) : null;\n  const customer = member ? await obtainStripeCustomer(member) : null;\n  let intent;\n  const existingIntentIds = Object.keys(existingPaymentIntents);\n  const options = {\n    amount: price,\n    customer: customer?.id ?? void 0,\n    metadata: {\n      isAnonymousUser: !member ? \"true\" : \"false\",\n      // metadata can only be string or number\n      customerStudentId: member ? member.studentId : null,\n      customerName: member ? getFullName({\n        ...member,\n        nickname: null\n      }) : null,\n      ...creteConsumableMetadata(userConsumables)\n    }\n  };\n  if (existingIntentIds.length > 0) {\n    const intentId = existingIntentIds[0];\n    if (existingIntentIds.length > 1) {\n      await Promise.all(\n        existingIntentIds.filter((id) => id !== intentId).map((id) => removePaymentIntent(id))\n      );\n    }\n    intent = await updatePaymentIntent(intentId, {\n      ...options\n    });\n  } else {\n    intent = await createPaymentIntent({\n      ...options,\n      idempotencyKey\n      // makes sure if user presses button twice, only one payment intent is created\n    }).catch((err) => {\n      console.error(err);\n      throw new Error(tickets_purchase_errors_unableToCreatePaymentIntent());\n    });\n  }\n  try {\n    await authorizedPrismaClient.$transaction(async (tx) => {\n      const consumables = await tx.consumable.findMany({\n        where: {\n          id: {\n            in: userConsumables.map((c) => c.id)\n          },\n          OR: [\n            {\n              stripeIntentId: null\n            },\n            {\n              stripeIntentId: {\n                equals: intent.id\n                // it's fine if its the same (might be due to idempotencyKey)\n              }\n            }\n          ]\n        }\n      });\n      if (consumables.length !== userConsumables.length) {\n        throw new Error(tickets_purchase_errors_multipleActivePayments());\n      }\n      const results = await Promise.allSettled(\n        userConsumables.map(\n          (consumable) => tx.consumable.update({\n            where: {\n              id: consumable.id\n            },\n            data: {\n              stripeIntentId: intent.id,\n              priceAtPurchase: calculateConsumablePrice(consumable)\n            }\n          })\n        )\n      );\n      if (results.some((result) => result.status === \"rejected\")) {\n        throw new Error(tickets_purchase_errors_couldNotSaveIntentID());\n      }\n    });\n  } catch (err) {\n    await removePaymentIntent(intent.id);\n    throw err;\n  }\n  return {\n    clientSecret: intent.client_secret,\n    message: tickets_purchase_readyToPurchase(),\n    type: \"hidden\"\n  };\n};\nconst calculateConsumablePrice = (consumable) => consumable.shoppable.price + consumable.questionResponses.reduce((a, c) => a + (c.extraPrice ?? 0), 0);\nconst calculateCartPrice = (consumables) => consumables.reduce(\n  (acc, consumable) => acc + calculateConsumablePrice({\n    shoppable: consumable.shoppable,\n    questionResponses: consumable.questionResponses\n  }),\n  0\n);\nconst answerQuestion = async (prisma, identification, data) => {\n  const consumable = await prisma.consumable.findUnique({\n    where: {\n      ...dbIdentification(identification),\n      id: data.consumableId,\n      shoppable: {\n        questions: {\n          some: {\n            removedAt: null,\n            id: data.questionId\n          }\n        }\n      }\n    },\n    include: {\n      shoppable: {\n        include: {\n          questions: {\n            include: {\n              options: true\n            }\n          }\n        }\n      }\n    }\n  });\n  if (!consumable) {\n    throw new Error(cart_errors_itemNotInCart());\n  }\n  const question = consumable.shoppable.questions.find(\n    (q) => q.id === data.questionId\n  );\n  if (!question) throw new Error(\"Question not found\");\n  let extraPrice;\n  switch (question.type) {\n    case QuestionType.MultipleChoice: {\n      const answerObj = question.options.find(\n        (option) => option.answer === data.answer || option.answerEn === data.answer\n      );\n      if (!answerObj) throw new Error(\"Invalid option\");\n      if (answerObj.answer !== data.answer && answerObj.answerEn !== data.answer)\n        throw new Error(\"Corrupt answer\");\n      extraPrice = answerObj.extraPrice ?? 0;\n      break;\n    }\n    case QuestionType.Text:\n      extraPrice = 0;\n      break;\n    default:\n      throw new Error(`The question type \"${question.type}\" is not supported.`);\n  }\n  await prisma.itemQuestionResponse.upsert({\n    where: {\n      questionId_consumableId: {\n        questionId: question.id,\n        consumableId: consumable.id\n      }\n    },\n    update: {\n      answer: data.answer,\n      extraPrice\n    },\n    create: {\n      consumableId: consumable.id,\n      questionId: question.id,\n      answer: data.answer,\n      extraPrice\n    }\n  });\n};\nconst cartActions = {\n  removeItem: async ({ locals, request }) => {\n    const { user, prisma } = locals;\n    const form = await superValidate(\n      request,\n      zod(z$1.object({ id: z$1.string() }))\n    );\n    if (!form.valid) return fail(400, { form });\n    if (!user?.memberId && !user?.externalCode) {\n      return message(form, {\n        message: cart_errors_noCart(),\n        type: \"error\"\n      });\n    }\n    const consumable = await prisma.consumable.findUnique({\n      where: {\n        id: form.data.id\n      }\n    });\n    if (!consumable) {\n      return message(form, {\n        message: cart_errors_itemNotInCart(),\n        type: \"error\"\n      });\n    }\n    const queuedNotifications = await authorizedPrismaClient.$transaction(\n      async (tx) => {\n        await tx.consumable.delete({\n          where: {\n            id: consumable.id\n          }\n        });\n        return await moveQueueToCart(tx, consumable.shoppableId, 1);\n      }\n    );\n    sendQueuedNotifications(queuedNotifications);\n    return message(form, {\n      message: cart_itemHasBeenRemoved(),\n      type: \"success\"\n    });\n  },\n  removeReservation: async ({ locals, request }) => {\n    const { user, prisma } = locals;\n    const form = await superValidate(\n      request,\n      zod(z$1.object({ id: z$1.string() }))\n    );\n    if (!form.valid) return fail(400, { form });\n    if (!user?.memberId && !user?.externalCode) {\n      return message(form, {\n        message: cart_errors_noCart(),\n        type: \"error\"\n      });\n    }\n    const reservation = await prisma.consumableReservation.findUnique({\n      where: {\n        id: form.data.id\n      }\n    });\n    if (!reservation) {\n      return message(form, {\n        message: cart_errors_reservationNotInCart(),\n        type: \"error\"\n      });\n    }\n    await authorizedPrismaClient.$transaction(async (tx) => {\n      await tx.consumableReservation.delete({\n        where: {\n          id: reservation.id\n        }\n      });\n      if (reservation.order !== null)\n        await moveQueueForwardOneStep(\n          tx,\n          reservation.shoppableId,\n          reservation.order\n        );\n    });\n    return message(form, {\n      message: cart_reservationHasBeenRemoved(),\n      type: \"success\"\n    });\n  },\n  answerQuestion: async ({ locals, request }) => {\n    const { user, prisma } = locals;\n    const form = await superValidate(request, zod(questionForm));\n    if (!form.valid) return fail(400, { form });\n    if (!user?.memberId && !user?.externalCode) {\n      return message(form, {\n        message: cart_errors_noCart(),\n        type: \"error\"\n      });\n    }\n    const { memberId, externalCode } = user;\n    try {\n      await answerQuestion(\n        prisma,\n        memberId ? { memberId } : {\n          externalCode\n        },\n        form.data\n      );\n    } catch (e) {\n      return message(form, {\n        message: e instanceof Error ? e.message : `${e}`,\n        type: \"error\"\n      });\n    }\n    return message(form, {\n      message: \"Svaret har sparats.\",\n      type: \"hidden\"\n    });\n  },\n  purchase: async (event) => {\n    const { locals, request } = event;\n    const { user, prisma } = locals;\n    authorize(apiNames.WEBSHOP.PURCHASE, user);\n    const form = await superValidate(request, zod(purchaseForm));\n    if (!form.valid) return fail(400, { form });\n    if (!user?.memberId && !user?.externalCode) {\n      throw error(401, cart_errors_noCart());\n    }\n    let redirectUrl = void 0;\n    let data;\n    try {\n      const { redirect: redirect2, ...rest } = await purchaseCart(\n        prisma,\n        user.memberId ? {\n          memberId: user.memberId\n        } : {\n          externalCode: user.externalCode\n        },\n        form.data.idempotencyKey\n      );\n      redirectUrl = redirect2;\n      data = rest;\n    } catch (err) {\n      return message(\n        form,\n        {\n          message: `${\"message\" in err ? err.message : err}`,\n          type: \"error\"\n        },\n        {\n          status: 500\n        }\n      );\n    }\n    if (redirectUrl) {\n      throw redirect(redirectUrl, data, event);\n    }\n    return message(form, data);\n  }\n};\nconst getCart = async (prisma, id) => {\n  const now = /* @__PURE__ */ new Date();\n  await withHandledNotificationQueue(\n    removeExpiredConsumables(authorizedPrismaClient, now).then(\n      (res) => res.queuedNotifications\n    )\n  );\n  const inCart = await prisma.consumable.findMany({\n    where: {\n      ...dbIdentification(id),\n      OR: [{ expiresAt: { gt: now } }, { expiresAt: null }],\n      purchasedAt: null,\n      shoppable: { type: ShoppableType.TICKET }\n    },\n    include: {\n      questionResponses: true,\n      shoppable: {\n        include: {\n          questions: { where: { removedAt: null }, include: { options: true } },\n          ticket: {\n            include: { event: true }\n          },\n          _count: {\n            select: {\n              consumables: {\n                where: { purchasedAt: { not: null } }\n              }\n            }\n          }\n        }\n      }\n    }\n  });\n  const reservations = await prisma.consumableReservation.findMany({\n    where: {\n      ...dbIdentification(id),\n      shoppable: { type: ShoppableType.TICKET }\n    },\n    include: {\n      shoppable: {\n        include: {\n          ticket: { include: { event: true } }\n        }\n      }\n    }\n  });\n  return {\n    inCart: inCart.map((c) => ({\n      ...c,\n      shoppable: {\n        ...c.shoppable.ticket,\n        ...c.shoppable,\n        ticket: void 0\n      }\n    })),\n    reservations: reservations.map((c) => ({\n      ...c,\n      shoppable: {\n        ...c.shoppable.ticket,\n        ...c.shoppable,\n        ticket: void 0,\n        gracePeriodEndsAt: new Date(\n          c.shoppable.availableFrom.valueOf() + GRACE_PERIOD_WINDOW\n        )\n      }\n    }))\n  };\n};\nconst getCartWithExtras = async (prisma, identification) => {\n  const { inCart, reservations } = await getCart(prisma, identification);\n  const cartPrice = calculateCartPrice(inCart);\n  const totalPrice = cartPrice;\n  const inCartWithQuestionForms = await Promise.all(\n    inCart.map(async (item) => {\n      const questions = item.shoppable.questions;\n      const answers = item.questionResponses;\n      return {\n        ...item,\n        shoppable: {\n          ...item.shoppable,\n          questions: await Promise.all(\n            questions.map(async (question) => {\n              const answer = answers.find((a) => a.questionId === question.id);\n              return {\n                ...question,\n                form: await superValidate(\n                  {\n                    consumableId: item.id,\n                    questionId: question.id,\n                    answer: answer?.answer\n                  },\n                  zod(questionForm),\n                  {\n                    errors: false\n                  }\n                )\n              };\n            })\n          )\n        }\n      };\n    })\n  );\n  return {\n    inCart: inCartWithQuestionForms,\n    reservations,\n    purchaseForm: await superValidate(zod(purchaseForm)),\n    totalPrice,\n    transactionFee: 0\n  };\n};\nconst cartLoadFunction = async ({\n  locals,\n  depends\n}) => {\n  const { user, prisma } = locals;\n  if (!user?.memberId && !user?.externalCode) {\n    throw error(401, \"Du har ingen kundvagn.\");\n  }\n  depends(\"cart\");\n  authorize(apiNames.WEBSHOP.PURCHASE, user);\n  return await getCartWithExtras(\n    prisma,\n    user?.memberId ? {\n      memberId: user.memberId\n    } : {\n      externalCode: user.externalCode\n    }\n  );\n};\nexport {\n  cartActions as a,\n  cartLoadFunction as c\n};\n"],"names":["z$1"],"mappings":"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"}