{"version":3,"file":"_page.svelte-CJG3IEHx.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/news/_page.svelte.js"],"sourcesContent":["import { a as subscribe, g as getContext } from \"../../../../chunks/lifecycle.js\";\nimport { c as create_ssr_component, e as each, b as escape, v as validate_component, a as add_attribute } from \"../../../../chunks/ssr.js\";\nimport { p as page } from \"../../../../chunks/stores.js\";\nimport { P as Pagination } from \"../../../../chunks/Pagination.js\";\nimport { S as SearchBar } from \"../../../../chunks/SearchBar.js\";\nimport { T as TagSelector } from \"../../../../chunks/TagSelector.js\";\nimport { a as apiNames } from \"../../../../chunks/apiNames.js\";\nimport { i as isAuthorized } from \"../../../../chunks/authorization.js\";\nimport { A as AuthorSignature } from \"../../../../chunks/AuthorSignature.js\";\nimport \"../../../../chunks/i18n.js\";\nimport \"../../../../chunks/client.js\";\nimport \"../../../../chunks/index.js\";\nimport dayjs from \"dayjs\";\nimport { markdownToTxt } from \"markdown-to-txt\";\nimport { A as news, fp as news_tags, fq as news_create } from \"../../../../chunks/messages.js\";\nimport { S as SetPageTitle } from \"../../../../chunks/SetPageTitle.js\";\nconst SmallArticleCard = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { article } = $$props;\n  if ($$props.article === void 0 && $$bindings.article && article !== void 0) $$bindings.article(article);\n  return `<article class=\"row-span-2 grid grid-rows-subgrid gap-0 overflow-hidden rounded-xl bg-base-200\"><div class=\"flex justify-between gap-4 bg-base-300 p-4\"><div class=\"flex flex-wrap gap-2\">${each(article.tags, (tag) => {\n    return `<span class=\"badge text-xs text-neutral-600\">${escape(tag.name)}</span>`;\n  })}</div></div> <div class=\"flex flex-col items-stretch overflow-hidden p-8\"><div class=\"flex-1\"><button class=\"group text-start\"><h1 class=\"text-2xl font-bold group-hover:underline\">${escape(article.header)}</h1> <div class=\"prose mb-8 mt-2 line-clamp-3 prose-headings:text-sm\">${escape(markdownToTxt(article.body, { pedantic: true }))}</div></button></div> ${validate_component(AuthorSignature, \"AuthorSignature\").$$render(\n    $$result,\n    {\n      member: article.author.member,\n      position: article.author.mandate?.position,\n      customAuthor: article.author.customAuthor ?? void 0,\n      type: article.author.type\n    },\n    {},\n    {\n      end: () => {\n        return `<p class=\"my-1 self-end text-nowrap text-xs font-light text-neutral-600\" slot=\"end\">${dayjs(article.createdAt).diff(dayjs(), \"week\") < -1 ? `${escape(dayjs(article.createdAt).format(\"YYYY-MM-DD\"))}` : `${escape(dayjs(article.createdAt).fromNow())}`}</p>`;\n      }\n    }\n  )}</div></article>`;\n});\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $page, $$unsubscribe_page;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  let { data } = $$props;\n  let filteredTags = data.allTags.filter((tag) => $page.url.searchParams.getAll(\"tags\").includes(tag.name));\n  let form;\n  const pArAgLiDe_translate_attribute_pass_context = getContext(\"$paraglide-adapter-sveltekit:context\");\n  function pArAgLiDe_translate_attribute_pass_translateAttribute(value, lang_value) {\n    if (typeof value !== \"string\") return value;\n    if (!pArAgLiDe_translate_attribute_pass_context) return value;\n    return pArAgLiDe_translate_attribute_pass_context.translateHref(value, lang_value);\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);\n  let $$settled;\n  let $$rendered;\n  let previous_head = $$result.head;\n  do {\n    $$settled = true;\n    $$result.head = previous_head;\n    $$rendered = `${validate_component(SetPageTitle, \"SetPageTitle\").$$render($$result, { title: news() }, {}, {})} <div class=\"space-y-4\"><section><form method=\"get\" class=\"form-control flex-1 gap-2 md:flex-row md:items-end\" id=\"filter-form\"${add_attribute(\"this\", form, 0)}>${validate_component(TagSelector, \"TagSelector\").$$render(\n      $$result,\n      {\n        allTags: data.allTags,\n        onChange: () => setTimeout(() => form.requestSubmit()),\n        selectedTags: filteredTags\n      },\n      {\n        selectedTags: ($$value) => {\n          filteredTags = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )} ${validate_component(SearchBar, \"SearchBar\").$$render($$result, {}, {}, {})} ${each(filteredTags, (tag) => {\n      return `<input type=\"hidden\" name=\"tags\"${add_attribute(\"value\", tag.name, 0)}>`;\n    })} ${isAuthorized(apiNames.TAGS.CREATE, data.user) || isAuthorized(apiNames.TAGS.UPDATE, data.user) ? `<a class=\"btn\"${add_attribute(\"href\", pArAgLiDe_translate_attribute_pass_translateAttribute(`/news/tags`, void 0), 0)}>${escape(news_tags())}</a>` : ``} ${isAuthorized(apiNames.NEWS.CREATE, data.user) ? `<a class=\"btn btn-primary\"${add_attribute(\"href\", pArAgLiDe_translate_attribute_pass_translateAttribute(`/news/create`, void 0), 0)}>+ ${escape(news_create())}</a>` : ``}</form></section> <section class=\"grid grid-cols-1 gap-8 md:grid-cols-2\">${each(data.articles, (article) => {\n      return `${validate_component(SmallArticleCard, \"SmallArticleCard\").$$render($$result, { article }, {}, {})}`;\n    })}</section> ${validate_component(Pagination, \"Pagination\").$$render($$result, { count: data.pageCount }, {}, {})}</div>`;\n  } while (!$$settled);\n  $$unsubscribe_page();\n  return $$rendered;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}