{"version":3,"file":"73-DclflUNl.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/members/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/73.js"],"sourcesContent":["import { e as error } from \"../../../../chunks/index.js\";\nimport { eL as members_errors_notLoggedIn } from \"../../../../chunks/messages.js\";\nconst allowedProgrammes = [\"D\", \"C\", \"VR/AR\"];\nconst load = async (request) => {\n  const { prisma, user } = request.locals;\n  if (!user?.memberId) {\n    error(401, members_errors_notLoggedIn());\n  }\n  let classProgramme = request.url.searchParams.get(\"programme\");\n  if (!classProgramme || !allowedProgrammes.includes(classProgramme)) {\n    classProgramme = \"all\";\n  }\n  let classYear = parseInt(request.url.searchParams.get(\"year\") ?? \"\");\n  if (isNaN(classYear)) {\n    classYear = (/* @__PURE__ */ new Date()).getFullYear();\n  }\n  const members = await prisma.member.findMany({\n    where: {\n      classYear,\n      classProgramme: classProgramme === \"all\" ? {\n        // dont actually show ALL members in db, only those in the specified programmes\n        // we have some members for other programmes, but they are not part of the guild\n        in: allowedProgrammes\n      } : {\n        equals: classProgramme\n      }\n    },\n    orderBy: [\n      {\n        firstName: \"asc\"\n      },\n      {\n        lastName: \"asc\"\n      },\n      {\n        classProgramme: \"asc\"\n      }\n    ]\n  });\n  return {\n    members,\n    programme: classProgramme,\n    year: classYear\n  };\n};\nexport {\n  load\n};\n","import * as server from '../entries/pages/(app)/members/_page.server.ts.js';\n\nexport const index = 73;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(app)/members/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(app)/members/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/73.CXpL1rVw.js\",\"_app/immutable/chunks/scheduler.DK5noefF.js\",\"_app/immutable/chunks/index.OECaLbXR.js\",\"_app/immutable/chunks/each.Dbd03sI1.js\",\"_app/immutable/chunks/redirect.D99U8wwi.js\",\"_app/immutable/chunks/i18n.Cv4-1ZiX.js\",\"_app/immutable/chunks/123.BVaw0gZK.js\",\"_app/immutable/chunks/index.BanBdRDU.js\",\"_app/immutable/chunks/stores.BdoTh84D.js\",\"_app/immutable/chunks/runtime.DTG1FAeQ.js\",\"_app/immutable/chunks/index.DQfRr7yB.js\",\"_app/immutable/chunks/ClassBadge.D_Ryvt6R.js\",\"_app/immutable/chunks/Pagination.C3TH-bth.js\",\"_app/immutable/chunks/bundle-mjs.BkWO730n.js\",\"_app/immutable/chunks/MemberAvatar.DsenHHaP.js\",\"_app/immutable/chunks/member.Deknk2Gk.js\",\"_app/immutable/chunks/messages.DZzIl59o.js\",\"_app/immutable/chunks/SetPageTitle.Cf9LBAU4.js\",\"_app/immutable/chunks/pageTitle.DQXADn3y.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;AAEA,MAAM,iBAAiB,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;AAC9C,MAAM,IAAI,GAAG,OAAO,OAAO,KAAK;AAChC,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC;AAC1C,EAAE,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE;AACvB,IAAI,KAAK,CAAC,GAAG,EAAE,0BAA0B,EAAE,CAAC,CAAC;AAC7C,GAAG;AACH,EAAE,IAAI,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;AACjE,EAAE,IAAI,CAAC,cAAc,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;AACtE,IAAI,cAAc,GAAG,KAAK,CAAC;AAC3B,GAAG;AACH,EAAE,IAAI,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;AACvE,EAAE,IAAI,KAAK,CAAC,SAAS,CAAC,EAAE;AACxB,IAAI,SAAS,GAAG,iBAAiB,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE,CAAC;AAC3D,GAAG;AACH,EAAE,MAAM,OAAO,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC/C,IAAI,KAAK,EAAE;AACX,MAAM,SAAS;AACf,MAAM,cAAc,EAAE,cAAc,KAAK,KAAK,GAAG;AACjD;AACA;AACA,QAAQ,EAAE,EAAE,iBAAiB;AAC7B,OAAO,GAAG;AACV,QAAQ,MAAM,EAAE,cAAc;AAC9B,OAAO;AACP,KAAK;AACL,IAAI,OAAO,EAAE;AACb,MAAM;AACN,QAAQ,SAAS,EAAE,KAAK;AACxB,OAAO;AACP,MAAM;AACN,QAAQ,QAAQ,EAAE,KAAK;AACvB,OAAO;AACP,MAAM;AACN,QAAQ,cAAc,EAAE,KAAK;AAC7B,OAAO;AACP,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,OAAO;AACT,IAAI,OAAO;AACX,IAAI,SAAS,EAAE,cAAc;AAC7B,IAAI,IAAI,EAAE,SAAS;AACnB,GAAG,CAAC;AACJ,CAAC;;;;;;;AC1CW,MAAC,KAAK,GAAG,GAAG;AACxB,IAAI,eAAe,CAAC;AACR,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAgD,CAAC,EAAE,QAAQ;AAEtH,MAAC,SAAS,GAAG,2CAA2C;AACxD,MAAC,OAAO,GAAG,CAAC,qCAAqC,CAAC,6CAA6C,CAAC,yCAAyC,CAAC,wCAAwC,CAAC,4CAA4C,CAAC,wCAAwC,CAAC,uCAAuC,CAAC,yCAAyC,CAAC,0CAA0C,CAAC,2CAA2C,CAAC,yCAAyC,CAAC,8CAA8C,CAAC,8CAA8C,CAAC,8CAA8C,CAAC,gDAAgD,CAAC,0CAA0C,CAAC,4CAA4C,CAAC,gDAAgD,CAAC,6CAA6C,EAAE;AACl1B,MAAC,WAAW,GAAG,GAAG;AAClB,MAAC,KAAK,GAAG;;;;"}