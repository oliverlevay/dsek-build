{"version":3,"file":"calendar-BEh3uvWG.js","sources":["../../../.svelte-kit/adapter-node/chunks/calendar.js"],"sourcesContent":["import { e as error } from \"./index.js\";\nimport dayjs from \"dayjs\";\nimport { createEvents } from \"ics\";\nconst generateICS = async (events, setHeaders) => {\n  const icsEvents = events.map((event) => {\n    const start = dayjs(event.startDatetime);\n    const end = dayjs(event.endDatetime);\n    return {\n      uid: event.id,\n      start: [\n        start.year(),\n        start.month() + 1,\n        start.date(),\n        start.hour(),\n        start.minute()\n      ],\n      end: [end.year(), end.month() + 1, end.date(), end.hour(), end.minute()],\n      title: event.title,\n      description: event.description,\n      location: event.location ?? void 0,\n      sequence: event.numberOfUpdates ?? void 0\n    };\n  });\n  const calendar = createEvents(icsEvents);\n  if (calendar.error) {\n    throw error(\n      400,\n      \"Failed to create calendar ICS\" + JSON.stringify(\n        calendar.error,\n        Object.getOwnPropertyNames(calendar.error)\n      )\n    );\n  }\n  setHeaders({\n    \"Content-Type\": \"text/calendar\",\n    \"Content-Disposition\": 'attachment; filename=\"D-sektionen_events.ics\"'\n  });\n  return new Response(calendar.value);\n};\nexport {\n  generateICS as g\n};\n"],"names":[],"mappings":";;;;AAGK,MAAC,WAAW,GAAG,OAAO,MAAM,EAAE,UAAU,KAAK;AAClD,EAAE,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AAC1C,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AAC7C,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AACzC,IAAI,OAAO;AACX,MAAM,GAAG,EAAE,KAAK,CAAC,EAAE;AACnB,MAAM,KAAK,EAAE;AACb,QAAQ,KAAK,CAAC,IAAI,EAAE;AACpB,QAAQ,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC;AACzB,QAAQ,KAAK,CAAC,IAAI,EAAE;AACpB,QAAQ,KAAK,CAAC,IAAI,EAAE;AACpB,QAAQ,KAAK,CAAC,MAAM,EAAE;AACtB,OAAO;AACP,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,MAAM,EAAE,CAAC;AAC9E,MAAM,KAAK,EAAE,KAAK,CAAC,KAAK;AACxB,MAAM,WAAW,EAAE,KAAK,CAAC,WAAW;AACpC,MAAM,QAAQ,EAAE,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC;AACxC,MAAM,QAAQ,EAAE,KAAK,CAAC,eAAe,IAAI,KAAK,CAAC;AAC/C,KAAK,CAAC;AACN,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,QAAQ,GAAG,YAAY,CAAC,SAAS,CAAC,CAAC;AAC3C,EAAE,IAAI,QAAQ,CAAC,KAAK,EAAE;AACtB,IAAI,MAAM,KAAK;AACf,MAAM,GAAG;AACT,MAAM,+BAA+B,GAAG,IAAI,CAAC,SAAS;AACtD,QAAQ,QAAQ,CAAC,KAAK;AACtB,QAAQ,MAAM,CAAC,mBAAmB,CAAC,QAAQ,CAAC,KAAK,CAAC;AAClD,OAAO;AACP,KAAK,CAAC;AACN,GAAG;AACH,EAAE,UAAU,CAAC;AACb,IAAI,cAAc,EAAE,eAAe;AACnC,IAAI,qBAAqB,EAAE,+CAA+C;AAC1E,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,IAAI,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACtC;;;;"}