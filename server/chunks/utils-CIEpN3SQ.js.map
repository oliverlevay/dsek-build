{"version":3,"file":"utils-CIEpN3SQ.js","sources":["../../../.svelte-kit/adapter-node/chunks/utils.js"],"sourcesContent":["async function getAliasToPositions(prisma) {\n  return (await prisma.emailAlias.findMany({\n    include: {\n      position: true\n    },\n    orderBy: {\n      email: \"asc\"\n    }\n  })).reduce((acc, cur) => {\n    if (!acc.has(cur.email)) {\n      acc.set(cur.email, []);\n    }\n    acc.get(cur.email)?.push(cur);\n    return acc;\n  }, /* @__PURE__ */ new Map());\n}\nasync function getCurrentMembersForPosition(positionId, prisma) {\n  const now = /* @__PURE__ */ new Date();\n  return prisma.mandate.findMany({\n    where: {\n      positionId,\n      startDate: {\n        lte: now\n      },\n      endDate: {\n        gte: now\n      }\n    },\n    select: {\n      memberId: true,\n      member: {\n        select: {\n          studentId: true\n        }\n      }\n    }\n  }).then(\n    (mandates) => mandates.reduce((acc, cur) => {\n      acc.push({\n        studentId: cur.member.studentId,\n        memberId: cur.memberId\n      });\n      return acc;\n    }, [])\n  );\n}\nasync function getEmailsForManyMembers(memberIds, prisma) {\n  return (await prisma.member.findMany({\n    where: {\n      id: {\n        in: memberIds\n      },\n      studentId: {\n        not: null\n      }\n    },\n    select: {\n      studentId: true,\n      email: true\n    }\n  })).reduce((acc, cur) => {\n    if (cur.studentId != null && cur.email != null) {\n      acc.set(cur.studentId, cur.email);\n    }\n    return acc;\n  }, /* @__PURE__ */ new Map());\n}\nexport {\n  getCurrentMembersForPosition as a,\n  getEmailsForManyMembers as b,\n  getAliasToPositions as g\n};\n"],"names":[],"mappings":"AAAA,eAAe,mBAAmB,CAAC,MAAM,EAAE;AAC3C,EAAE,OAAO,CAAC,MAAM,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;AAC3C,IAAI,OAAO,EAAE;AACb,MAAM,QAAQ,EAAE,IAAI;AACpB,KAAK;AACL,IAAI,OAAO,EAAE;AACb,MAAM,KAAK,EAAE,KAAK;AAClB,KAAK;AACL,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAC3B,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;AAC7B,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;AAClC,IAAI,OAAO,GAAG,CAAC;AACf,GAAG,kBAAkB,IAAI,GAAG,EAAE,CAAC,CAAC;AAChC,CAAC;AACD,eAAe,4BAA4B,CAAC,UAAU,EAAE,MAAM,EAAE;AAChE,EAAE,MAAM,GAAG,mBAAmB,IAAI,IAAI,EAAE,CAAC;AACzC,EAAE,OAAO,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;AACjC,IAAI,KAAK,EAAE;AACX,MAAM,UAAU;AAChB,MAAM,SAAS,EAAE;AACjB,QAAQ,GAAG,EAAE,GAAG;AAChB,OAAO;AACP,MAAM,OAAO,EAAE;AACf,QAAQ,GAAG,EAAE,GAAG;AAChB,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,MAAM,EAAE;AACd,QAAQ,MAAM,EAAE;AAChB,UAAU,SAAS,EAAE,IAAI;AACzB,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG,CAAC,CAAC,IAAI;AACT,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAChD,MAAM,GAAG,CAAC,IAAI,CAAC;AACf,QAAQ,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS;AACvC,QAAQ,QAAQ,EAAE,GAAG,CAAC,QAAQ;AAC9B,OAAO,CAAC,CAAC;AACT,MAAM,OAAO,GAAG,CAAC;AACjB,KAAK,EAAE,EAAE,CAAC;AACV,GAAG,CAAC;AACJ,CAAC;AACD,eAAe,uBAAuB,CAAC,SAAS,EAAE,MAAM,EAAE;AAC1D,EAAE,OAAO,CAAC,MAAM,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;AACvC,IAAI,KAAK,EAAE;AACX,MAAM,EAAE,EAAE;AACV,QAAQ,EAAE,EAAE,SAAS;AACrB,OAAO;AACP,MAAM,SAAS,EAAE;AACjB,QAAQ,GAAG,EAAE,IAAI;AACjB,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM,SAAS,EAAE,IAAI;AACrB,MAAM,KAAK,EAAE,IAAI;AACjB,KAAK;AACL,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAC3B,IAAI,IAAI,GAAG,CAAC,SAAS,IAAI,IAAI,IAAI,GAAG,CAAC,KAAK,IAAI,IAAI,EAAE;AACpD,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;AACxC,KAAK;AACL,IAAI,OAAO,GAAG,CAAC;AACf,GAAG,kBAAkB,IAAI,GAAG,EAAE,CAAC,CAAC;AAChC;;;;"}