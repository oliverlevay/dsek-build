{"version":3,"file":"helpers-Cg7T54uV.js","sources":["../../../.svelte-kit/adapter-node/chunks/helpers.js"],"sourcesContent":["import { a as apiNames } from \"./apiNames.js\";\nasync function getExistingCategories(prisma, accessPolicies = [], includeDeleted = false) {\n  if (!accessPolicies.includes(apiNames.SONG.DELETE)) {\n    includeDeleted = false;\n  }\n  const existingCategories = (await prisma.song.findMany({\n    distinct: [\"category\"],\n    orderBy: {\n      category: \"asc\"\n    },\n    select: {\n      category: true\n    },\n    where: includeDeleted ? {} : {\n      deletedAt: null\n    }\n  })).reduce((acc, cur) => {\n    if (cur.category !== null) {\n      acc.push(cur.category);\n    }\n    return acc;\n  }, []);\n  return existingCategories;\n}\nasync function getExistingMelodies(prisma, accessPolicies = [], includeDeleted = false) {\n  if (!accessPolicies.includes(apiNames.SONG.DELETE)) {\n    includeDeleted = false;\n  }\n  const existingMelodies = (await prisma.song.findMany({\n    distinct: [\"melody\"],\n    orderBy: {\n      melody: \"asc\"\n    },\n    select: {\n      melody: true\n    },\n    where: includeDeleted ? {} : {\n      deletedAt: null\n    }\n  })).reduce((acc, cur) => {\n    if (cur.melody !== null) {\n      acc.push(cur.melody);\n    }\n    return acc;\n  }, []);\n  return existingMelodies;\n}\nfunction canAccessDeletedSongs(accessPolicies) {\n  return accessPolicies.includes(apiNames.SONG.DELETE);\n}\nfunction fixSongText(s) {\n  return s.replaceAll(\"---\", \"‚Äî\").replaceAll(\"--\", \"‚Äì\").replaceAll(\"||:\", \"ùÑÜ\").replaceAll(\":||\", \"ùÑá\").replaceAll(\"|:\", \"ùÑÜ\").replaceAll(\":|\", \"ùÑá\");\n}\nexport {\n  getExistingMelodies as a,\n  canAccessDeletedSongs as c,\n  fixSongText as f,\n  getExistingCategories as g\n};\n"],"names":[],"mappings":";;AACA,eAAe,qBAAqB,CAAC,MAAM,EAAE,cAAc,GAAG,EAAE,EAAE,cAAc,GAAG,KAAK,EAAE;AAC1F,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACtD,IAAI,cAAc,GAAG,KAAK,CAAC;AAC3B,GAAG;AACH,EAAE,MAAM,kBAAkB,GAAG,CAAC,MAAM,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;AACzD,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;AAC1B,IAAI,OAAO,EAAE;AACb,MAAM,QAAQ,EAAE,KAAK;AACrB,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM,QAAQ,EAAE,IAAI;AACpB,KAAK;AACL,IAAI,KAAK,EAAE,cAAc,GAAG,EAAE,GAAG;AACjC,MAAM,SAAS,EAAE,IAAI;AACrB,KAAK;AACL,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAC3B,IAAI,IAAI,GAAG,CAAC,QAAQ,KAAK,IAAI,EAAE;AAC/B,MAAM,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,OAAO,GAAG,CAAC;AACf,GAAG,EAAE,EAAE,CAAC,CAAC;AACT,EAAE,OAAO,kBAAkB,CAAC;AAC5B,CAAC;AACD,eAAe,mBAAmB,CAAC,MAAM,EAAE,cAAc,GAAG,EAAE,EAAE,cAAc,GAAG,KAAK,EAAE;AACxF,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACtD,IAAI,cAAc,GAAG,KAAK,CAAC;AAC3B,GAAG;AACH,EAAE,MAAM,gBAAgB,GAAG,CAAC,MAAM,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;AACvD,IAAI,QAAQ,EAAE,CAAC,QAAQ,CAAC;AACxB,IAAI,OAAO,EAAE;AACb,MAAM,MAAM,EAAE,KAAK;AACnB,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM,MAAM,EAAE,IAAI;AAClB,KAAK;AACL,IAAI,KAAK,EAAE,cAAc,GAAG,EAAE,GAAG;AACjC,MAAM,SAAS,EAAE,IAAI;AACrB,KAAK;AACL,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAC3B,IAAI,IAAI,GAAG,CAAC,MAAM,KAAK,IAAI,EAAE;AAC7B,MAAM,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC3B,KAAK;AACL,IAAI,OAAO,GAAG,CAAC;AACf,GAAG,EAAE,EAAE,CAAC,CAAC;AACT,EAAE,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AACD,SAAS,qBAAqB,CAAC,cAAc,EAAE;AAC/C,EAAE,OAAO,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACvD,CAAC;AACD,SAAS,WAAW,CAAC,CAAC,EAAE;AACxB,EAAE,OAAO,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACtJ;;;;"}