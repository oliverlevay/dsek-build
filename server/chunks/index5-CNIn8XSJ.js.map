{"version":3,"file":"index5-CNIn8XSJ.js","sources":["../../../.svelte-kit/adapter-node/chunks/index5.js"],"sourcesContent":["import KcAdminClient from \"@keycloak/keycloak-admin-client\";\nimport { d as private_env } from \"./shared-server.js\";\nimport { e as error } from \"./index.js\";\nconst enabled = private_env.KEYCLOAK_ENABLED === \"true\";\nasync function connect() {\n  const kcAdminClient = new KcAdminClient({\n    baseUrl: private_env.KEYCLOAK_ENDPOINT || \"\",\n    realmName: \"master\"\n  });\n  await kcAdminClient.auth({\n    username: private_env.KEYCLOAK_ADMIN_USERNAME || \"\",\n    password: private_env.KEYCLOAK_ADMIN_PASSWORD || \"\",\n    grantType: \"password\",\n    clientId: \"admin-cli\"\n  });\n  kcAdminClient.setConfig({ realmName: \"dsek\" });\n  return kcAdminClient;\n}\nasync function _getUserId(client, username) {\n  const response = await client.users.find({ username });\n  if (response.length === 0) error(404, `${username} not found in Keycloak`);\n  if (!response[0] || response.length !== 1)\n    error(400, `${username} returned ${response.length} users in Keycloak`);\n  return response[0].id;\n}\nasync function getUserId(username) {\n  if (!enabled) return;\n  const client = await connect();\n  try {\n    return await _getUserId(client, username);\n  } catch (error2) {\n    console.log(error2);\n    return null;\n  }\n}\nfunction getRoleNames(id) {\n  const parts = id.split(\".\");\n  return [...Array(parts.length).keys()].map(\n    (i) => parts.slice(0, i + 1).join(\".\")\n  );\n}\nasync function getGroupId(client, positionId) {\n  const roleNames = getRoleNames(positionId);\n  const groups = await client.groups.find();\n  let group = groups.find((g) => g.name === roleNames[0]);\n  roleNames.slice(1).forEach((name) => {\n    group = group?.subGroups?.find((g) => g.name === name);\n  });\n  if (!group) {\n    throw new Error(`Failed to find group for position ${positionId}`);\n  }\n  return group?.id;\n}\nasync function updateProfile(username, firstName, lastName) {\n  if (!enabled) return;\n  try {\n    const client = await connect();\n    const id = await _getUserId(client, username);\n    await client.users.update(\n      { id },\n      {\n        firstName,\n        lastName\n      }\n    );\n    console.log(`updated profile`);\n  } catch (error2) {\n    console.log(error2);\n  }\n}\nasync function addMandate(username, positionId) {\n  if (!enabled) return;\n  try {\n    const client = await connect();\n    const id = await _getUserId(client, username);\n    const groupId = await getGroupId(client, positionId);\n    await client.users.addToGroup({\n      id,\n      groupId\n    });\n  } catch (error2) {\n    console.log(error2);\n  }\n}\nasync function deleteMandate(username, positionId) {\n  if (!enabled) return;\n  try {\n    const client = await connect();\n    const id = await _getUserId(client, username);\n    const groupId = await getGroupId(client, positionId);\n    await client.users.delFromGroup({\n      id,\n      groupId\n    });\n  } catch (error2) {\n    console.log(error2);\n  }\n}\nasync function updateMandate(prisma) {\n  if (!enabled) return;\n  const now = (/* @__PURE__ */ new Date()).toISOString();\n  const lastKeycloakUpdateResult = await prisma.lastKeycloakUpdate.findMany({\n    take: 1,\n    orderBy: [\n      {\n        id: \"desc\"\n      }\n    ],\n    select: {\n      time: true\n    }\n  });\n  const last = lastKeycloakUpdateResult[0]?.time ?? \"1982-12-31T00:00:00.000Z\";\n  const result = await prisma.mandate.findMany({\n    where: {\n      endDate: {\n        lte: now,\n        gte: last\n      }\n    },\n    select: {\n      positionId: true,\n      member: {\n        select: {\n          studentId: true\n        }\n      }\n    }\n  });\n  console.log(\n    `[${(/* @__PURE__ */ new Date()).toISOString()}] updating ${result.length} users groups`\n  );\n  result.forEach(async ({ positionId, member: { studentId } }) => {\n    await deleteMandate(studentId, positionId);\n  });\n  await prisma.lastKeycloakUpdate.create({\n    data: {\n      time: now\n    }\n  });\n}\nasync function updateEmails(prisma) {\n  if (!enabled) return;\n  const currentUserEmail = (await prisma.member.findMany({\n    select: {\n      studentId: true,\n      email: true\n    },\n    distinct: [\"studentId\"]\n  })).reduce((acc, curr) => {\n    if (curr.studentId) acc.set(curr.studentId, curr.email);\n    return acc;\n  }, /* @__PURE__ */ new Map());\n  if (currentUserEmail.size === 0) {\n    console.log(\n      `[${(/* @__PURE__ */ new Date()).toISOString()}] email sync aborted, no users in database`\n    );\n    return;\n  }\n  const userEmails = await getManyUserEmails(currentUserEmail);\n  console.log(\n    `[${(/* @__PURE__ */ new Date()).toISOString()}] updating ${userEmails.size} emails`\n  );\n  for (const [studentId, email] of userEmails) {\n    try {\n      await prisma.member.update({\n        where: {\n          studentId\n        },\n        data: {\n          email\n        }\n      });\n    } catch (error2) {\n      console.log(\"Failed to update email for\", studentId, email);\n      console.log(error2);\n    }\n  }\n}\nasync function getManyUserEmails(currentUserEmail) {\n  if (!enabled) return /* @__PURE__ */ new Map();\n  const client = await connect();\n  const userEmails = /* @__PURE__ */ new Map();\n  const users = [];\n  do {\n    users.push(...await client.users.find({ max: 500, first: users.length }));\n  } while (users.length % 500 === 0);\n  users.forEach((user) => {\n    const { username, email } = user;\n    if (!username || !email) return;\n    if (currentUserEmail.has(username) && // if the user exists in our database\n    currentUserEmail.get(username) !== user.email) {\n      userEmails.set(username, email);\n    }\n  });\n  return userEmails;\n}\nasync function hasUsername(username) {\n  if (!enabled) return false;\n  const client = await connect();\n  const user = await client.users.find({ username });\n  return user.filter((u) => u.username === username).length > 0;\n}\nasync function hasEmail(email) {\n  if (!enabled) return false;\n  const client = await connect();\n  const user = await client.users.find({ email });\n  return user.filter((u) => u.email === email).length > 0;\n}\nasync function getEmail(username) {\n  if (!enabled) return;\n  const client = await connect();\n  const user = await client.users.find({ username });\n  if (user.length === 1) return user[0]?.email;\n}\nasync function sync(prisma) {\n  updateMandate(prisma);\n  updateEmails(prisma);\n}\nconst keycloak = {\n  updateProfile,\n  addMandate,\n  deleteMandate,\n  getUserId,\n  getManyUserEmails,\n  hasUsername,\n  hasEmail,\n  getEmail,\n  sync\n};\nexport {\n  keycloak as k\n};\n"],"names":[],"mappings":"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"}