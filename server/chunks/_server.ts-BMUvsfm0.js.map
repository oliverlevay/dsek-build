{"version":3,"file":"_server.ts-BMUvsfm0.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/(app)/events/subscribe/_server.ts.js"],"sourcesContent":["import { B as BASIC_EVENT_FILTER } from \"../../../../../chunks/events.js\";\nimport { g as generateICS } from \"../../../../../chunks/calendar.js\";\nimport dayjs from \"dayjs\";\nconst GET = async ({ locals, setHeaders }) => {\n  const { prisma } = locals;\n  const events = await prisma.event.findMany({\n    where: {\n      ...BASIC_EVENT_FILTER(false),\n      startDatetime: {\n        gte: dayjs().subtract(1, \"month\").toDate()\n      }\n    }\n  });\n  return generateICS(events, setHeaders);\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;AAGK,MAAC,GAAG,GAAG,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK;AAC9C,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAC5B,EAAE,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AAC7C,IAAI,KAAK,EAAE;AACX,MAAM,GAAG,kBAAkB,CAAC,KAAK,CAAC;AAClC,MAAM,aAAa,EAAE;AACrB,QAAQ,GAAG,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,MAAM,EAAE;AAClD,OAAO;AACP,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,WAAW,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACzC;;;;"}