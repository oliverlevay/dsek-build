{"version":3,"file":"schema3-YvxXxCE2.js","sources":["../../../.svelte-kit/adapter-node/chunks/schema3.js"],"sourcesContent":["import { t as tagSchema } from \"./schemas.js\";\nimport { z } from \"zod\";\nimport { e7 as events_errors_endAfterStart } from \"./messages.js\";\nimport { i as isFileImage } from \"./utils2.js\";\nconst recurringTypeValues = {\n  DAILY: \"DAILY\",\n  WEEKLY: \"WEEKLY\",\n  MONTHLY: \"MONTHLY\",\n  YEARLY: \"YEARLY\"\n};\nconst recurringTypes = {\n  DAILY: \"Dagsvis\",\n  WEEKLY: \"Veckovis\",\n  MONTHLY: \"Månadsvis\",\n  YEARLY: \"Årsvis\"\n};\nconst recurringTypesList = Object.keys(recurringTypeValues);\nfunction isRecurringType(str) {\n  return !!recurringTypesList.find((recurringType) => str === recurringType);\n}\nfunction getIncrementType(type) {\n  switch (type) {\n    case recurringTypeValues.DAILY:\n      return \"day\";\n    case recurringTypeValues.WEEKLY:\n      return \"week\";\n    case recurringTypeValues.MONTHLY:\n      return \"month\";\n    case recurringTypeValues.YEARLY:\n      return \"year\";\n  }\n  throw new Error(\"Invalid recurring type\");\n}\nconst eventSchema = z.object({\n  title: z.string(),\n  titleEn: z.string().nullable(),\n  description: z.string().default(\"\"),\n  descriptionEn: z.string().nullable(),\n  shortDescription: z.string().nullable().default(null),\n  shortDescriptionEn: z.string().nullable().default(null),\n  link: z.string().nullable().default(null),\n  location: z.string().nullable().default(null),\n  organizer: z.string().default(\"\"),\n  startDatetime: z.date().default(() => /* @__PURE__ */ new Date()),\n  endDatetime: z.date().default(() => new Date((/* @__PURE__ */ new Date()).getTime() + 60 * 60 * 1e3)),\n  // one hour later\n  imageUrl: z.string().optional().nullable(),\n  // only for uploading files\n  image: z.instanceof(File, { message: \"Please upload a file\" }).nullable().optional().refine((file) => !file || isFileImage(file), {\n    message: \"Måste vara en bild\"\n  }),\n  tags: z.array(\n    tagSchema.pick({\n      id: true\n    })\n  ).default([]),\n  alarmActive: z.boolean().nullable().default(null),\n  isCancelled: z.boolean().nullable().default(null),\n  isRecurring: z.boolean().default(false),\n  // see comment above and in utils/events.ts why we do it like this\n  recurringType: z.enum([recurringTypesList[0], ...recurringTypesList.slice(1)]).default(recurringTypeValues.WEEKLY),\n  separationCount: z.number().default(0),\n  recurringEndDatetime: z.date().default(() => new Date((/* @__PURE__ */ new Date()).getTime() + 7 * 24 * 60 * 60 * 1e3))\n  // one week later\n}).refine((data) => data.startDatetime < data.endDatetime, {\n  message: events_errors_endAfterStart(),\n  path: [\"endDatetime\"]\n}).refine(\n  (data) => !data.isRecurring || data.startDatetime < data.recurringEndDatetime,\n  {\n    message: events_errors_endAfterStart(),\n    path: [\"recurringEndDatetime\"]\n  }\n);\nconst interestedGoingSchema = z.object({\n  eventId: z.string()\n});\nconst actionType = z.enum([\"THIS\", \"FUTURE\", \"ALL\"]);\nexport {\n  actionType as a,\n  isRecurringType as b,\n  eventSchema as e,\n  getIncrementType as g,\n  interestedGoingSchema as i,\n  recurringTypes as r\n};\n"],"names":[],"mappings":"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"}