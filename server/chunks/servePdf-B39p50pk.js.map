{"version":3,"file":"servePdf-B39p50pk.js","sources":["../../../.svelte-kit/adapter-node/chunks/servePdf.js"],"sourcesContent":["import { e as error } from \"./index.js\";\nfunction getGitHubUrl(pathName) {\n  return new URL(pathName, \"https://github.com/Dsek-LTH/\");\n}\nasync function servePdf(pathName) {\n  if (/^[\\w/.-]+$/.test(pathName)) {\n    const url = getGitHubUrl(pathName);\n    const fetchResponse = await fetch(url);\n    if (!fetchResponse.ok) {\n      throw error(\n        fetchResponse.status,\n        // This is very likely if !fetchResponse.ok\n        fetchResponse.statusText\n      );\n    }\n    const contentType = fetchResponse.headers.get(\"content-type\");\n    if (!contentType?.startsWith(\"application/octet-stream\")) {\n      throw error(404, \"Not Found\");\n    }\n    const buffer = await fetchResponse.arrayBuffer();\n    const fileName = pathName.split(\"/\").pop();\n    const headers = {\n      \"Content-Type\": \"application/pdf\",\n      \"Content-Disposition\": `inline; filename=\"${fileName}\"`\n    };\n    return new Response(buffer, {\n      headers,\n      status: 200\n    });\n  } else {\n    throw error(400, \"Bad Request\");\n  }\n}\nfunction getPdfApiUrl(pathName) {\n  return `/api/pdf/${pathName}`;\n}\nexport {\n  getPdfApiUrl as g,\n  servePdf as s\n};\n"],"names":[],"mappings":";;AACA,SAAS,YAAY,CAAC,QAAQ,EAAE;AAChC,EAAE,OAAO,IAAI,GAAG,CAAC,QAAQ,EAAE,8BAA8B,CAAC,CAAC;AAC3D,CAAC;AACD,eAAe,QAAQ,CAAC,QAAQ,EAAE;AAClC,EAAE,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;AACnC,IAAI,MAAM,GAAG,GAAG,YAAY,CAAC,QAAQ,CAAC,CAAC;AACvC,IAAI,MAAM,aAAa,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;AAC3C,IAAI,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE;AAC3B,MAAM,MAAM,KAAK;AACjB,QAAQ,aAAa,CAAC,MAAM;AAC5B;AACA,QAAQ,aAAa,CAAC,UAAU;AAChC,OAAO,CAAC;AACR,KAAK;AACL,IAAI,MAAM,WAAW,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAClE,IAAI,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,0BAA0B,CAAC,EAAE;AAC9D,MAAM,MAAM,KAAK,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AACpC,KAAK;AACL,IAAI,MAAM,MAAM,GAAG,MAAM,aAAa,CAAC,WAAW,EAAE,CAAC;AACrD,IAAI,MAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAC/C,IAAI,MAAM,OAAO,GAAG;AACpB,MAAM,cAAc,EAAE,iBAAiB;AACvC,MAAM,qBAAqB,EAAE,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC,CAAC;AAC7D,KAAK,CAAC;AACN,IAAI,OAAO,IAAI,QAAQ,CAAC,MAAM,EAAE;AAChC,MAAM,OAAO;AACb,MAAM,MAAM,EAAE,GAAG;AACjB,KAAK,CAAC,CAAC;AACP,GAAG,MAAM;AACT,IAAI,MAAM,KAAK,CAAC,GAAG,EAAE,aAAa,CAAC,CAAC;AACpC,GAAG;AACH,CAAC;AACD,SAAS,YAAY,CAAC,QAAQ,EAAE;AAChC,EAAE,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;AAChC;;;;"}